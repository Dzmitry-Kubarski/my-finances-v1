{"version":3,"sources":["images/chevron-down.svg","images/money2.svg","images/arrow-left.svg","images/tag.svg","images/arrow-big-right.svg","images/logo.svg","images/ellipsis-horizontal.svg","images/arrow-down.png","images/arrow-up.png","images/no-transactions.png","images/credit-card.png","images/pen.svg","images/home.svg","images/chart.svg","images/category.svg","components/TransactionsList/Transaction.jsx","components/TransactionsList/TransactionsList.jsx","components/SourcesList/SourceItem.jsx","components/SourcesList/SourcesList.jsx","context/AuthContext.js","components/SourcesList/useSources.js","pages/HomePage/HomePage.js","components/TransactionsList/useTransactions.js","hooks/http.hook.js","components/Categories/useCategories.js","pages/CreateTransactionPage/CreateTransactionPage.js","components/Login/Login.jsx","components/Register/Register.jsx","pages/AuthPage/AuthPage.js","pages/CreateSource/CreateSource.js","components/Categories/CategoriesItem.jsx","components/Categories/CategoriesList.jsx","pages/CategoriesPage/CategoriesPage.js","pages/CreateCategories/CreateCategories.js","charts/StatisticsExpenses.js","charts/StatisticsRevenue.js","pages/StatisticsPage/StatisticsPage.js","pages/StatisticsPage/useStatisticsExpenses.js","pages/StatisticsPage/useStatisticsRevenue.js","components/Flter/Flter.jsx","pages/AllTransactionsPage/AllTransactionsPage.js","pages/AllTransactionsPage/useAllTransactions.js","pages/DetailSourcePage/DetailSourcePage.js","pages/DetailSourcePage/useSource.js","components/SourcesList/useDeleteSource.js","pages/DetailCategoriesPage/DetailCategoriesPage.js","pages/CategoriesPage/useCategory.js","components/Categories/useDeleteCategory.js","components/Header/Header.jsx","components/Footer/Footer.jsx","App.js","hooks/auth.hook.js","routes.js","index.js"],"names":["module","exports","Transaction","transactions","transactionsJsx","map","sum","comment","operation","category","source","date","_id","key","className","src","arrowDownSvg","alt","arrowUpSvg","TransactionsList","data","isEmpty","length","to","noListGPG","SourceItem","sources","sourcesJsx","title","total","sourcesSvg","arrowBigRightSvg","SourcesList","isScroll","noListJPG","classnames","noop","AuthContext","createContext","token","userId","login","logout","isAuthenticated","email","useSources","React","useContext","useQuery","fetch","headers","Authorization","then","res","json","catch","e","Error","HomePage","isLoading","error","response","status","useTransactions","isLoadingTransactions","errorTransactions","useHttp","useState","loading","setLoading","setError","request","useCallback","url","a","method","body","JSON","stringify","ok","message","clearError","useCategories","CreateTransactionPage","auth","history","useHistory","popupType","setPopupType","popupSources","setPopupSources","popupCategory","setPopupCategory","editDateModal","setEditDateModal","setOperation","setSource","setSum","setCategory","Date","toLocaleDateString","setDate","setComment","categories","errorCategories","sourcesLoading","errorSources","newTransaction","isEmptyFields","Object","entries","filter","createTransactionHandler","cogoToast","push","toogleEditDateModal","arrowLeftSvg","onClick","chevronDownSvg","name","index","selectPperations","exact","item","type","placeholder","value","onChange","event","target","penSvg","Login","username","password","form","setForm","changeHandler","loginHandler","id","disabled","Register","useForm","handleSubmit","register","errors","onSubmit","values","success","ref","required","pattern","minLength","AuthPage","activeForm","setActiveForm","activeTab","setActiveTab","logoSvg","tab","selectForm","CreateSource","newSource","setNewSource","addSourceHandler","preventDefault","CategoriesItem","categoriesJsx","tagSvg","CategoriesList","CategoriesPage","CreateCategories","setTitle","newCategory","addOperationHandler","selectOperations","ReactFC","fcRoot","FusionCharts","Column2D","FusionTheme","ChartComponent","chartConfigs","width","height","dataFormat","dataSource","chart","caption","xAxisName","yAxisName","theme","useplotgradientcolor","i","label","palettecolors","StatisticsPage","useStatisticsExpenses","useStatisticsRevenue","revenue","revenueIsLoading","errorrEvenue","isEmptyExpenses","isEmptyRevenue","StatisticsExpenses","StatisticsRevenue","Filter","setIsOpenFilterList","fetchLinks","setIsNotFound","query","reset","AllTransactionsPage","isOpenFilterList","isNotFound","filtres","setFiltres","useAllTransactions","params","newParams","fromEntries","paramsUrl","keys","encodeURIComponent","join","DetailSourcePage","sourceId","useParams","useSource","isPopup","seTisPopup","editMode","setEditMode","newTitleSource","setNewTitleSource","useMutation","useDeleteSource","deleteSource","deleteSourceHandler","saveSource","changeNewTitleSource","ellipsisHorizontalSvg","DetailCategoriesPage","categoryId","useCategory","newTitleCategory","setNewTitleCategory","useDeleteCategory","deleteCategory","deleteCategoryHandler","saveCategory","changeNewTitleCategory","Header","href","Footer","homeSvg","categorySvg","chartSvg","queryConfig","queries","refetchOnWindowFocus","App","setToken","ready","setReady","setUserId","setEmail","jwtToken","localStorage","setItem","removeItem","useEffect","parse","getItem","useAuth","routes","path","useRoutes","config","Provider","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.bd178ed7.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/chevron-down.8ebe8b51.svg\";","module.exports = __webpack_public_path__ + \"static/media/money2.3879cb4e.svg\";","module.exports = __webpack_public_path__ + \"static/media/arrow-left.cc7b2b17.svg\";","module.exports = __webpack_public_path__ + \"static/media/tag.2b9ed8da.svg\";","module.exports = __webpack_public_path__ + \"static/media/arrow-big-right.bc174e30.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo.64af5a29.svg\";","module.exports = __webpack_public_path__ + \"static/media/ellipsis-horizontal.59c12fbf.svg\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAA80lEQVRIie2PMVKDUBRFz2Ns4gbEddjpZwXAOtQixGQfiWDjuA5lBZKtEPr0XotM1Ml85DNjYcHtYO47536Y8pdpM7fdZe59zM3ZmLLB9bhJEI09mAST4B8J2vzqPBTyW9craDO3Ms32XZrMh+BdmsxNs32bJ8tggZkiIJKp6nJX9MJzV8hUAZF9yMvy/oxft2tBBZhE2WVucdpp85tbifKwh5e4bjbesX3rBLbL3KPBApDBUlACyHRnsucj/KJu7g00SvBDUhoUh8+vvgATPF2+NQ998EGB5yXfhwPLgwU+SSg8WHCUdKlbAcR1swmBTwnKJ5DyXi9v2yReAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAA+UlEQVRIie2VMW7CQBBF36A0HAEnJaegBJ8hFyDIojEROQcSokFINgfIGdhUUU4S2UegMpMCHAys1xuR0q8cj/+b1Y5saGlAvDtVJfhI3wCy4XiBiPq89uAdbrZLIAbombSfq059JM0n+A3X+KIMm3w0bpR0/hBeDVKBKDDbJarOIesFN+H6Wpl+eqrFPZOuXRK7wBKehZNV+TgPXzalRCBySayC47bYw6uS06lUIHo0ydxbIAcKoEBlZgsvycLJCpUZUBykU9T1WXn6eu9e14JdosEuudkaW29J7SV/D573vsO4et1r+g+0glZwP37/gzOfXH5VW+7nB9VcdJV0C2p0AAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/no-transactions.34ffe3db.png\";","module.exports = __webpack_public_path__ + \"static/media/credit-card.d9618088.png\";","module.exports = __webpack_public_path__ + \"static/media/pen.104bf02c.svg\";","module.exports = __webpack_public_path__ + \"static/media/home.8f23844b.svg\";","module.exports = __webpack_public_path__ + \"static/media/chart.7539fa18.svg\";","module.exports = __webpack_public_path__ + \"static/media/category.57663764.svg\";","//core\r\nimport React from 'react';\r\n\r\n//images\r\nimport arrowDownSvg from '../../images/arrow-down.png';\r\nimport arrowUpSvg from '../../images/arrow-up.png';\r\n\r\n// styles\r\nimport './Transaction.scss'\r\n\r\n\r\nconst Transaction = ({ transactions = [] }) => {\r\n    const transactionsJsx = transactions.map(({ sum, comment, operation, category, source, date, _id }) => (\r\n        <li key={_id} className='transaction-item'>\r\n            <div className='transaction-item__arrow-wrap'>\r\n                {operation === 'расходы' ?\r\n                    <img className='transaction-item__arrow' src={arrowDownSvg} alt=\"\" />\r\n                    :\r\n                    <img className='transaction-item__arrow' src={arrowUpSvg} alt=\"\" />\r\n                }\r\n            </div>\r\n\r\n            <div className='transaction-item__col'>\r\n                <p className='transaction-item__date'>{date}</p>\r\n                <p className='transaction-item__title'>{comment}</p>\r\n            </div>\r\n            <div className='transaction-item__col'>\r\n                {operation === 'расходы' ?\r\n                    <p className='transaction-item__price'>-{sum}</p>\r\n                    :\r\n                    <p className='transaction-item__price  green'>+{sum}</p>\r\n                }\r\n\r\n                <p className='transaction-item__category'>#{category}</p>\r\n                <p className='transaction-item__sources'>{source}</p>\r\n            </div>\r\n        </li>\r\n    ))\r\n\r\n    return (\r\n        <>\r\n            {transactionsJsx}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Transaction;","// core\r\nimport React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\n// components\r\nimport Transaction from './Transaction';\r\n\r\n\r\n\r\n// images\r\nimport noListGPG from '../../images/no-transactions.png';\r\n\r\n// styles\r\nimport './TransactionsList.scss'\r\n\r\nconst TransactionsList = ({ data }) => {\r\n\r\n\r\n    const isEmpty = data.length === 0\r\n\r\n    return (\r\n        <div className='transactions'>\r\n            <div className='title-wrap'>\r\n                <h2>Последние транзакции</h2>\r\n                <NavLink className='btn-add' to=\"/create\">+</NavLink>\r\n            </div>\r\n\r\n            {!isEmpty ?\r\n                <>\r\n                    <ul className='transactions__list'>\r\n                        <Transaction transactions={data} />\r\n                    </ul>\r\n\r\n                    <div className=\"form__row\">\r\n                        <div className=\"form__item\">\r\n                            <NavLink className='button medium secondary' to=\"/transactions\">Все транзакци</NavLink>\r\n                        </div>\r\n                    </div>\r\n                </>\r\n                :\r\n                <>\r\n                    <p>Вы не провели ещё ни одной транзакции</p>\r\n                    <img className='no-list' src={noListGPG} alt=\"\" />\r\n                </>\r\n            }\r\n\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default TransactionsList;\r\n\r\n\r\n","// core\r\nimport React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\n// images\r\nimport sourcesSvg from '../../images/money2.svg';\r\nimport arrowBigRightSvg from '../../images/arrow-big-right.svg'\r\n\r\n\r\nconst SourceItem = ({ sources = [] }) => {\r\n\r\n    const sourcesJsx = sources && sources.map(({ title, total, _id }) => (\r\n        <li key={_id} className='sources-item'>\r\n            <img className='sources-item__icon' src={sourcesSvg} alt=\"\" />\r\n\r\n            <p className='sources-item__title'>{title}</p>\r\n\r\n            <div className='sources-item__total'>{total} руб</div>\r\n\r\n            <NavLink to={`/sources/${_id}`} className='new-transaction__btn'>\r\n                <img className='new-transaction__icon' src={arrowBigRightSvg} alt='' />\r\n            </NavLink>\r\n        </li>\r\n    ))\r\n\r\n\r\n    if (!sources) {\r\n        return (\r\n            <p>ничего нет</p>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {sourcesJsx}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default SourceItem;","// core\r\nimport React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport classnames from 'classnames';\r\n\r\n// components\r\nimport SourceItem from './SourceItem';\r\n\r\n// images\r\nimport noListJPG from '../../images/credit-card.png'\r\n\r\n// styles\r\nimport './SourcesList.scss'\r\n\r\nconst SourcesList = ({ data }) => {\r\n\r\n    const isScroll = data.length > 5\r\n    const isEmpty = data.length === 0\r\n\r\n    return (\r\n        <div className='sources'>\r\n            <div className='title-wrap'>\r\n                <h2>Ваши счета</h2>\r\n                <NavLink className='btn-add' to=\"/create-source\">+</NavLink>\r\n            </div>\r\n\r\n            {!isEmpty ?\r\n                <ul className={classnames({ 'sources__list': true, 'scroll': isScroll })}>\r\n                    <SourceItem sources={data} />\r\n                </ul>\r\n                :\r\n                <>\r\n                    <p>Вы не создали ещё ни одного счёта</p>\r\n                    <img className='no-list' src={noListJPG} alt=\"\" />\r\n                </>\r\n            }\r\n        </div >\r\n    );\r\n};\r\n\r\nexport default SourcesList;\r\n","import { createContext } from 'react'\r\n\r\nfunction noop() { }\r\n\r\nexport const AuthContext = createContext({\r\n  token: null,\r\n  userId: null,\r\n  login: noop,\r\n  logout: noop,\r\n  isAuthenticated: false,\r\n  email: null,\r\n})\r\n","//core\r\nimport React from 'react';\r\nimport { useQuery } from 'react-query';\r\n\r\n//context\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\n\r\nexport default function useSources() {\r\n    const { token } = React.useContext(AuthContext);\r\n\r\n    return useQuery('sources', () =>\r\n        fetch('/api/sources', { headers: { Authorization: `Bearer ${token}` } })\r\n            .then((res) => res.json())\r\n\r\n            .catch(e => {\r\n                throw new Error(e)\r\n            })\r\n    )\r\n}\r\n","//core\r\nimport React from 'react';\r\n\r\n//components\r\nimport TransactionsList from '../../components/TransactionsList/TransactionsList';\r\nimport SourcesList from '../../components/SourcesList/SourcesList';\r\n\r\n// hooks\r\nimport useSources from '../../components/SourcesList/useSources';\r\nimport useTransactions from '../../components/TransactionsList/useTransactions';\r\n\r\n\r\nexport const HomePage = () => {\r\n    const { data: sources, isLoading, error } = useSources();\r\n    const { data: transactions, isLoading: isLoadingTransactions, error: errorTransactions } = useTransactions();\r\n\r\n    if (isLoadingTransactions || isLoading) return <p className='loading'>Загрузка данных...</p>\r\n    if (errorTransactions) return 'Ошибка при получении транзакций'\r\n    if (error) return 'Ошибка при получении счетов'\r\n\r\n    return (\r\n        <div className='page  home-page'>\r\n            <div className='container'>\r\n                <div className='page__inner'>\r\n                    <TransactionsList data={transactions} />\r\n                    <SourcesList data={sources} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","//core\r\nimport React from 'react';\r\nimport { useQuery } from 'react-query';\r\n\r\n//context\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\n\r\nexport default function useTransactions() {\r\n    const { token, logout } = React.useContext(AuthContext)\r\n\r\n    return useQuery('transactions', () =>\r\n        fetch('/api/transaction', { headers: { Authorization: `Bearer ${token}` } })\r\n            .then((res) => res.json())\r\n\r\n            .catch(e => {\r\n\r\n                if (e.response.status === 401) logout();\r\n\r\n                throw new Error(e)\r\n            })\r\n    )\r\n}\r\n\r\n","import { useState, useCallback } from 'react'\r\n\r\nexport const useHttp = () => {\r\n  const [loading, setLoading] = useState(false)\r\n  const [error, setError] = useState(null)\r\n\r\n  const request = useCallback(async (url, method = 'GET', body = null, headers = {}) => {\r\n    setLoading(true)\r\n    try {\r\n      if (body) {\r\n        body = JSON.stringify(body)\r\n        headers['Content-Type'] = 'application/json'\r\n      }\r\n\r\n      const response = await fetch(url, { method, body, headers })\r\n      const data = await response.json()\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.message || 'Что-то пошло не так')\r\n      }\r\n\r\n      setLoading(false)\r\n      return data\r\n\r\n    } catch (e) {\r\n      setLoading(false)\r\n      setError(e.message)\r\n      throw e\r\n    }\r\n  }, [])\r\n\r\n  const clearError = useCallback(() => setError(null), [])\r\n\r\n  return { loading, request, error, clearError }\r\n}\r\n","//core\r\nimport React from 'react';\r\nimport { useQuery } from 'react-query';\r\n\r\n//context\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\n\r\nexport default function useCategories() {\r\n    const { token } = React.useContext(AuthContext);\r\n\r\n    return useQuery('categories', () =>\r\n        fetch('/api/categories', { headers: { Authorization: `Bearer ${token}` } })\r\n            .then((res) => res.json())\r\n\r\n            .catch(e => {\r\n                throw new Error(e)\r\n            })\r\n    )\r\n}\r\n\r\n","//core\r\nimport React, { useContext, useState } from 'react';\r\nimport { NavLink, useHistory } from 'react-router-dom';\r\n\r\n// libs\r\nimport cogoToast from 'cogo-toast';\r\n\r\n//hooks\r\nimport { useHttp } from '../../hooks/http.hook';\r\nimport useSources from '../../components/SourcesList/useSources';\r\n\r\n//context\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\n//components\r\nimport useCategories from '../../components/Categories/useCategories';\r\n\r\n//images\r\nimport chevronDownSvg from '../../images/chevron-down.svg';\r\nimport penSvg from '../../images/pen.svg';\r\nimport arrowLeftSvg from '../../images/arrow-left.svg';\r\n\r\n// styles \r\nimport './CreateTransactionPage.scss'\r\n\r\n\r\nexport const CreateTransactionPage = () => {\r\n    const auth = useContext(AuthContext)\r\n    const { request } = useHttp()\r\n    const history = useHistory()\r\n\r\n    const [popupType, setPopupType] = useState(false);\r\n    const [popupSources, setPopupSources] = useState(false);\r\n    const [popupCategory, setPopupCategory] = useState(false);\r\n    const [editDateModal, setEditDateModal] = useState(false);\r\n\r\n    const [operation, setOperation] = useState('');\r\n    const [source, setSource] = useState('');\r\n    const [sum, setSum] = useState('');\r\n    const [category, setCategory] = useState('');\r\n    const [date, setDate] = useState(new Date().toLocaleDateString());\r\n    const [comment, setComment] = useState('');\r\n\r\n    const { data: categories, isLoading, error: errorCategories } = useCategories();\r\n    const { data: sources, isLoading: sourcesLoading, error: errorSources } = useSources();\r\n\r\n    const operations = ['расходы', 'доходы'];\r\n\r\n    const newTransaction = {\r\n        operation,\r\n        source,\r\n        sum,\r\n        category,\r\n        date,\r\n        comment,\r\n    }\r\n\r\n    const isEmptyFields = Object.entries(newTransaction).filter(([key, value]) => value === '')\r\n\r\n    const createTransactionHandler = async () => {\r\n        if (isEmptyFields.length > 0) {\r\n            return cogoToast.error('Заполните все поля');\r\n        }\r\n\r\n        await request('/api/transaction/add', 'POST', { ...newTransaction }, {\r\n            Authorization: `Bearer ${auth.token}`\r\n        })\r\n\r\n\r\n        await request('/api/sources/edit-total', 'POST', { ...newTransaction }, {\r\n            Authorization: `Bearer ${auth.token}`\r\n        })\r\n\r\n        history.push(`/home/`)\r\n    }\r\n\r\n    const tooglePopupType = () => {\r\n        setPopupType(!popupType)\r\n    }\r\n\r\n    const tooglePopupSources = () => {\r\n        setPopupSources(!popupSources)\r\n    }\r\n\r\n    const tooglePopupCategory = () => {\r\n        setPopupCategory(!popupCategory)\r\n    }\r\n\r\n    const selectPperations = (name) => {\r\n        setOperation(name)\r\n        setPopupType(!popupType)\r\n    }\r\n\r\n    const selectSources = (name) => {\r\n        setSource(name)\r\n        setPopupSources(!popupSources)\r\n    }\r\n\r\n    const selectCategory = (title) => {\r\n        setCategory(title)\r\n        setPopupCategory(!popupCategory)\r\n    }\r\n\r\n    const sumChangeHadler = (event) => {\r\n        setSum(event.target.value)\r\n    }\r\n\r\n    const commentChangeHadler = (event) => {\r\n        setComment(event.target.value)\r\n    }\r\n\r\n    const toogleEditDateModal = () => {\r\n        setEditDateModal(!editDateModal)\r\n    }\r\n\r\n    const changeDateHandler = event => {\r\n        setDate(event.target.value);\r\n    }\r\n\r\n    if (isLoading) return 'Loading...'\r\n    if (sourcesLoading) return 'Loading...'\r\n\r\n    if (errorCategories) return 'Ошибка при получении счетов'\r\n    if (errorSources) return 'Ошибка при получении счетов'\r\n\r\n\r\n    return (\r\n        <div className='page  createPage'>\r\n\r\n            <div className='container'>\r\n                <div className='title-wrap'>\r\n                    <h2>Новая транзакция</h2>\r\n                    <NavLink className='btn-add' to=\"/home\">\r\n                        <img className='btn-add__icon' src={arrowLeftSvg} alt=\"\" />\r\n                    </NavLink>\r\n                </div>\r\n\r\n                <div className='new-transaction'>\r\n                    <div className='new-transaction__row'>\r\n                        <h4 className='new-transaction__title'>Тип операции:</h4>\r\n\r\n                        <div className='new-transaction__col'>\r\n                            <span className='new-transaction__value'>{operation}</span>\r\n\r\n                            <button onClick={tooglePopupType} className='new-transaction__btn'>\r\n                                <img className='new-transaction__icon' src={chevronDownSvg} alt='' />\r\n                            </button>\r\n                        </div>\r\n\r\n                        {popupType && <ul className='new-transaction__popup-list'>\r\n\r\n                            {operations.map((name, index) => (\r\n                                <li key={`${name}_${index}`} className='new-transaction__popup-item'>\r\n                                    <button onClick={() => { selectPperations(name) }} className='new-transaction__popup-btn'>{name}</button>\r\n                                </li>\r\n                            ))}\r\n\r\n                        </ul>}\r\n                    </div>\r\n\r\n                    <div className='new-transaction__row'>\r\n                        <h4 className='new-transaction__title'>Счёт:</h4>\r\n\r\n                        <div className='new-transaction__col'>\r\n                            <span className='new-transaction__value'>{source}</span>\r\n\r\n                            <button onClick={tooglePopupSources} className='new-transaction__btn'>\r\n                                <img className='new-transaction__icon' src={chevronDownSvg} alt='' />\r\n                            </button>\r\n                        </div>\r\n\r\n                        {popupSources &&\r\n                            <ul className='new-transaction__popup-list'>\r\n                                {sources.length === 0\r\n                                    ? <li className='new-transaction__popup-item'>\r\n                                        <NavLink to='create-source' exact className='new-transaction__popup-btn'>Создать</NavLink>\r\n                                    </li>\r\n\r\n                                    : sources.map(({ title }, index) => (\r\n                                        <li key={`${title}_${index}`} className='new-transaction__popup-item'>\r\n                                            <button onClick={() => { selectSources(title) }} className='new-transaction__popup-btn'>{title}</button>\r\n                                        </li>\r\n                                    ))}\r\n                            </ul>\r\n                        }\r\n                    </div>\r\n\r\n                    <div className='new-transaction__row'>\r\n                        <h4 className='new-transaction__title'>Категория:</h4>\r\n\r\n                        <div className='new-transaction__col'>\r\n                            <span className='new-transaction__value'>{category}</span>\r\n                            <button onClick={tooglePopupCategory} className='new-transaction__btn'>\r\n                                <img className='new-transaction__icon' src={chevronDownSvg} alt='' />\r\n                            </button>\r\n                        </div>\r\n\r\n                        {popupCategory &&\r\n                            <ul className='new-transaction__popup-list'>\r\n                                {categories.length === 0\r\n                                    ? <li className='new-transaction__popup-item'>\r\n                                        <NavLink to='create-category' exact className='new-transaction__popup-btn'>Создать</NavLink>\r\n                                    </li>\r\n\r\n                                    : categories.map((item, index) => (\r\n                                        <li key={`${item.title}_${index}`} className='new-transaction__popup-item'>\r\n                                            <button onClick={() => { selectCategory(item.title) }} className='new-transaction__popup-btn'>{item.title}</button>\r\n                                        </li>\r\n                                    ))}\r\n                            </ul>\r\n                        }\r\n                    </div>\r\n\r\n\r\n                    <div className='new-transaction__row'>\r\n                        <h4 className='new-transaction__title'>Дата:</h4>\r\n                        <div className='new-transaction__col'>\r\n\r\n                            {!editDateModal\r\n                                ? <span className='new-transaction__value'>{date} </span>\r\n                                : <input type='text' placeholder={date} value={date} onChange={changeDateHandler} />\r\n                            }\r\n\r\n                            {!editDateModal\r\n                                ?\r\n                                <button onClick={toogleEditDateModal} className='new-transaction__btn'>\r\n                                    <img className='new-transaction__icon' src={penSvg} alt='' />\r\n                                </button>\r\n                                :\r\n                                <button onClick={toogleEditDateModal} className='new-transaction__btn'>\r\n                                    ok\r\n                            </button>\r\n                            }\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    <div className='new-transaction__row'>\r\n                        <h4 className='new-transaction__title'>Комментарий</h4>\r\n                        <textarea onChange={commentChangeHadler} placeholder='Описание' value={comment} />\r\n                    </div>\r\n\r\n\r\n                    <div className='new-transaction__row'>\r\n                        <h4 className='new-transaction__title'>Сумма:</h4>\r\n                        <div className='new-transaction__col'>\r\n                            <input onChange={sumChangeHadler} type='number' placeholder='сумма' value={sum} />\r\n                            <button onClick={createTransactionHandler} className='new-transaction__submit' type='button'>Подтвердить</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}\r\n","// core\r\nimport React, { useContext, useState } from 'react';\r\n\r\n// libs\r\nimport cogoToast from 'cogo-toast';\r\n\r\n//hooks\r\nimport { useHttp } from '../../hooks/http.hook';\r\n\r\n//context\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\n// styles\r\nimport './Form.scss';\r\n\r\n\r\nconst Login = () => {\r\n    const auth = useContext(AuthContext);\r\n    const { loading, request } = useHttp();\r\n\r\n    const [form, setForm] = useState({\r\n        email: '', username: '', password: ''\r\n    })\r\n\r\n    const changeHandler = event => {\r\n        setForm({ ...form, [event.target.name]: event.target.value });\r\n    }\r\n\r\n    const loginHandler = async () => {\r\n        try {\r\n            const data = await request('/api/auth/login', 'POST', { ...form });\r\n            auth.login(data.token, data.userId, data.email);\r\n\r\n        } catch (e) {\r\n            cogoToast.error(e.message);\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"form-box\">\r\n            <h2 className=\"form-box__title\">Вход в аккаунт</h2>\r\n\r\n            <div className=\"form\">\r\n                <div className=\"form__row\">\r\n                    <div className=\"form__item\">\r\n                        <div className=\"form__input\">\r\n                            <input type=\"text\" id=\"login-username\" name=\"email\" placeholder='Email' onChange={changeHandler} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"form__row\">\r\n                    <div className=\"form__item\">\r\n                        <div className=\"form__input\">\r\n                            <input type=\"password\" id=\"login-password\" name=\"password\" placeholder='Password' onChange={changeHandler} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"form__row\">\r\n                    <div className=\"form__item\">\r\n                        <button onClick={loginHandler}\r\n                            disabled={loading}\r\n                            className={!loading ? 'button medium secondary' : 'button medium color-loader-bar-8'}>\r\n                            {!loading ? 'Войти в аккаунт' : 'Обработка данных'}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Login;","// core\r\nimport React from 'react';\r\n\r\n// libs\r\nimport cogoToast from 'cogo-toast';\r\nimport { useForm } from \"react-hook-form\";\r\n\r\n//hooks\r\nimport { useHttp } from '../../hooks/http.hook';\r\n\r\n// styles\r\nimport './Form.scss';\r\n\r\n\r\nconst Register = () => {\r\n    const { loading, request } = useHttp();\r\n\r\n    const { handleSubmit, register, errors } = useForm();\r\n    const onSubmit = async (values) => {\r\n        try {\r\n            await request('/api/auth/register', 'POST', { ...values });\r\n            cogoToast.success(\"Регистрация прошла успешно\");\r\n\r\n        } catch (e) {\r\n            cogoToast.error(e.message);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"form-box\">\r\n            <h2 className=\"form-box__title\">Регистрация</h2>\r\n\r\n            <form onSubmit={handleSubmit(onSubmit)} className='form'>\r\n                <div className='form__row'>\r\n                    <div className='form__input'>\r\n                        <input\r\n                            name=\"email\"\r\n                            placeholder='Email'\r\n                            type='text'\r\n                            ref={register({\r\n                                required: \"Обязательное поле\",\r\n                                pattern: {\r\n                                    value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,\r\n                                    message: \"Некорректный email\"\r\n                                }\r\n                            })}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className='errors'>\r\n                    {errors.email && errors.email.message}\r\n                </div>\r\n\r\n\r\n                <div className='form__row'>\r\n                    <div className='form__input'>\r\n                        <input\r\n                            name=\"username\"\r\n                            placeholder='Ваше имя'\r\n                            type='text'\r\n                            ref={register({\r\n                                required: \"Обязательное поле\",\r\n                                minLength: 4,\r\n                            })}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className='errors'>\r\n                    {errors.username && errors.username.message}\r\n                    {errors.username?.type === \"minLength\" && \"Минимальное кол-во символов = 4\"}\r\n                </div>\r\n\r\n\r\n                <div className='form__row'>\r\n                    <div className='form__input'>\r\n                        <input\r\n                            name=\"password\"\r\n                            placeholder='Password'\r\n                            type='password'\r\n                            ref={register({\r\n                                required: \"Обязательное поле\",\r\n                                minLength: 6,\r\n                            })}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className='errors'>\r\n                    {errors.username && errors.username.message}\r\n                    {errors.password?.type === \"minLength\" && \"Минимальное кол-во символов = 6\"}\r\n                </div>\r\n\r\n\r\n                <div className='form__row'>\r\n                    <button\r\n                        type=\"submit\"\r\n                        disabled={loading}\r\n                        className={!loading ? 'button medium secondary' : 'button medium color-loader-bar-8'}>\r\n                        {!loading ? 'Зарегестрироваться' : 'Обработка данных'}\r\n                    </button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Register;","//core\r\nimport React, { useState } from 'react';\r\n\r\n// components\r\nimport Login from '../../components/Login/Login';\r\nimport Register from '../../components/Register/Register';\r\n\r\n//images\r\nimport logoSvg from '../../images/logo.svg';\r\n\r\n// styles\r\nimport './AuthPage.scss'\r\n\r\n\r\nconst AuthPage = () => {\r\n    const [activeForm, setActiveForm] = useState('loginForm');\r\n    const [activeTab, setActiveTab] = useState(0);\r\n\r\n    const tabs = [\r\n        { name: 'Login' },\r\n        { name: 'Register' }\r\n    ]\r\n\r\n    const selectForm = (name, index) => {\r\n        if (name === 'Login') {\r\n            setActiveForm('loginForm')\r\n            setActiveTab(index)\r\n        }\r\n\r\n        else if (name === 'Register') {\r\n            setActiveForm('registerForm');\r\n            setActiveTab(index)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"auth\">\r\n            <div className='container'>\r\n                <div className='auth__inner'>\r\n                    <div className='auth__decoration'></div>\r\n\r\n                    <div className=\"auth__content\">\r\n                        <div className=\"logo  auth__logo\">\r\n                            <img className='logo__img' src={logoSvg} alt=\"logo\" />\r\n                        </div>\r\n\r\n                        <h2 className=\"auth__subtitle\">Welcome to</h2>\r\n                        <h1 className=\"auth__title\">Finance</h1>\r\n\r\n                        <p className=\"auth__text\">\r\n                            Данное приложение поможет вам вести учёт расходов и доходов\r\n                        </p>\r\n\r\n                        <div className=\"auth__tabs\">\r\n                            {\r\n                                tabs.map((tab, index) => (\r\n                                    <p key={tab.name}\r\n                                        className={activeTab === index ? 'auth__tab active' : 'auth__tab'}\r\n                                        onClick={() => { selectForm(tab.name, index) }}\r\n                                    >\r\n                                        {tab.name}\r\n                                    </p>\r\n                                ))\r\n                            }\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    {activeForm === 'loginForm' && (\r\n                        <Login />\r\n                    )}\r\n\r\n                    {activeForm === 'registerForm' && (\r\n                        <Register />\r\n                    )}\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AuthPage\r\n","//core\r\nimport React from 'react';\r\nimport { NavLink, useHistory } from 'react-router-dom';\r\n\r\n//hooks\r\nimport { useHttp } from '../../hooks/http.hook';\r\n\r\n//context\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\n//images\r\nimport sourcesSvg from '../../images/money2.svg';\r\nimport arrowLeftSvg from '../../images/arrow-left.svg';\r\n\r\n// styles\r\nimport './CreateSource.scss'\r\n\r\n\r\nconst CreateSource = () => {\r\n    const history = useHistory()\r\n\r\n    const auth = React.useContext(AuthContext);\r\n    const { request, } = useHttp();\r\n\r\n    const [newSource, setNewSource] = React.useState({\r\n        title: '', total: 0\r\n    })\r\n\r\n    const changeHandler = event => {\r\n        setNewSource({ ...newSource, [event.target.name]: event.target.value });\r\n    }\r\n\r\n    const addSourceHandler = async (e) => {\r\n        e.preventDefault();\r\n\r\n        await request('/api/sources/add', 'POST', { ...newSource }, {\r\n            Authorization: `Bearer ${auth.token}`\r\n        })\r\n        history.push(`/home/`)\r\n    }\r\n\r\n    return (\r\n        <div className='page  create-sources'>\r\n            <div className='container'>\r\n                <div className='title-wrap'>\r\n                    <h2>Новый счет</h2>\r\n                    <NavLink className='btn-add' to=\"/home\">\r\n                        <img className='btn-add__icon' src={arrowLeftSvg} alt=\"\" />\r\n                    </NavLink>\r\n                </div>\r\n\r\n                <img className='page__icon' src={sourcesSvg} alt=\"\" />\r\n\r\n                <div className='new-transaction'>\r\n                    <div className='new-transaction__row'>\r\n                        <form onSubmit={addSourceHandler} className='new-transaction__col'>\r\n                            <input onChange={changeHandler} type='text' placeholder='Название счёта' name='title' required />\r\n                            <input onChange={changeHandler} type='number' placeholder='Стартовая сумма на счету' name='total' required />\r\n                            <button type='submit' className='new-transaction__submit'>Подтвердить</button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CreateSource;","//core\r\nimport React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\n//images\r\nimport tagSvg from '../../images/tag.svg';\r\nimport arrowBigRightSvg from '../../images/arrow-big-right.svg'\r\n\r\n\r\nconst CategoriesItem = ({ categories = [] }) => {\r\n    const categoriesJsx = categories.map(({ title, _id }) => (\r\n        <li key={_id} className='sources-item'>\r\n            <img className='sources-item__icon' src={tagSvg} alt=\"\" />\r\n\r\n            <h4 className='sources-item__title'>{title}</h4>\r\n\r\n            <NavLink to={`/categories/${_id}`} className='new-transaction__btn'>\r\n                <img className='new-transaction__icon' src={arrowBigRightSvg} alt='' />\r\n            </NavLink>\r\n        </li>\r\n    ))\r\n\r\n    return (\r\n        <>\r\n            {categoriesJsx}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default CategoriesItem;","//core\r\nimport React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport classnames from 'classnames';\r\n\r\n//hooks\r\nimport useCategories from './useCategories';\r\n\r\n//components\r\nimport CategoriesItem from './CategoriesItem';\r\n\r\n\r\nconst CategoriesList = () => {\r\n    const { data, isLoading, error } = useCategories()\r\n\r\n    if (isLoading) return <p className='loading'>Загрузка...</p>\r\n    if (error) return 'Ошибка при получении счетов: ' + error.message\r\n\r\n    const isScroll = data.length > 5\r\n    const isEmpty = data.length === 0\r\n\r\n    return (\r\n        <div className='sources'>\r\n            <div className='title-wrap'>\r\n                <h2 className='transaction__title'>Ваши категории</h2>\r\n                <NavLink className='btn-add' to=\"/create-category\">+</NavLink>\r\n            </div>\r\n\r\n            {!isEmpty ?\r\n                <ul className={classnames({ 'scroll': isScroll, 'sources__list': true, })}>\r\n                    <CategoriesItem categories={data} />\r\n                </ul>\r\n                :\r\n                <p>Вы ещё не создали ни одной категории</p>\r\n            }\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CategoriesList;","//core\r\nimport React from 'react';\r\n\r\n//components\r\nimport CategoriesList from '../../components/Categories/CategoriesList';\r\n\r\nconst CategoriesPage = () => {\r\n    return (\r\n        <div className='page  categoriesPage'>\r\n            <div className='container'>\r\n                <div className='page__inner'>\r\n                    <CategoriesList />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CategoriesPage;","// core\r\nimport React, { useState } from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { useHistory } from 'react-router-dom'\r\n\r\n// hooks\r\nimport { useHttp } from '../../hooks/http.hook';\r\n\r\n// context\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\n// images\r\nimport tagSvg from '../../images/tag.svg';\r\nimport chevronDownSvg from '../../images/chevron-down.svg';\r\nimport arrowLeftSvg from '../../images/arrow-left.svg';\r\n\r\n\r\nconst CreateCategories = () => {\r\n    const history = useHistory()\r\n    const auth = React.useContext(AuthContext);\r\n    const { request } = useHttp();\r\n\r\n    const [popupType, setPopupType] = useState(false);\r\n    const [operation, setOperation] = useState('');\r\n    const [title, setTitle] = useState('');\r\n    const [error, setError] = useState(false);\r\n\r\n    const newCategory = {\r\n        title,\r\n        operation\r\n    }\r\n\r\n    const changeHandler = event => {\r\n        setTitle(event.target.value);\r\n    }\r\n\r\n    const addOperationHandler = async (e) => {\r\n        e.preventDefault();\r\n\r\n        if (operation === '') {\r\n            return setError(true)\r\n        }\r\n\r\n        await request('/api/categories/add', 'POST', { ...newCategory }, {\r\n            Authorization: `Bearer ${auth.token}`\r\n        })\r\n        history.push(`/categories/`)\r\n    }\r\n\r\n    const operations = ['расходы', 'доходы'];\r\n\r\n    const tooglePopupType = () => {\r\n        setPopupType(!popupType)\r\n    }\r\n\r\n    const selectOperations = (name) => {\r\n        setOperation(name)\r\n        setPopupType(!popupType)\r\n    }\r\n\r\n    return (\r\n        <div className='page  create-sources'>\r\n\r\n            <div className='container'>\r\n                <div className='title-wrap'>\r\n                    <h2>Новая категория</h2>\r\n                    <NavLink className='btn-add' to=\"/categories\">\r\n                        <img className='btn-add__icon' src={arrowLeftSvg} alt=\"\" />\r\n                    </NavLink>\r\n                </div>\r\n\r\n                <img className='page__icon' src={tagSvg} alt=\"\" />\r\n\r\n                <div className='new-transaction'>\r\n                    <div className='new-transaction__row'>\r\n                        <form onSubmit={addOperationHandler} className='new-transaction__col'>\r\n                            <input onChange={changeHandler} type='text' placeholder='Название категории' name='title' required />\r\n\r\n                            <div className='create-sources__row'>\r\n                                <h4 className='new-transaction__title'>Тип операции:</h4>\r\n\r\n                                <div className='create-sources__col'>\r\n                                    <span className='new-transaction__value'>{operation}</span>\r\n\r\n                                    <button type='button' onClick={tooglePopupType} className='new-transaction__btn' >\r\n                                        <img className='new-transaction__icon' src={chevronDownSvg} alt='' />\r\n                                    </button>\r\n                                </div>\r\n\r\n                                {popupType && <ul className='new-transaction__popup-list'>\r\n\r\n                                    {operations.map((name, index) => (\r\n                                        <li key={`${name}_${index}`} className='new-transaction__popup-item'>\r\n                                            <button onClick={() => { selectOperations(name) }} className='new-transaction__popup-btn'>{name}</button>\r\n                                        </li>\r\n                                    ))}\r\n\r\n                                </ul>}\r\n                            </div>\r\n\r\n                            <button className='new-transaction__submit' type='submit'>Добавить категорию</button>\r\n                        </form>\r\n\r\n                        {error && <p className='error'>Заполните все поля</p>}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CreateCategories;","\r\nimport React from \"react\";\r\n\r\n// Include the react-fusioncharts component\r\nimport ReactFC from \"react-fusioncharts\";\r\n\r\n// Include the fusioncharts library\r\nimport FusionCharts from \"fusioncharts\";\r\n\r\n// Include the chart type\r\nimport Column2D from \"fusioncharts/fusioncharts.charts\";\r\n\r\n// Include the theme as fusion\r\nimport FusionTheme from \"fusioncharts/themes/fusioncharts.theme.fusion\";\r\n\r\n// Adding the chart and theme as dependency to the core fusioncharts\r\nReactFC.fcRoot(FusionCharts, Column2D, FusionTheme);\r\n\r\nconst ChartComponent = ({ data = [] }) => {\r\n  const newArr = data.map(i => ({ label: i._id, value: i.sum }));\r\n\r\n  const chartConfigs = {\r\n    type: \"bar3d\",\r\n    width: \"100%\",\r\n    height: \"400\",\r\n    dataFormat: \"json\",\r\n    dataSource: {\r\n      // Chart Configuration\r\n      chart: {\r\n        caption: \"Расходы по категориям\",\r\n        // subCaption: \"In MMbbl = One Million barrels\",        \r\n        xAxisName: \"Категории\",\r\n        yAxisName: \"Сумма в бел.руб\",\r\n        // numberSuffix: \"руб\",\r\n        theme: \"fusion\",\r\n        // palettecolors: \"#23d2e2\",\r\n        useplotgradientcolor: \"0\",\r\n        // \"showBorder\": \"1\",\r\n        // \"borderColor\": \"#666666\",\r\n        // \"borderThickness\": \"4\",\r\n        // \"borderAlpha\": \"80\",\r\n        // \"bgImage\": \"http://upload.wikimedia.org/wikipedia/commons/7/79/Misc_fruit.jpg\",\r\n      },\r\n      // Chart Data\r\n      data: newArr\r\n    }\r\n  };\r\n\r\n  return <ReactFC {...chartConfigs} />\r\n};\r\n\r\nexport default ChartComponent;","\r\nimport React from \"react\";\r\n\r\n// Include the react-fusioncharts component\r\nimport ReactFC from \"react-fusioncharts\";\r\n\r\n// Include the fusioncharts library\r\nimport FusionCharts from \"fusioncharts\";\r\n\r\n// Include the chart type\r\nimport Column2D from \"fusioncharts/fusioncharts.charts\";\r\n\r\n// Include the theme as fusion\r\nimport FusionTheme from \"fusioncharts/themes/fusioncharts.theme.fusion\";\r\n\r\n// Adding the chart and theme as dependency to the core fusioncharts\r\nReactFC.fcRoot(FusionCharts, Column2D, FusionTheme);\r\n\r\nconst ChartComponent = ({ data = [] }) => {\r\n  const newArr = data.map(i => ({ label: i._id, value: i.sum }));\r\n\r\n  const chartConfigs = {\r\n    type: \"bar3d\",\r\n    width: \"100%\",\r\n    height: \"400\",\r\n    dataFormat: \"json\",\r\n    dataSource: {\r\n      // Chart Configuration\r\n      chart: {\r\n        caption: \"Доходы по категориям\",\r\n        // subCaption: \"In MMbbl = One Million barrels\",        \r\n        xAxisName: \"Категории\",\r\n        yAxisName: \"Сумма в бел.руб\",\r\n        // numberSuffix: \"руб\",\r\n        theme: \"fusion\",\r\n        palettecolors: \"#23d2e2\",\r\n        useplotgradientcolor: \"0\",\r\n        // \"showBorder\": \"1\",\r\n        // \"borderColor\": \"#666666\",\r\n        // \"borderThickness\": \"4\",\r\n        // \"borderAlpha\": \"80\",\r\n        // \"bgImage\": \"http://upload.wikimedia.org/wikipedia/commons/7/79/Misc_fruit.jpg\",\r\n      },\r\n      // Chart Data\r\n      data: newArr\r\n    }\r\n  };\r\n\r\n  return <ReactFC {...chartConfigs} />;\r\n};\r\n\r\nexport default ChartComponent;","//core\r\nimport React from 'react';\r\n\r\n//charts\r\nimport StatisticsExpenses from '../../charts/StatisticsExpenses';\r\nimport StatisticsRevenue from '../../charts/StatisticsRevenue';\r\n\r\n//hooks\r\nimport useStatisticsExpenses from './useStatisticsExpenses';\r\nimport useStatisticsRevenue from './useStatisticsRevenue';\r\n\r\n// styles\r\nimport './StatisticsPage.scss'\r\n\r\n\r\nconst StatisticsPage = () => {\r\n    const { data, isLoading, error } = useStatisticsExpenses()\r\n    const { data: revenue, isLoading: revenueIsLoading, error: errorrEvenue } = useStatisticsRevenue()\r\n\r\n    if (isLoading) return <p className='load-statistics'>Загрузка...</p>\r\n    if (error) return 'Ошибка при получении данных'\r\n\r\n    if (revenueIsLoading) return <p className='load-statistics'>Загрузка...</p>\r\n    if (errorrEvenue) return 'Ошибка при получении данных'\r\n\r\n    const isEmptyExpenses = data.length === 0\r\n    const isEmptyRevenue = revenue.length === 0\r\n\r\n    return (\r\n        <div className='page  statisticsPage'>\r\n            <div className='container'>\r\n                <h1 className='page__title'>Статистика</h1>\r\n\r\n                <div className='page__inner'>\r\n                    {!isEmptyExpenses ? <StatisticsExpenses data={data} /> : <p>Ещё нет данных о расходах</p>}\r\n                    {!isEmptyRevenue ? <StatisticsRevenue data={revenue} /> : <p>Ещё нет данных о доходах</p>}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default StatisticsPage;","//core\r\nimport React from 'react';\r\nimport { useQuery } from 'react-query';\r\n\r\n//context\r\nimport { AuthContext } from '../../context/AuthContext'\r\n\r\nexport default function useStatisticsExpenses() {\r\n    const { token, logout } = React.useContext(AuthContext);\r\n\r\n    return useQuery('expenses', () =>\r\n\r\n        fetch('/api/transaction/expenses', { headers: { Authorization: `Bearer ${token}` } })\r\n            .then((res) => res.json())\r\n\r\n            .catch(e => {\r\n\r\n                if (e.response.status === 401) logout();\r\n\r\n                throw new Error(e)\r\n            })\r\n    )\r\n}\r\n","//core\r\nimport React from 'react';\r\nimport { useQuery } from 'react-query';\r\n\r\n//context\r\nimport { AuthContext } from '../../context/AuthContext'\r\n\r\nexport default function useStatisticsRevenue() {\r\n    const { token, logout } = React.useContext(AuthContext);\r\n\r\n    return useQuery('revenue', () =>\r\n\r\n        fetch('/api/transaction/revenue', { headers: { Authorization: `Bearer ${token}` } })\r\n            .then((res) => res.json())\r\n\r\n            .catch(e => {\r\n\r\n                if (e.response.status === 401) logout();\r\n\r\n                throw new Error(e)\r\n            })\r\n    )\r\n}\r\n","//core\r\nimport React, { useState } from 'react';\r\n\r\n//hooks\r\nimport useCategories from '../Categories/useCategories';\r\nimport useSources from '../SourcesList/useSources';\r\n\r\n//images\r\nimport chevronDownSvg from '../../images/chevron-down.svg';\r\n\r\n\r\nexport const Filter = ({ setIsOpenFilterList, fetchLinks, setIsNotFound }) => {\r\n    const [popupType, setPopupType] = useState(false);\r\n    const [popupSources, setPopupSources] = useState(false);\r\n    const [popupCategory, setPopupCategory] = useState(false);\r\n\r\n    const [operation, setOperation] = useState('');\r\n    const [source, setSource] = useState('');\r\n    const [category, setCategory] = useState('');\r\n\r\n    const query = {\r\n        operation,\r\n        source,\r\n        category,\r\n    }\r\n\r\n    const reset = {}\r\n\r\n    const { data: categories, isLoading, error: errorCategories } = useCategories()\r\n    const { data: sources, isLoading: sourcesLoading, error: errorSources } = useSources()\r\n\r\n    const fetchFilterListHandler = () => {\r\n        setIsOpenFilterList(true)\r\n        fetchLinks(query)\r\n    }\r\n\r\n    const resetFilterListHandler = () => {\r\n        setIsOpenFilterList(true)\r\n        fetchLinks(reset)\r\n        setOperation('')\r\n        setSource('')\r\n        setCategory('')\r\n        setIsNotFound(false)\r\n    }\r\n\r\n    const tooglePopupType = () => {\r\n        setPopupType(!popupType)\r\n    }\r\n\r\n    const tooglePopupSources = () => {\r\n        setPopupSources(!popupSources)\r\n    }\r\n\r\n    const tooglePopupCategory = () => {\r\n        setPopupCategory(!popupCategory)\r\n    }\r\n\r\n    const operations = ['расходы', 'доходы'];\r\n    const selectPperations = (name) => {\r\n        setOperation(name)\r\n        setPopupType(!popupType)\r\n    }\r\n\r\n    const selectSources = (name) => {\r\n        setSource(name)\r\n        setPopupSources(!popupSources)\r\n    }\r\n\r\n    const selectCategory = (title) => {\r\n        setCategory(title)\r\n        setPopupCategory(!popupCategory)\r\n    }\r\n\r\n    if (isLoading) return 'Loading...'\r\n    if (sourcesLoading) return 'Loading...'\r\n\r\n    if (errorCategories) return 'Ошибка при получении счетов: ' + errorCategories.message\r\n    if (errorSources) return 'Ошибка при получении счетов: ' + errorSources.message\r\n\r\n\r\n    return (\r\n        <div className='new-transaction'>\r\n            <div className='new-transaction__row'>\r\n                <h4 className='new-transaction__title'>Тип операции:</h4>\r\n\r\n                <div className='new-transaction__col'>\r\n                    <span className='new-transaction__value'>{operation}</span>\r\n\r\n                    <button onClick={tooglePopupType} className='new-transaction__btn'>\r\n                        <img className='new-transaction__icon' src={chevronDownSvg} alt='' />\r\n                    </button>\r\n                </div>\r\n\r\n                {popupType && <ul className='new-transaction__popup-list'>\r\n\r\n                    {operations.map((name, index) => (\r\n                        <li key={`${name}_${index}`} className='new-transaction__popup-item'>\r\n                            <button onClick={() => { selectPperations(name) }} className='new-transaction__popup-btn'>{name}</button>\r\n                        </li>\r\n                    ))}\r\n\r\n                </ul>}\r\n            </div>\r\n\r\n            <div className='new-transaction__row'>\r\n                <h4 className='new-transaction__title'>Счёт:</h4>\r\n\r\n                <div className='new-transaction__col'>\r\n                    <span className='new-transaction__value'>{source}</span>\r\n\r\n                    <button onClick={tooglePopupSources} className='new-transaction__btn'>\r\n                        <img className='new-transaction__icon' src={chevronDownSvg} alt='' />\r\n                    </button>\r\n                </div>\r\n\r\n                {popupSources && <ul className='new-transaction__popup-list'>\r\n\r\n                    {sources.map(({ title }, index) => (\r\n                        <li key={`${title}_${index}`} className='new-transaction__popup-item'>\r\n                            <button onClick={() => { selectSources(title) }} className='new-transaction__popup-btn'>{title}</button>\r\n                        </li>\r\n                    ))}\r\n\r\n                </ul>}\r\n            </div>\r\n\r\n            <div className='new-transaction__row'>\r\n                <h4 className='new-transaction__title'>Категория:</h4>\r\n\r\n                <div className='new-transaction__col'>\r\n                    <span className='new-transaction__value'>{category}</span>\r\n                    <button onClick={tooglePopupCategory} className='new-transaction__btn'>\r\n                        <img className='new-transaction__icon' src={chevronDownSvg} alt='' />\r\n                    </button>\r\n                </div>\r\n\r\n                {popupCategory && <ul className='new-transaction__popup-list'>\r\n\r\n                    {categories.map((item, index) => (\r\n                        <li key={`${item.title}_${index}`} className='new-transaction__popup-item'>\r\n                            <button onClick={() => { selectCategory(item.title) }} className='new-transaction__popup-btn'>{item.title}</button>\r\n                        </li>\r\n                    ))}\r\n                </ul>}\r\n            </div>\r\n\r\n\r\n            <div className='new-transaction__row  filter-btns'>\r\n                <button onClick={resetFilterListHandler} className='new-transaction__submit' type='button'>Очистить</button>\r\n                <button onClick={fetchFilterListHandler} className='new-transaction__submit' type='button'>Показать</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","//core\r\nimport React from 'react';\r\nimport classnames from 'classnames';\r\n\r\n//components\r\nimport Transaction from '../../components/TransactionsList/Transaction';\r\nimport { Filter } from '../../components/Flter/Flter';\r\n\r\n//hooks\r\nimport useAllTransactions from './useAllTransactions'\r\n\r\n//context\r\nimport { AuthContext } from '../../context/AuthContext'\r\n\r\n// styles\r\nimport './AllTransactionsPage.scss'\r\n\r\n\r\nconst AllTransactionsPage = () => {\r\n    const [isOpenFilterList, setIsOpenFilterList] = React.useState(false)\r\n    const [isNotFound, setIsNotFound] = React.useState(false)\r\n    const [filtres, setFiltres] = React.useState([])\r\n    const { data, isLoading, error } = useAllTransactions()\r\n    const { token } = React.useContext(AuthContext);\r\n\r\n    const fetchLinks = async (params) => {\r\n        try {\r\n\r\n            const entries = Object.entries(params).filter(([key, value]) => value !== '')\r\n            const newParams = Object.fromEntries(entries)\r\n\r\n            const paramsUrl = Object.keys(newParams).map((key) => `${encodeURIComponent(key)}=${encodeURIComponent(newParams[key])}`).join('&')\r\n\r\n            const response = await fetch('/api/transaction/category/?' + paramsUrl, { headers: { Authorization: `Bearer ${token}` } })\r\n\r\n            const data = await response.json()\r\n\r\n            if (data.length === 0) {\r\n                setIsNotFound(true)\r\n            } else {\r\n                setFiltres(data)\r\n            }\r\n\r\n        } catch (e) {\r\n            throw new Error(e)\r\n        }\r\n    }\r\n\r\n    if (isLoading) return <p className='load-statistics'>Загрузка...</p>\r\n    if (error) return 'Ошибка при получении всех транзакций'\r\n\r\n    return (\r\n        <div className='page  allTransactionsPage'>\r\n            <div className='container'>\r\n                <div className='page__inner'>\r\n                    <div className='all-transactions'>\r\n\r\n                        {!isOpenFilterList\r\n                            ?\r\n                            <ul className={classnames({ 'transactions__list': true, 'scroll': data.length > 5 })}>\r\n                                <Transaction transactions={data} />\r\n                            </ul>\r\n                            :\r\n                            <>\r\n                                {!isNotFound\r\n                                    ?\r\n                                    <div>\r\n                                        <ul className={classnames({ 'transactions__list': true, 'scroll': filtres.length > 5 })}>\r\n                                            <Transaction transactions={filtres} />\r\n                                        </ul>\r\n                                    </div>\r\n                                    :\r\n                                    <p>Ничего не найдено</p>\r\n                                }\r\n                            </>\r\n                        }\r\n                    </div>\r\n\r\n\r\n                    <div className='allTransactionsPage__filter-wrap'>\r\n                        <div className=\"title-wrap\">\r\n                            <h2>Фильтр</h2>\r\n                        </div>\r\n\r\n                        <Filter setIsOpenFilterList={setIsOpenFilterList} fetchLinks={fetchLinks} setIsNotFound={setIsNotFound} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AllTransactionsPage;","//core\r\nimport React from 'react';\r\nimport { useQuery } from 'react-query';\r\n\r\n//context\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\n\r\nexport default function useTransactionsCategory() {\r\n    const { token, logout } = React.useContext(AuthContext);\r\n\r\n    return useQuery('transactions-all', () =>\r\n\r\n        fetch('/api/transaction/all', { headers: { Authorization: `Bearer ${token}` } })\r\n            .then((res) => res.json())\r\n\r\n            .catch(e => {\r\n\r\n                if (e.response.status === 401) logout();\r\n\r\n                throw new Error(e)\r\n            })\r\n    )\r\n}\r\n","// core\r\nimport React from 'react';\r\nimport { useParams, useHistory } from 'react-router-dom';\r\n\r\n// images\r\nimport sourcesSvg from '../../images/money2.svg';\r\nimport ellipsisHorizontalSvg from '../../images/ellipsis-horizontal.svg'\r\n\r\n// context\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\n// hooks\r\nimport useSource from './useSource';\r\nimport useDeleteSource from '../../components/SourcesList/useDeleteSource';\r\nimport { useHttp } from '../../hooks/http.hook';\r\n\r\n\r\nconst DetailSourcePage = () => {\r\n    const auth = React.useContext(AuthContext)\r\n    const { request, } = useHttp();\r\n    const history = useHistory()\r\n    const sourceId = useParams().id\r\n\r\n    const { data, isLoading, error } = useSource(sourceId)\r\n    const [isPopup, seTisPopup] = React.useState(false)\r\n    const [editMode, setEditMode] = React.useState(false)\r\n    const [newTitleSource, setNewTitleSource] = React.useState('')\r\n\r\n    const [deleteSource] = useDeleteSource();\r\n\r\n    const deleteSourceHandler = async (sourceId) => {\r\n        deleteSource(sourceId)\r\n        history.push(`/home/`)\r\n    }\r\n\r\n    const tooglePopup = () => {\r\n        seTisPopup(!isPopup)\r\n    };\r\n\r\n    const toogleEditMode = () => {\r\n        setEditMode(!editMode)\r\n        seTisPopup(!isPopup)\r\n    }\r\n\r\n    const changeNewTitleSource = (e) => {\r\n        setNewTitleSource(e.target.value)\r\n    }\r\n\r\n    const saveSource = async (e) => {\r\n        e.preventDefault();\r\n\r\n        await request('/api/sources/edit', 'POST', { newTitleSource, sourceId }, {\r\n            Authorization: `Bearer ${auth.token}`\r\n        })\r\n        history.push(`/home/`)\r\n    }\r\n\r\n    if (isLoading) return <p className='load-statistics'>Загрузка...</p>\r\n    if (error) return 'Ошибка при получении счетов: ' + error.message\r\n\r\n    return (\r\n        <div className='page  detailSourcePage'>\r\n            <div className='container'>\r\n                <div className='page__inner'>\r\n                    <form className='sources-item' onSubmit={saveSource}>\r\n                        <img className='sources-item__icon' src={sourcesSvg} alt=\"\" />\r\n\r\n                        {!editMode\r\n                            ? <h4 className='sources-item__title'>{data.title}</h4>\r\n                            : <input onChange={(e) => { changeNewTitleSource(e) }}\r\n                                className='sources-item__input'\r\n                                type='text' placeholder={data.title}\r\n                                value={newTitleSource}\r\n                                required\r\n                            />\r\n                        }\r\n\r\n                        <div className='sources-item__total'>{data.total} руб</div>\r\n\r\n                        {!editMode\r\n                            ?\r\n                            <button onClick={tooglePopup} className='new-transaction__btn' type='button'>\r\n                                <img className='new-transaction__icon' src={ellipsisHorizontalSvg} alt='' />\r\n                            </button>\r\n                            :\r\n                            <button className='new-transaction__btn' type='submit'>\r\n                                ок\r\n                            </button>\r\n                        }\r\n\r\n                        {isPopup &&\r\n                            <ul className='new-transaction__popup-list'>\r\n                                <li className='new-transaction__popup-item'>\r\n                                    <button onClick={() => { deleteSourceHandler(sourceId) }} className='new-transaction__popup-btn' type='button'>Удалить</button>\r\n                                </li>\r\n\r\n                                <li className='new-transaction__popup-item'>\r\n                                    <button onClick={toogleEditMode} className='new-transaction__popup-btn'>Редактировать</button>\r\n                                </li>\r\n                            </ul>\r\n                        }\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DetailSourcePage;","// core\r\nimport React from 'react';\r\nimport { useQuery } from 'react-query';\r\n\r\n// context\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\nexport default function useSource(sourceId) {\r\n    const { token } = React.useContext(AuthContext);\r\n\r\n    return useQuery('source', () =>\r\n        fetch(`/api/sources/${sourceId}`, { headers: { Authorization: `Bearer ${token}` } })\r\n            .then((res) => res.json())\r\n\r\n            .catch(e => {\r\n                throw new Error(e)\r\n            })\r\n    )\r\n}","// core\r\nimport React from 'react';\r\nimport { useMutation } from 'react-query';\r\n\r\n// context\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\nexport default function useDeleteSource() {\r\n    const { token } = React.useContext(AuthContext);\r\n\r\n    return useMutation(\r\n        (sourceId) => fetch(`/api/sources/delete/${sourceId}`, { method: \"DELETE\", headers: { Authorization: `Bearer ${token}` } })\r\n            .then((res) => res.data)\r\n\r\n            .catch(e => {\r\n                throw new Error(e)\r\n            })\r\n    )\r\n}","// core\r\nimport React from 'react';\r\nimport { useParams, useHistory } from 'react-router-dom';\r\n\r\n// images\r\nimport ellipsisHorizontalSvg from '../../images/ellipsis-horizontal.svg'\r\nimport tagSvg from '../../images/tag.svg';\r\n\r\n// context\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\n// hooks\r\nimport useDeleteCategory from '../../components/Categories/useDeleteCategory';\r\nimport useCategory from '../CategoriesPage/useCategory';\r\nimport { useHttp } from '../../hooks/http.hook';\r\n\r\n\r\nconst DetailCategoriesPage = () => {\r\n    const auth = React.useContext(AuthContext)\r\n    const { request } = useHttp();\r\n    const history = useHistory()\r\n    const categoryId = useParams().id\r\n\r\n    const [isPopup, seTisPopup] = React.useState(false)\r\n    const { data, isLoading, error } = useCategory(categoryId)\r\n    const [editMode, setEditMode] = React.useState(false)\r\n    const [newTitleCategory, setNewTitleCategory] = React.useState('')\r\n\r\n    const [deleteCategory] = useDeleteCategory();\r\n\r\n    const deleteCategoryHandler = async (categoryId) => {\r\n        deleteCategory(categoryId)\r\n        history.push(`/categories/`)\r\n    }\r\n\r\n    const tooglePopup = () => {\r\n        seTisPopup(!isPopup)\r\n    };\r\n\r\n    const toogleEditMode = () => {\r\n        setEditMode(!editMode)\r\n        seTisPopup(!isPopup)\r\n    }\r\n\r\n    const changeNewTitleCategory = (e) => {\r\n        setNewTitleCategory(e.target.value)\r\n    }\r\n\r\n    const saveCategory = async (e) => {\r\n        e.preventDefault();\r\n\r\n        await request('/api/categories/edit', 'POST', { newTitleCategory, categoryId }, {\r\n            Authorization: `Bearer ${auth.token}`\r\n        })\r\n        history.push(`/categories/`)\r\n    }\r\n\r\n\r\n\r\n    if (isLoading) return <p className='load-statistics'>Загрузка...</p>\r\n    if (error) return 'Ошибка при получении счетов: ' + error.message\r\n\r\n\r\n    return (\r\n        <div className='page  detailCategoryPage'>\r\n            <div className='container'>\r\n                <div className='page__inner'>\r\n                    <form className='sources-item' onSubmit={saveCategory}>\r\n                        <img className='sources-item__icon' src={tagSvg} alt=\"\" />\r\n\r\n                        {!editMode\r\n                            ? <h4 className='sources-item__title'>{data.title}</h4>\r\n                            : <input onChange={(e) => { changeNewTitleCategory(e) }}\r\n                                className='sources-item__input'\r\n                                type='text'\r\n                                placeholder={data.title}\r\n                                value={newTitleCategory}\r\n                                required\r\n                            />\r\n                        }\r\n\r\n                        {!editMode\r\n                            ?\r\n                            <button onClick={tooglePopup} className='new-transaction__btn' type='button'>\r\n                                <img className='new-transaction__icon' src={ellipsisHorizontalSvg} alt='' />\r\n                            </button>\r\n                            :\r\n                            <button className='new-transaction__btn' type='submit'>\r\n                                ок\r\n                            </button>\r\n                        }\r\n\r\n                        {isPopup &&\r\n                            <ul className='new-transaction__popup-list'>\r\n                                <li className='new-transaction__popup-item'>\r\n                                    <button onClick={() => { deleteCategoryHandler(categoryId) }} className='new-transaction__popup-btn' type='button'>Удалить</button>\r\n                                </li>\r\n\r\n                                <li className='new-transaction__popup-item'>\r\n                                    <button onClick={toogleEditMode} className='new-transaction__popup-btn'>Редактировать</button>\r\n                                </li>\r\n                            </ul>\r\n                        }\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DetailCategoriesPage;","// core\r\nimport React from 'react'\r\nimport { useQuery } from 'react-query';\r\n\r\n// context\r\nimport { AuthContext } from '../../context/AuthContext'\r\n\r\nexport default function useCategory(categoryId) {\r\n    const { token } = React.useContext(AuthContext)\r\n\r\n    return useQuery('category', () =>\r\n        fetch(`/api/categories/${categoryId}`, { headers: { Authorization: `Bearer ${token}` } })\r\n            .then((res) => res.json())\r\n\r\n            .catch(e => {\r\n                throw new Error(e)\r\n            })\r\n    )\r\n}","// core\r\nimport React from 'react';\r\nimport { useMutation } from 'react-query';\r\n\r\n// context\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\nexport default function useDeleteCategory() {\r\n    const { token } = React.useContext(AuthContext);\r\n\r\n    return useMutation(\r\n        (categoryId) => fetch(`/api/categories/delete/${categoryId}`, { method: \"DELETE\", headers: { Authorization: `Bearer ${token}` } })\r\n            .then((res) => res.data)\r\n\r\n            .catch(e => {\r\n                throw new Error(e)\r\n            })\r\n\r\n    )\r\n}","//core\r\nimport React, { useContext } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\n//context\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\n//image\r\nimport logoSvg from '../../images/logo.svg';\r\n\r\n// styles\r\nimport './Header.scss'\r\n\r\n\r\nexport const Header = () => {\r\n    const history = useHistory()\r\n    const auth = useContext(AuthContext)\r\n\r\n    const logoutHandler = event => {\r\n        event.preventDefault()\r\n        auth.logout()\r\n        history.push('/')\r\n    }\r\n\r\n    return (\r\n        <header className=\"header\">\r\n            <div className='container'>\r\n                <div className='header__inner'>\r\n\r\n                    <div className=\"logo  header__logo\">\r\n                        <img className='logo__img' src={logoSvg} alt=\"logo\" />\r\n                        <h1 className=\"logo__text\">Finance</h1>\r\n                    </div>\r\n\r\n                    <div className='header__email'>{auth.email}</div>\r\n\r\n                    <div className=\"header__actions\">\r\n                        <div className=\"header__actions-item\">\r\n                            <a className='header__logout' href=\"/\" onClick={logoutHandler}>Выйти</a>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </header>\r\n    )\r\n}\r\n","// core\r\nimport React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\n// styles\r\nimport './Footer.scss'\r\n\r\n// images\r\nimport homeSvg from '../../images/home.svg'\r\nimport chartSvg from '../../images/chart.svg'\r\nimport categorySvg from '../../images/category.svg'\r\n\r\nconst Footer = () => {\r\n    return (\r\n        <div className='footer'>\r\n            <div className='container'>\r\n                <div className='footer__inner'>\r\n                    <div className='footer__btns'>\r\n                        <NavLink className='footer__btn' to=\"/home\">\r\n                            <img className='footer__btn-icon' src={homeSvg} alt=\"\" />\r\n                            <span className='footer__btn-title'>Главная</span>\r\n                        </NavLink>\r\n\r\n                        <NavLink className='footer__btn' to=\"/categories\">\r\n                            <img className='footer__btn-icon' src={categorySvg} alt=\"\" />\r\n                            <span className='footer__btn-title'>Категории</span>\r\n                        </NavLink>\r\n\r\n                        <NavLink className='footer__btn' to=\"/statistics\">\r\n                            <img className='footer__btn-icon' src={chartSvg} alt=\"\" />\r\n                            <span className='footer__btn-title'>Статистика</span>\r\n                        </NavLink>\r\n                    </div>\r\n\r\n                    {/* <NavLink className='footer__create-btn' to=\"/create\">+</NavLink> */}\r\n                    <NavLink className='footer__btn  footer__create-btn' to=\"/create\">+</NavLink>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Footer;","//core\r\nimport React from 'react';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\nimport { useRoutes } from './routes';\r\n\r\n//hooks\r\nimport { useAuth } from './hooks/auth.hook';\r\n\r\n//context\r\nimport { AuthContext } from './context/AuthContext';\r\n\r\n//components\r\nimport { Header } from './components/Header/Header';\r\nimport Footer from './components/Footer/Footer';\r\n\r\n//ReactQueryDevtools\r\n// import { ReactQueryDevtools } from 'react-query-devtools'\r\nimport { ReactQueryConfigProvider } from 'react-query';\r\nconst queryConfig = { queries: { refetchOnWindowFocus: false } };\r\n\r\n\r\nfunction App() {\r\n    const { token, login, logout, userId, email } = useAuth();\r\n    const isAuthenticated = !!token;\r\n    const routes = useRoutes(isAuthenticated);\r\n\r\n    return (\r\n        <ReactQueryConfigProvider config={queryConfig}>\r\n            <AuthContext.Provider value={{\r\n                token, login, logout, userId, isAuthenticated, email\r\n            }}>\r\n\r\n                <Router>\r\n                    {isAuthenticated && <Header />}\r\n\r\n                    <div className='app'>\r\n                        {/* <div className=\"container\">\r\n                            \r\n                        </div> */}\r\n                        {routes}\r\n                    </div>\r\n\r\n                    {isAuthenticated && <Footer />}\r\n                </Router>\r\n\r\n                {/* <ReactQueryDevtools initialIsOpen={false} /> */}\r\n            </AuthContext.Provider>\r\n        </ReactQueryConfigProvider>\r\n    )\r\n}\r\n\r\nexport default App;\r\n","import { useState, useCallback, useEffect } from 'react'\r\n\r\nconst storageName = 'userData'\r\n\r\nexport const useAuth = () => {\r\n  const [token, setToken] = useState(null)\r\n  const [ready, setReady] = useState(false)\r\n  const [userId, setUserId] = useState(null)\r\n\r\n  const [email, setEmail] = useState(null)\r\n\r\n\r\n  const login = useCallback((jwtToken, id, email) => {\r\n    setToken(jwtToken)\r\n    setUserId(id)\r\n    setEmail(email)\r\n\r\n    localStorage.setItem(storageName, JSON.stringify({\r\n      userId: id, token: jwtToken, email: email\r\n    }))\r\n  }, [])\r\n\r\n\r\n  const logout = useCallback(() => {\r\n    setToken(null)\r\n    setUserId(null)\r\n    localStorage.removeItem(storageName)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const data = JSON.parse(localStorage.getItem(storageName))\r\n\r\n    if (data && data.token) {\r\n      login(data.token, data.userId, data.email)\r\n    }\r\n\r\n    setReady(true)\r\n  }, [login])\r\n\r\n\r\n  return { login, logout, token, userId, ready, email }\r\n}\r\n","// core\r\nimport React from 'react'\r\nimport { Switch, Route, Redirect } from 'react-router-dom'\r\n\r\n// pages\r\nimport { HomePage } from './pages/HomePage/HomePage'\r\nimport { CreateTransactionPage } from './pages/CreateTransactionPage/CreateTransactionPage'\r\nimport AuthPage from './pages/AuthPage/AuthPage'\r\nimport CreateSource from './pages/CreateSource/CreateSource';\r\nimport CategoriesPage from './pages/CategoriesPage/CategoriesPage';\r\nimport CreateCategories from './pages/CreateCategories/CreateCategories';\r\nimport StatisticsPage from './pages/StatisticsPage/StatisticsPage';\r\nimport AllTransactionsPage from './pages/AllTransactionsPage/AllTransactionsPage';\r\nimport DetailSourcePage from './pages/DetailSourcePage/DetailSourcePage';\r\nimport DetailCategoriesPage from './pages/DetailCategoriesPage/DetailCategoriesPage';\r\n\r\n\r\nexport const useRoutes = isAuthenticated => {\r\n    if (isAuthenticated) {\r\n        return (\r\n            <Switch>\r\n                <Route path=\"/home\" exact>\r\n                    <HomePage />\r\n                </Route>\r\n\r\n                <Route path=\"/create\">\r\n                    <CreateTransactionPage />\r\n                </Route>\r\n\r\n                <Route path=\"/create-source\">\r\n                    <CreateSource />\r\n                </Route>\r\n\r\n                <Route path=\"/create-category\">\r\n                    <CreateCategories />\r\n                </Route>\r\n\r\n                <Route path=\"/statistics\">\r\n                    <StatisticsPage />\r\n                </Route>\r\n\r\n                <Route path=\"/transactions\">\r\n                    <AllTransactionsPage />\r\n                </Route>\r\n\r\n                <Route path=\"/categories\" exact>\r\n                    <CategoriesPage />\r\n                </Route>\r\n\r\n                <Route path=\"/sources/:id\">\r\n                    <DetailSourcePage />\r\n                </Route>\r\n\r\n                <Route path=\"/categories/:id\" exact>\r\n                    <DetailCategoriesPage />\r\n                </Route>\r\n\r\n                <Redirect to=\"/home\" />\r\n            </Switch>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Switch>\r\n            <Route path=\"/\" exact>\r\n                <AuthPage />\r\n            </Route>\r\n\r\n            <Redirect to=\"/\" />\r\n        </Switch>\r\n    )\r\n}\r\n","// core\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\n// styles\r\nimport '../src/styles/index.scss';\r\n\r\n// components\r\nimport App from './App';\r\n\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n"],"sourceRoot":""}