{"version":3,"sources":["images/chevron-down.svg","images/money2.svg","images/arrow-left.svg","images/tag.svg","images/ellipsis-horizontal.svg","images/arrow-big-right.svg","images/logo.svg","images/pen.svg","images/arrow-down.png","images/arrow-up.png","images/no-transactions.png","images/credit-card.png","images/home.svg","images/chart.svg","images/category.svg","components/TransactionsList/Transaction.jsx","context/AuthContext.js","components/TransactionsList/TransactionsList.jsx","components/TransactionsList/useTransactions.js","components/SourcesList/SourceItem.jsx","components/SourcesList/useSources.js","components/SourcesList/SourcesList.jsx","pages/HomePage/HomePage.js","hooks/http.hook.js","components/Categories/useCategories.js","pages/CreateTransactionPage/CreateTransactionPage.js","components/Form/Form.jsx","hooks/message.hook.js","pages/AuthPage/AuthPage.js","pages/CreateSource/CreateSource.js","components/Categories/CategoriesItem.jsx","components/Categories/CategoriesList.jsx","pages/CategoriesPage/CategoriesPage.js","pages/CreateCategories/CreateCategories.js","charts/StatisticsExpenses.js","charts/StatisticsRevenue.js","pages/StatisticsPage/StatisticsPage.js","pages/StatisticsPage/useStatisticsExpenses.js","pages/StatisticsPage/useStatisticsRevenue.js","components/Flter/Flter.jsx","pages/AllTransactionsPage/AllTransactionsPage.js","pages/AllTransactionsPage/useAllTransactions.js","pages/DetailSourcePage/DetailSourcePage.js","pages/DetailSourcePage/useSource.js","components/SourcesList/useDeleteSource.js","pages/DetailCategoriesPage/DetailCategoriesPage.js","pages/CategoriesPage/useCategory.js","components/Categories/useDeleteCategory.js","components/Header/Header.jsx","components/Footer/Footer.jsx","App.js","hooks/auth.hook.js","routes.js","index.js"],"names":["module","exports","Transaction","transactions","transactionsJsx","map","sum","comment","operation","category","source","date","_id","key","className","src","arrowDownSvg","alt","arrowUpSvg","noop","AuthContext","createContext","token","userId","login","logout","isAuthenticated","email","TransactionsList","React","useContext","useQuery","axios","get","headers","Authorization","then","res","data","catch","e","response","status","Error","useTransactions","isLoading","error","message","isEmpty","length","to","noListGPG","SourceItem","sources","sourcesJsx","title","total","sourcesSvg","arrowBigRightSvg","useSources","SourcesList","isScroll","noListJPG","classnames","HomePage","useHttp","useState","loading","setLoading","setError","request","useCallback","url","a","method","body","JSON","stringify","fetch","json","ok","clearError","useCategories","CreateTransactionPage","auth","history","useHistory","popupType","setPopupType","popupSources","setPopupSources","popupCategory","setPopupCategory","editDateModal","setEditDateModal","setOperation","setSource","setSum","setCategory","Date","toLocaleDateString","setDate","setComment","errorForm","setErrorForm","categories","errorCategories","sourcesLoading","errorSources","newTransaction","isEmptyFields","Object","entries","filter","createTransactionHandler","push","toogleEditDateModal","arrowLeftSvg","onClick","chevronDownSvg","name","index","selectPperations","exact","item","type","placeholder","value","onChange","event","target","penSvg","Form","activeForm","text","window","M","toast","html","username","password","form","setForm","useEffect","console","log","changeHandler","registerHandler","loginHandler","id","AuthPage","setActiveForm","activeTab","setActiveTab","logoSvg","tab","selectForm","CreateSource","newSource","setNewSource","addSourceHandler","preventDefault","onSubmit","required","CategoriesItem","categoriesJsx","tagSvg","CategoriesList","CategoriesPage","CreateCategories","setTitle","newCategory","addOperationHandler","selectOperations","ReactFC","fcRoot","FusionCharts","Column2D","FusionTheme","ChartComponent","chartConfigs","width","height","dataFormat","dataSource","chart","caption","xAxisName","yAxisName","theme","useplotgradientcolor","i","label","palettecolors","StatisticsPage","useStatisticsExpenses","useStatisticsRevenue","revenue","revenueIsLoading","errorrEvenue","isEmptyExpenses","isEmptyRevenue","StatisticsExpenses","StatisticsRevenue","Filter","setIsOpenFilterList","fetchLinks","setIsNotFound","query","reset","AllTransactionsPage","isOpenFilterList","isNotFound","filtres","setFiltres","useAllTransactions","params","newParams","fromEntries","paramsUrl","keys","encodeURIComponent","join","DetailSourcePage","sourceId","useParams","useSource","isPopup","seTisPopup","editMode","setEditMode","newTitleSource","setNewTitleSource","useMutation","delete","useDeleteSource","deleteSource","deleteSourceHandler","saveSource","changeNewTitleSource","ellipsisHorizontalSvg","DetailCategoriesPage","categoryId","useCategory","newTitleCategory","setNewTitleCategory","useDeleteCategory","deleteCategory","deleteCategoryHandler","saveCategory","changeNewTitleCategory","Header","href","Footer","homeSvg","categorySvg","chartSvg","queryConfig","queries","refetchOnWindowFocus","App","setToken","ready","setReady","setUserId","setEmail","jwtToken","localStorage","setItem","removeItem","parse","getItem","useAuth","routes","path","useRoutes","config","Provider","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8aa183c5.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/chevron-down.8ebe8b51.svg\";","module.exports = __webpack_public_path__ + \"static/media/money2.3879cb4e.svg\";","module.exports = __webpack_public_path__ + \"static/media/arrow-left.cc7b2b17.svg\";","module.exports = __webpack_public_path__ + \"static/media/tag.2b9ed8da.svg\";","module.exports = __webpack_public_path__ + \"static/media/ellipsis-horizontal.59c12fbf.svg\";","module.exports = __webpack_public_path__ + \"static/media/arrow-big-right.bc174e30.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo.64af5a29.svg\";","module.exports = __webpack_public_path__ + \"static/media/pen.104bf02c.svg\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAA80lEQVRIie2PMVKDUBRFz2Ns4gbEddjpZwXAOtQixGQfiWDjuA5lBZKtEPr0XotM1Ml85DNjYcHtYO47536Y8pdpM7fdZe59zM3ZmLLB9bhJEI09mAST4B8J2vzqPBTyW9craDO3Ms32XZrMh+BdmsxNs32bJ8tggZkiIJKp6nJX9MJzV8hUAZF9yMvy/oxft2tBBZhE2WVucdpp85tbifKwh5e4bjbesX3rBLbL3KPBApDBUlACyHRnsucj/KJu7g00SvBDUhoUh8+vvgATPF2+NQ998EGB5yXfhwPLgwU+SSg8WHCUdKlbAcR1swmBTwnKJ5DyXi9v2yReAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAA+UlEQVRIie2VMW7CQBBF36A0HAEnJaegBJ8hFyDIojEROQcSokFINgfIGdhUUU4S2UegMpMCHAys1xuR0q8cj/+b1Y5saGlAvDtVJfhI3wCy4XiBiPq89uAdbrZLIAbombSfq059JM0n+A3X+KIMm3w0bpR0/hBeDVKBKDDbJarOIesFN+H6Wpl+eqrFPZOuXRK7wBKehZNV+TgPXzalRCBySayC47bYw6uS06lUIHo0ydxbIAcKoEBlZgsvycLJCpUZUBykU9T1WXn6eu9e14JdosEuudkaW29J7SV/D573vsO4et1r+g+0glZwP37/gzOfXH5VW+7nB9VcdJV0C2p0AAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/no-transactions.34ffe3db.png\";","module.exports = __webpack_public_path__ + \"static/media/credit-card.d9618088.png\";","module.exports = __webpack_public_path__ + \"static/media/home.8f23844b.svg\";","module.exports = __webpack_public_path__ + \"static/media/chart.7539fa18.svg\";","module.exports = __webpack_public_path__ + \"static/media/category.57663764.svg\";","//core\r\nimport React from 'react';\r\n\r\n//images\r\nimport arrowDownSvg from '../../images/arrow-down.png';\r\nimport arrowUpSvg from '../../images/arrow-up.png';\r\n\r\n// styles\r\nimport './Transaction.scss'\r\n\r\n\r\nconst Transaction = ({ transactions = [] }) => {\r\n    const transactionsJsx = transactions.map(({ sum, comment, operation, category, source, date, _id }) => (\r\n        <li key={_id} className='transaction-item'>\r\n            <div className='transaction-item__arrow-wrap'>\r\n                {operation === 'расходы' ?\r\n                    <img className='transaction-item__arrow' src={arrowDownSvg} alt=\"\" />\r\n                    :\r\n                    <img className='transaction-item__arrow' src={arrowUpSvg} alt=\"\" />\r\n                }\r\n            </div>\r\n\r\n            <div className='transaction-item__col'>\r\n                <p className='transaction-item__date'>{date}</p>\r\n                <p className='transaction-item__title'>{comment}</p>\r\n            </div>\r\n            <div className='transaction-item__col'>\r\n                {operation === 'расходы' ?\r\n                    <p className='transaction-item__price'>-{sum}</p>\r\n                    :\r\n                    <p className='transaction-item__price  green'>+{sum}</p>\r\n                }\r\n\r\n                <p className='transaction-item__category'>#{category}</p>\r\n                <p className='transaction-item__sources'>{source}</p>\r\n            </div>\r\n        </li>\r\n    ))\r\n\r\n    return (\r\n        <>\r\n            {transactionsJsx}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Transaction;","import { createContext } from 'react'\r\n\r\nfunction noop() { }\r\n\r\nexport const AuthContext = createContext({\r\n  token: null,\r\n  userId: null,\r\n  login: noop,\r\n  logout: noop,\r\n  isAuthenticated: false,\r\n  email: null\r\n})\r\n","// core\r\nimport React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\n// components\r\nimport Transaction from './Transaction';\r\n\r\n// hooks\r\nimport useTransactions from './useTransactions'\r\n\r\n// images\r\nimport noListGPG from '../../images/no-transactions.png';\r\n\r\n// styles\r\nimport './TransactionsList.scss'\r\n\r\n\r\nconst TransactionsList = () => {\r\n    const { data, isLoading, error } = useTransactions()\r\n\r\n    if (isLoading) return 'Loading...'\r\n    if (error) return 'Ошибка при получении транзакций: ' + error.message\r\n\r\n    const isEmpty = data.length === 0\r\n\r\n    return (\r\n        <div className='transactions'>\r\n            <div className='title-wrap'>\r\n                <h2>Последние транзакции</h2>\r\n                <NavLink className='btn-add' to=\"/create\">+</NavLink>\r\n            </div>\r\n\r\n            {!isEmpty ?\r\n                <>\r\n                    <ul className='transactions__list'>\r\n                        <Transaction transactions={data} />\r\n                    </ul>\r\n\r\n                    <div className=\"form__row\">\r\n                        <div className=\"form__item\">\r\n                            <NavLink className='button medium secondary' to=\"/transactions\">Все транзакци</NavLink>\r\n                        </div>\r\n                    </div>\r\n                </>\r\n                :\r\n                <>\r\n                    <p>Вы не провели ещё ни одной транзакции</p>\r\n                    <img className='no-list' src={noListGPG} alt=\"\" />\r\n                </>\r\n            }\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default TransactionsList;\r\n\r\n\r\n","//core\r\nimport React from 'react';\r\nimport { useQuery } from 'react-query';\r\nimport axios from 'axios';\r\n\r\n//context\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\n\r\nexport default function useTransactions() {\r\n    const { token, logout } = React.useContext(AuthContext)\r\n\r\n    return useQuery('transactions', () =>\r\n        axios.get('/api/transaction', { headers: { Authorization: `Bearer ${token}` } })\r\n            .then((res) => res.data)\r\n\r\n            .catch(e => {\r\n\r\n                if (e.response.status === 401) logout();\r\n\r\n                throw new Error(e)\r\n            })\r\n    )\r\n}\r\n\r\n","// core\r\nimport React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\n// hooks\r\nimport useDeleteSource from './useDeleteSource';\r\n\r\n// images\r\nimport sourcesSvg from '../../images/money2.svg';\r\nimport arrowBigRightSvg from '../../images/arrow-big-right.svg'\r\n\r\n\r\nconst SourceItem = ({ sources = [] }) => {\r\n\r\n    const sourcesJsx = sources && sources.map(({ title, total, _id }) => (\r\n        <li key={_id} className='sources-item'>\r\n            <img className='sources-item__icon' src={sourcesSvg} alt=\"\" />\r\n\r\n            <p className='sources-item__title'>{title}</p>\r\n\r\n            <div className='sources-item__total'>{total} руб</div>\r\n\r\n            <NavLink to={`/sources/${_id}`} className='new-transaction__btn'>\r\n                <img className='new-transaction__icon' src={arrowBigRightSvg} alt='' />\r\n            </NavLink>\r\n        </li>\r\n    ))\r\n\r\n\r\n    if (!sources) {\r\n        return (\r\n            <p>ничего нет</p>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {sourcesJsx}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default SourceItem;","//core\r\nimport React from 'react';\r\nimport { useQuery } from 'react-query'\r\nimport axios from 'axios'\r\nimport { queryCache } from 'react-query'\r\n\r\n\r\n//context\r\nimport { AuthContext } from '../../context/AuthContext'\r\n\r\n\r\nexport default function useSources() {\r\n    const { token } = React.useContext(AuthContext)\r\n\r\n    return useQuery('sources', () =>\r\n        axios.get('/api/sources', { headers: { Authorization: `Bearer ${token}` } }).then((res) => res.data)\r\n\r\n            .catch(e => {\r\n                throw new Error(e)\r\n            })\r\n    )\r\n}\r\n","// core\r\nimport React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport classnames from 'classnames';\r\n\r\n// components\r\nimport SourceItem from './SourceItem';\r\n\r\n// hooks\r\nimport useSources from './useSources'\r\n\r\n// images\r\nimport noListJPG from '../../images/credit-card.png'\r\n\r\n// styles\r\nimport './SourcesList.scss'\r\n\r\nconst SourcesList = () => {\r\n    const { data, isLoading, error } = useSources()\r\n\r\n    if (isLoading) return <p className='load-statistics'>Загрузка...</p>\r\n    if (error) return 'Ошибка при получении счетов'\r\n\r\n    const isScroll = data.length > 5\r\n    const isEmpty = data.length === 0\r\n\r\n    return (\r\n        <div className='sources'>\r\n            <div className='title-wrap'>\r\n                <h2>Ваши счета</h2>\r\n                <NavLink className='btn-add' to=\"/create-source\">+</NavLink>\r\n            </div>\r\n\r\n            {!isEmpty ?\r\n                <ul className={classnames({ ['sources__list']: true, ['scroll']: isScroll })}>\r\n                    <SourceItem sources={data} />\r\n                </ul>\r\n                :\r\n                <>\r\n                    <p>Вы не создали ещё ни одного счёта</p>\r\n                    <img className='no-list' src={noListJPG} alt=\"\" />\r\n                </>\r\n            }\r\n        </div >\r\n    );\r\n};\r\n\r\nexport default SourcesList;\r\n","//core\r\nimport React from 'react';\r\n\r\n//components\r\nimport TransactionsList from '../../components/TransactionsList/TransactionsList';\r\nimport SourcesList from '../../components/SourcesList/SourcesList';\r\n\r\n\r\nexport const HomePage = () => {\r\n    return (\r\n        <div className='page  home-page'>\r\n            <div className='container'>\r\n                <div className='page__inner'>\r\n                    <TransactionsList />\r\n                    <SourcesList />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import { useState, useCallback } from 'react'\r\n\r\nexport const useHttp = () => {\r\n  const [loading, setLoading] = useState(false)\r\n  const [error, setError] = useState(null)\r\n\r\n  const request = useCallback(async (url, method = 'GET', body = null, headers = {}) => {\r\n    setLoading(true)\r\n    try {\r\n      if (body) {\r\n        body = JSON.stringify(body)\r\n        headers['Content-Type'] = 'application/json'\r\n      }\r\n\r\n      const response = await fetch(url, { method, body, headers })\r\n      const data = await response.json()\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.message || 'Что-то пошло не так')\r\n      }\r\n\r\n      setLoading(false)\r\n      return data\r\n\r\n    } catch (e) {\r\n      setLoading(false)\r\n      setError(e.message)\r\n      throw e\r\n    }\r\n  }, [])\r\n\r\n  const clearError = useCallback(() => setError(null), [])\r\n\r\n  return { loading, request, error, clearError }\r\n}\r\n","//core\r\nimport React from 'react';\r\nimport { useQuery } from 'react-query';\r\nimport axios from 'axios';\r\n\r\n//context\r\nimport { AuthContext } from '../../context/AuthContext'\r\n\r\n\r\nexport default function useCategories() {\r\n    const { token } = React.useContext(AuthContext)\r\n\r\n    return useQuery('categories', () =>\r\n        axios.get('/api/categories', { headers: { Authorization: `Bearer ${token}` } })\r\n            .then((res) => res.data)\r\n\r\n            .catch(e => {\r\n                throw new Error(e)\r\n            })\r\n    )\r\n}\r\n\r\n","//core\r\nimport React, { useContext, useState } from 'react';\r\nimport { NavLink, useHistory } from 'react-router-dom';\r\n\r\n//hooks\r\nimport { useHttp } from '../../hooks/http.hook';\r\n\r\n//context\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\n//components\r\nimport useCategories from '../../components/Categories/useCategories';\r\nimport useSources from '../../components/SourcesList/useSources';\r\n\r\n//images\r\nimport chevronDownSvg from '../../images/chevron-down.svg';\r\nimport penSvg from '../../images/pen.svg';\r\nimport arrowLeftSvg from '../../images/arrow-left.svg';\r\n\r\n// styles \r\nimport './CreateTransactionPage.scss'\r\n\r\n\r\nexport const CreateTransactionPage = () => {\r\n    const auth = useContext(AuthContext)\r\n    const { request, error } = useHttp()\r\n    const history = useHistory()\r\n\r\n    const [popupType, setPopupType] = useState(false);\r\n    const [popupSources, setPopupSources] = useState(false);\r\n    const [popupCategory, setPopupCategory] = useState(false);\r\n    const [editDateModal, setEditDateModal] = useState(false);\r\n\r\n    const [operation, setOperation] = useState('');\r\n    const [source, setSource] = useState('');\r\n    const [sum, setSum] = useState('');\r\n    const [category, setCategory] = useState('');\r\n    const [date, setDate] = useState(new Date().toLocaleDateString());\r\n    const [comment, setComment] = useState('');\r\n    const [errorForm, setErrorForm] = useState(false);\r\n\r\n    const { data: categories, isLoading, error: errorCategories } = useCategories();\r\n    const { data: sources, isLoading: sourcesLoading, error: errorSources } = useSources();\r\n\r\n    const operations = ['расходы', 'доходы', 'перевод между счетами'];\r\n\r\n    const newTransaction = {\r\n        operation,\r\n        source,\r\n        sum,\r\n        category,\r\n        date,\r\n        comment,\r\n    }\r\n\r\n    const isEmptyFields = Object.entries(newTransaction).filter(([key, value]) => value === '')\r\n\r\n    const createTransactionHandler = async () => {\r\n        if (isEmptyFields.length > 0) {\r\n            return setErrorForm(true)\r\n        }\r\n\r\n        const data = await request('/api/transaction/add', 'POST', { ...newTransaction }, {\r\n            Authorization: `Bearer ${auth.token}`\r\n        })\r\n\r\n\r\n        const data2 = await request('/api/sources/edit-total', 'POST', { ...newTransaction }, {\r\n            Authorization: `Bearer ${auth.token}`\r\n        })\r\n\r\n        history.push(`/home/`)\r\n    }\r\n\r\n    const tooglePopupType = () => {\r\n        setPopupType(!popupType)\r\n    }\r\n\r\n    const tooglePopupSources = () => {\r\n        setPopupSources(!popupSources)\r\n    }\r\n\r\n    const tooglePopupCategory = () => {\r\n        setPopupCategory(!popupCategory)\r\n    }\r\n\r\n    const selectPperations = (name) => {\r\n        setOperation(name)\r\n        setPopupType(!popupType)\r\n        setErrorForm(false)\r\n    }\r\n\r\n    const selectSources = (name) => {\r\n        setSource(name)\r\n        setPopupSources(!popupSources)\r\n        setErrorForm(false)\r\n    }\r\n\r\n    const selectCategory = (title) => {\r\n        setCategory(title)\r\n        setPopupCategory(!popupCategory)\r\n        setErrorForm(false)\r\n    }\r\n\r\n    const sumChangeHadler = (event) => {\r\n        setSum(event.target.value)\r\n    }\r\n\r\n    const commentChangeHadler = (event) => {\r\n        setComment(event.target.value)\r\n    }\r\n\r\n    const toogleEditDateModal = () => {\r\n        setEditDateModal(!editDateModal)\r\n    }\r\n\r\n    const changeDateHandler = event => {\r\n        setDate(event.target.value);\r\n    }\r\n\r\n    if (isLoading) return 'Loading...'\r\n    if (sourcesLoading) return 'Loading...'\r\n\r\n    if (errorCategories) return 'Ошибка при получении счетов'\r\n    if (errorSources) return 'Ошибка при получении счетов'\r\n\r\n\r\n    return (\r\n        <div className='page  createPage'>\r\n\r\n            <div className='container'>\r\n                <div className='title-wrap'>\r\n                    <h2>Новая транзакция</h2>\r\n                    <NavLink className='btn-add' to=\"/home\">\r\n                        <img className='btn-add__icon' src={arrowLeftSvg} alt=\"\" />\r\n                    </NavLink>\r\n                </div>\r\n\r\n                {errorForm && <p className='error'>Заполните все поля</p>}\r\n\r\n                <div className='new-transaction'>\r\n                    <div className='new-transaction__row'>\r\n                        <h4 className='new-transaction__title'>Тип операции:</h4>\r\n\r\n                        <div className='new-transaction__col'>\r\n                            <span className='new-transaction__value'>{operation}</span>\r\n\r\n                            <button onClick={tooglePopupType} className='new-transaction__btn'>\r\n                                <img className='new-transaction__icon' src={chevronDownSvg} alt='' />\r\n                            </button>\r\n                        </div>\r\n\r\n                        {popupType && <ul className='new-transaction__popup-list'>\r\n\r\n                            {operations.map((name, index) => (\r\n                                <li key={`${name}_${index}`} className='new-transaction__popup-item'>\r\n                                    <button onClick={() => { selectPperations(name) }} className='new-transaction__popup-btn'>{name}</button>\r\n                                </li>\r\n                            ))}\r\n\r\n                        </ul>}\r\n                    </div>\r\n\r\n                    <div className='new-transaction__row'>\r\n                        <h4 className='new-transaction__title'>Счёт:</h4>\r\n\r\n                        <div className='new-transaction__col'>\r\n                            <span className='new-transaction__value'>{source}</span>\r\n\r\n                            <button onClick={tooglePopupSources} className='new-transaction__btn'>\r\n                                <img className='new-transaction__icon' src={chevronDownSvg} alt='' />\r\n                            </button>\r\n                        </div>\r\n\r\n                        {popupSources &&\r\n                            <ul className='new-transaction__popup-list'>\r\n                                {sources.length === 0\r\n                                    ? <li className='new-transaction__popup-item'>\r\n                                        <NavLink to='create-source' exact className='new-transaction__popup-btn'>Создать</NavLink>\r\n                                    </li>\r\n\r\n                                    : sources.map(({ title }, index) => (\r\n                                        <li key={`${title}_${index}`} className='new-transaction__popup-item'>\r\n                                            <button onClick={() => { selectSources(title) }} className='new-transaction__popup-btn'>{title}</button>\r\n                                        </li>\r\n                                    ))}\r\n                            </ul>\r\n                        }\r\n                    </div>\r\n\r\n                    <div className='new-transaction__row'>\r\n                        <h4 className='new-transaction__title'>Категория:</h4>\r\n\r\n                        <div className='new-transaction__col'>\r\n                            <span className='new-transaction__value'>{category}</span>\r\n                            <button onClick={tooglePopupCategory} className='new-transaction__btn'>\r\n                                <img className='new-transaction__icon' src={chevronDownSvg} alt='' />\r\n                            </button>\r\n                        </div>\r\n\r\n                        {popupCategory &&\r\n                            <ul className='new-transaction__popup-list'>\r\n                                {categories.length === 0\r\n                                    ? <li className='new-transaction__popup-item'>\r\n                                        <NavLink to='create-category' exact className='new-transaction__popup-btn'>Создать</NavLink>\r\n                                    </li>\r\n\r\n                                    : categories.map((item, index) => (\r\n                                        <li key={`${item.title}_${index}`} className='new-transaction__popup-item'>\r\n                                            <button onClick={() => { selectCategory(item.title) }} className='new-transaction__popup-btn'>{item.title}</button>\r\n                                        </li>\r\n                                    ))}\r\n                            </ul>\r\n                        }\r\n                    </div>\r\n\r\n\r\n                    <div className='new-transaction__row'>\r\n                        <h4 className='new-transaction__title'>Дата:</h4>\r\n                        <div className='new-transaction__col'>\r\n\r\n                            {!editDateModal\r\n                                ? <span className='new-transaction__value'>{date} </span>\r\n                                : <input type='text' placeholder={date} value={date} onChange={changeDateHandler} />\r\n                            }\r\n\r\n                            {!editDateModal\r\n                                ?\r\n                                <button onClick={toogleEditDateModal} className='new-transaction__btn'>\r\n                                    <img className='new-transaction__icon' src={penSvg} alt='' />\r\n                                </button>\r\n                                :\r\n                                <button onClick={toogleEditDateModal} className='new-transaction__btn'>\r\n                                    ok\r\n                            </button>\r\n                            }\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    <div className='new-transaction__row'>\r\n                        <h4 className='new-transaction__title'>Комментарий</h4>\r\n                        <textarea onChange={commentChangeHadler} placeholder='Описание' value={comment} />\r\n                    </div>\r\n\r\n\r\n                    <div className='new-transaction__row'>\r\n                        <h4 className='new-transaction__title'>Сумма:</h4>\r\n                        <div className='new-transaction__col'>\r\n                            <input onChange={sumChangeHadler} type='number' placeholder='сумма' value={sum} />\r\n                            <button onClick={createTransactionHandler} className='new-transaction__submit' type='button'>Подтвердить</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}\r\n","//core\r\nimport React, { useContext, useEffect, useState } from 'react';\r\n\r\n//hooks\r\nimport { useHttp } from '../../hooks/http.hook';\r\nimport { useMessage } from '../../hooks/message.hook';\r\n\r\n//context\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\n// styles\r\nimport './Form.scss'\r\n\r\n\r\nconst Form = ({ activeForm }) => {\r\n    const auth = useContext(AuthContext);\r\n    const message = useMessage();\r\n    const { loading, request, error, clearError } = useHttp();\r\n\r\n    const [form, setForm] = useState({\r\n        email: '', username: '', password: ''\r\n    })\r\n\r\n    useEffect(() => {\r\n        message(error);\r\n        console.log(error);\r\n        clearError();\r\n    }, [error, message, clearError])\r\n\r\n\r\n    const changeHandler = event => {\r\n        setForm({ ...form, [event.target.name]: event.target.value });\r\n    }\r\n\r\n    const registerHandler = async () => {\r\n        try {\r\n            const data = await request('/api/auth/register', 'POST', { ...form });\r\n            message(data.message);\r\n            console.log(data.message);\r\n        } catch (e) { }\r\n    }\r\n\r\n    const loginHandler = async () => {\r\n        try {\r\n            const data = await request('/api/auth/login', 'POST', { ...form });\r\n            auth.login(data.token, data.userId, data.email);\r\n        } catch (e) { }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {activeForm === 'loginForm' && (\r\n                <div className=\"form-box\">\r\n                    <h2 className=\"form-box__title\">Вход в аккаунт</h2>\r\n\r\n                    <div className=\"form\">\r\n                        <div className=\"form__row\">\r\n                            <div className=\"form__item\">\r\n                                <div className=\"form__input\">\r\n                                    <input type=\"text\" id=\"login-username\" name=\"email\" placeholder='Email' onChange={changeHandler} />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"form__row\">\r\n                            <div className=\"form__item\">\r\n                                <div className=\"form__input\">\r\n                                    <input type=\"password\" id=\"login-password\" name=\"password\" placeholder='Password' onChange={changeHandler} />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"form__row\">\r\n                            <div className=\"form__item\">\r\n                                <button onClick={loginHandler} className=\"button medium secondary\">Войти в аккаунт</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n\r\n            {activeForm === 'registerForm' && (\r\n                <div className=\"form-box\">\r\n                    <h2 className=\"form-box__title\">Регистрация</h2>\r\n\r\n                    <div className=\"form\">\r\n                        <div className=\"form__row\">\r\n                            <div className=\"form__item\">\r\n                                <div className=\"form__input\">\r\n                                    <input type=\"text\" id=\"login-username\" name=\"email\" placeholder='Email' onChange={changeHandler} />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"form__row\">\r\n                            <div className=\"form__item\">\r\n                                <div className=\"form__input\">\r\n                                    <input type=\"text\" id=\"register-username\" name=\"username\" placeholder='Ваше имя' onChange={changeHandler} />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"form__row\">\r\n                            <div className=\"form__item\">\r\n                                <div className=\"form__input\">\r\n                                    <input type=\"password\" id=\"login-password\" name=\"password\" placeholder='Password' onChange={changeHandler} />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"form__row\">\r\n                            <div className=\"form__item\">\r\n                                <button onClick={registerHandler} className=\"button medium secondary\">Зарегестрироваться</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Form;","import {useCallback} from 'react'\r\n\r\nexport const useMessage = () => {\r\n  return useCallback(text => {\r\n    if (window.M && text) {\r\n      window.M.toast({ html: text })\r\n    }\r\n  }, [])\r\n}\r\n","//core\r\nimport React, { useState } from 'react';\r\n\r\n//components\r\nimport Form from '../../components/Form/Form';\r\n\r\n//images\r\nimport logoSvg from '../../images/logo.svg';\r\n\r\n// styles\r\nimport './AuthPage.scss'\r\n\r\n\r\nconst AuthPage = () => {\r\n    const [activeForm, setActiveForm] = useState('loginForm');\r\n    const [activeTab, setActiveTab] = useState(0);\r\n\r\n    const tabs = [\r\n        { name: 'Login' },\r\n        { name: 'Register' }\r\n    ]\r\n\r\n    const selectForm = (name, index) => {\r\n        if (name === 'Login') {\r\n            setActiveForm('loginForm')\r\n            setActiveTab(index)\r\n        }\r\n\r\n        else if (name === 'Register') {\r\n            setActiveForm('registerForm');\r\n            setActiveTab(index)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"auth\">\r\n            <div className='container'>\r\n                <div className='auth__inner'>\r\n                    <div className='auth__decoration'></div>\r\n\r\n                    <div className=\"auth__content\">\r\n                        <div className=\"logo  auth__logo\">\r\n                            <img className='logo__img' src={logoSvg} alt=\"logo\" />\r\n                        </div>\r\n\r\n                        <h2 className=\"auth__subtitle\">Welcome to</h2>\r\n                        <h1 className=\"auth__title\">Finance</h1>\r\n\r\n                        <p className=\"auth__text\">\r\n                            Данное приложение поможет вам вести учёт расходов и доходов\r\n                        </p>\r\n\r\n                        <div className=\"auth__tabs\">\r\n                            {\r\n                                tabs.map((tab, index) => (\r\n                                    <p key={tab.name}\r\n                                        className={activeTab === index ? 'auth__tab active' : 'auth__tab'}\r\n                                        onClick={() => { selectForm(tab.name, index) }}\r\n                                    >\r\n                                        {tab.name}\r\n                                    </p>\r\n                                ))\r\n                            }\r\n                        </div>\r\n                    </div>\r\n\r\n                    <Form activeForm={activeForm} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AuthPage\r\n","//core\r\nimport React from 'react';\r\nimport { NavLink, useHistory } from 'react-router-dom';\r\n\r\n//hooks\r\nimport { useHttp } from '../../hooks/http.hook';\r\n\r\n//context\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\n//images\r\nimport sourcesSvg from '../../images/money2.svg';\r\nimport arrowLeftSvg from '../../images/arrow-left.svg';\r\n\r\n// styles\r\nimport './CreateSource.scss'\r\n\r\n\r\nconst CreateSource = () => {\r\n    const history = useHistory()\r\n\r\n    const auth = React.useContext(AuthContext);\r\n    const { request, } = useHttp();\r\n\r\n    const [newSource, setNewSource] = React.useState({\r\n        title: '', total: 0\r\n    })\r\n\r\n    const changeHandler = event => {\r\n        setNewSource({ ...newSource, [event.target.name]: event.target.value });\r\n    }\r\n\r\n    const addSourceHandler = async (e) => {\r\n        e.preventDefault();\r\n\r\n        const data = await request('/api/sources/add', 'POST', { ...newSource }, {\r\n            Authorization: `Bearer ${auth.token}`\r\n        })\r\n        history.push(`/home/`)\r\n    }\r\n\r\n    return (\r\n        <div className='page  create-sources'>\r\n            <div className='container'>\r\n                <div className='title-wrap'>\r\n                    <h2>Новый счет</h2>\r\n                    <NavLink className='btn-add' to=\"/home\">\r\n                        <img className='btn-add__icon' src={arrowLeftSvg} alt=\"\" />\r\n                    </NavLink>\r\n                </div>\r\n\r\n                <img className='page__icon' src={sourcesSvg} alt=\"\" />\r\n\r\n                <div className='new-transaction'>\r\n                    <div className='new-transaction__row'>\r\n                        <form onSubmit={addSourceHandler} className='new-transaction__col'>\r\n                            <input onChange={changeHandler} type='text' placeholder='Название счёта' name='title' required />\r\n                            <input onChange={changeHandler} type='number' placeholder='Стартовая сумма на счету' name='total' required />\r\n                            <button type='submit' className='new-transaction__submit'>Подтвердить</button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CreateSource;","//core\r\nimport React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\n//images\r\nimport ellipsisHorizontalSvg from '../../images/ellipsis-horizontal.svg';\r\nimport tagSvg from '../../images/tag.svg';\r\nimport arrowBigRightSvg from '../../images/arrow-big-right.svg'\r\n\r\n\r\nconst CategoriesItem = ({ categories = [] }) => {\r\n    const categoriesJsx = categories.map(({ title, _id }) => (\r\n        <li key={_id} className='sources-item'>\r\n            <img className='sources-item__icon' src={tagSvg} alt=\"\" />\r\n\r\n            <h4 className='sources-item__title'>{title}</h4>\r\n\r\n            <NavLink to={`/categories/${_id}`} className='new-transaction__btn'>\r\n                <img className='new-transaction__icon' src={arrowBigRightSvg} alt='' />\r\n            </NavLink>\r\n        </li>\r\n    ))\r\n\r\n    return (\r\n        <>\r\n            {categoriesJsx}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default CategoriesItem;","//core\r\nimport React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport classnames from 'classnames';\r\n\r\n//hooks\r\nimport useCategories from './useCategories';\r\n\r\n//components\r\nimport CategoriesItem from './CategoriesItem';\r\n\r\n\r\nconst CategoriesList = () => {\r\n    const { data, isLoading, error } = useCategories()\r\n\r\n    if (isLoading) return <p className='load-statistics'>Загрузка...</p>\r\n    if (error) return 'Ошибка при получении счетов: ' + error.message\r\n\r\n    const isScroll = data.length > 5\r\n    const isEmpty = data.length === 0\r\n\r\n    return (\r\n        <div className='sources'>\r\n            <div className='title-wrap'>\r\n                <h2 className='transaction__title'>Ваши категории</h2>\r\n                <NavLink className='btn-add' to=\"/create-category\">+</NavLink>\r\n            </div>\r\n\r\n            {!isEmpty ?\r\n                <ul className={classnames({ ['sources__list']: true, ['scroll']: isScroll })}>\r\n                    <CategoriesItem categories={data} />\r\n                </ul>\r\n                :\r\n                <p>Вы ещё не создали ни одной категории</p>\r\n            }\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CategoriesList;","//core\r\nimport React from 'react';\r\n\r\n//components\r\nimport CategoriesList from '../../components/Categories/CategoriesList';\r\n\r\nconst CategoriesPage = () => {\r\n    return (\r\n        <div className='page  categoriesPage'>\r\n            <div className='container'>\r\n                <div className='page__inner'>\r\n                    <CategoriesList />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CategoriesPage;","// core\r\nimport React, { useState } from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { useHistory } from 'react-router-dom'\r\n\r\n// hooks\r\nimport { useHttp } from '../../hooks/http.hook';\r\n\r\n// context\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\n// images\r\nimport tagSvg from '../../images/tag.svg';\r\nimport chevronDownSvg from '../../images/chevron-down.svg';\r\nimport arrowLeftSvg from '../../images/arrow-left.svg';\r\n\r\n\r\nconst CreateCategories = () => {\r\n    const history = useHistory()\r\n    const auth = React.useContext(AuthContext);\r\n    const { loading, request } = useHttp();\r\n\r\n    const [popupType, setPopupType] = useState(false);\r\n    const [operation, setOperation] = useState('');\r\n    const [title, setTitle] = useState('');\r\n    const [error, setError] = useState(false);\r\n\r\n    const newCategory = {\r\n        title,\r\n        operation\r\n    }\r\n\r\n    const changeHandler = event => {\r\n        setTitle(event.target.value);\r\n    }\r\n\r\n    const addOperationHandler = async (e) => {\r\n        e.preventDefault();\r\n\r\n        if (operation === '') {\r\n            return setError(true)\r\n        }\r\n\r\n        const data = await request('/api/categories/add', 'POST', { ...newCategory }, {\r\n            Authorization: `Bearer ${auth.token}`\r\n        })\r\n        history.push(`/categories/`)\r\n    }\r\n\r\n    const operations = ['расходы', 'доходы'];\r\n\r\n    const tooglePopupType = () => {\r\n        setPopupType(!popupType)\r\n    }\r\n\r\n    const selectOperations = (name) => {\r\n        setOperation(name)\r\n        setPopupType(!popupType)\r\n    }\r\n\r\n    return (\r\n        <div className='page  create-sources'>\r\n\r\n            <div className='container'>\r\n                <div className='title-wrap'>\r\n                    <h2>Новая категория</h2>\r\n                    <NavLink className='btn-add' to=\"/categories\">\r\n                        <img className='btn-add__icon' src={arrowLeftSvg} alt=\"\" />\r\n                    </NavLink>\r\n                </div>\r\n\r\n                <img className='page__icon' src={tagSvg} alt=\"\" />\r\n\r\n                <div className='new-transaction'>\r\n                    <div className='new-transaction__row'>\r\n                        <form onSubmit={addOperationHandler} className='new-transaction__col'>\r\n                            <input onChange={changeHandler} type='text' placeholder='Название категории' name='title' required />\r\n\r\n                            <div className='create-sources__row'>\r\n                                <h4 className='new-transaction__title'>Тип операции:</h4>\r\n\r\n                                <div className='create-sources__col'>\r\n                                    <span className='new-transaction__value'>{operation}</span>\r\n\r\n                                    <button type='button' onClick={tooglePopupType} className='new-transaction__btn' >\r\n                                        <img className='new-transaction__icon' src={chevronDownSvg} alt='' />\r\n                                    </button>\r\n                                </div>\r\n\r\n                                {popupType && <ul className='new-transaction__popup-list'>\r\n\r\n                                    {operations.map((name, index) => (\r\n                                        <li key={`${name}_${index}`} className='new-transaction__popup-item'>\r\n                                            <button onClick={() => { selectOperations(name) }} className='new-transaction__popup-btn'>{name}</button>\r\n                                        </li>\r\n                                    ))}\r\n\r\n                                </ul>}\r\n                            </div>\r\n\r\n                            <button className='new-transaction__submit' type='submit'>Добавить категорию</button>\r\n                        </form>\r\n\r\n                        {error && <p className='error'>Заполните все поля</p>}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CreateCategories;","\r\nimport React from \"react\";\r\n\r\n// Include the react-fusioncharts component\r\nimport ReactFC from \"react-fusioncharts\";\r\n\r\n// Include the fusioncharts library\r\nimport FusionCharts from \"fusioncharts\";\r\n\r\n// Include the chart type\r\nimport Column2D from \"fusioncharts/fusioncharts.charts\";\r\n\r\n// Include the theme as fusion\r\nimport FusionTheme from \"fusioncharts/themes/fusioncharts.theme.fusion\";\r\n\r\n// Adding the chart and theme as dependency to the core fusioncharts\r\nReactFC.fcRoot(FusionCharts, Column2D, FusionTheme);\r\n\r\nconst ChartComponent = ({ data = [] }) => {\r\n  const isEmptyExpenses = data.length === 0\r\n\r\n  const newArr = data.map(i => ({ label: i._id, value: i.sum }));\r\n\r\n  const chartConfigs = {\r\n    type: \"bar3d\",\r\n    width: \"100%\",\r\n    height: \"400\",\r\n    dataFormat: \"json\",\r\n    dataSource: {\r\n      // Chart Configuration\r\n      chart: {\r\n        caption: \"Расходы по категориям\",\r\n        // subCaption: \"In MMbbl = One Million barrels\",        \r\n        xAxisName: \"Категории\",\r\n        yAxisName: \"Сумма в бел.руб\",\r\n        // numberSuffix: \"руб\",\r\n        theme: \"fusion\",\r\n        // palettecolors: \"#23d2e2\",\r\n        useplotgradientcolor: \"0\",\r\n        // \"showBorder\": \"1\",\r\n        // \"borderColor\": \"#666666\",\r\n        // \"borderThickness\": \"4\",\r\n        // \"borderAlpha\": \"80\",\r\n        // \"bgImage\": \"http://upload.wikimedia.org/wikipedia/commons/7/79/Misc_fruit.jpg\",\r\n      },\r\n      // Chart Data\r\n      data: newArr\r\n    }\r\n  };\r\n\r\n  return <ReactFC {...chartConfigs} />\r\n};\r\n\r\nexport default ChartComponent;","\r\nimport React from \"react\";\r\n\r\n// Include the react-fusioncharts component\r\nimport ReactFC from \"react-fusioncharts\";\r\n\r\n// Include the fusioncharts library\r\nimport FusionCharts from \"fusioncharts\";\r\n\r\n// Include the chart type\r\nimport Column2D from \"fusioncharts/fusioncharts.charts\";\r\n\r\n// Include the theme as fusion\r\nimport FusionTheme from \"fusioncharts/themes/fusioncharts.theme.fusion\";\r\n\r\n// Adding the chart and theme as dependency to the core fusioncharts\r\nReactFC.fcRoot(FusionCharts, Column2D, FusionTheme);\r\n\r\nconst ChartComponent = ({ data = [] }) => {\r\n  const newArr = data.map(i => ({ label: i._id, value: i.sum }));\r\n\r\n  const chartConfigs = {\r\n    type: \"bar3d\",\r\n    width: \"100%\",\r\n    height: \"400\",\r\n    dataFormat: \"json\",\r\n    dataSource: {\r\n      // Chart Configuration\r\n      chart: {\r\n        caption: \"Доходы по категориям\",\r\n        // subCaption: \"In MMbbl = One Million barrels\",        \r\n        xAxisName: \"Категории\",\r\n        yAxisName: \"Сумма в бел.руб\",\r\n        // numberSuffix: \"руб\",\r\n        theme: \"fusion\",\r\n        palettecolors: \"#23d2e2\",\r\n        useplotgradientcolor: \"0\",\r\n        // \"showBorder\": \"1\",\r\n        // \"borderColor\": \"#666666\",\r\n        // \"borderThickness\": \"4\",\r\n        // \"borderAlpha\": \"80\",\r\n        // \"bgImage\": \"http://upload.wikimedia.org/wikipedia/commons/7/79/Misc_fruit.jpg\",\r\n      },\r\n      // Chart Data\r\n      data: newArr\r\n    }\r\n  };\r\n\r\n  return <ReactFC {...chartConfigs} />;\r\n};\r\n\r\nexport default ChartComponent;","//core\r\nimport React from 'react';\r\n\r\n//charts\r\nimport StatisticsExpenses from '../../charts/StatisticsExpenses';\r\nimport StatisticsRevenue from '../../charts/StatisticsRevenue';\r\n\r\n//hooks\r\nimport useStatisticsExpenses from './useStatisticsExpenses';\r\nimport useStatisticsRevenue from './useStatisticsRevenue';\r\n\r\n// styles\r\nimport './StatisticsPage.scss'\r\n\r\n\r\nconst StatisticsPage = () => {\r\n    const { data, isLoading, error } = useStatisticsExpenses()\r\n    const { data: revenue, isLoading: revenueIsLoading, error: errorrEvenue } = useStatisticsRevenue()\r\n\r\n    if (isLoading) return <p className='load-statistics'>Загрузка...</p>\r\n    if (error) return 'Ошибка при получении данных'\r\n\r\n    if (revenueIsLoading) return <p className='load-statistics'>Загрузка...</p>\r\n    if (errorrEvenue) return 'Ошибка при получении данных'\r\n\r\n    const isEmptyExpenses = data.length === 0\r\n    const isEmptyRevenue = revenue.length === 0\r\n\r\n    return (\r\n        <div className='page  statisticsPage'>\r\n            <div className='container'>\r\n                <h1 className='page__title'>Статистика</h1>\r\n\r\n                <div className='page__inner'>\r\n                    {!isEmptyExpenses ? <StatisticsExpenses data={data} /> : <p>Ещё нет данных о расходах</p>}\r\n                    {!isEmptyRevenue ? <StatisticsRevenue data={revenue} /> : <p>Ещё нет данных о доходах</p>}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default StatisticsPage;","//core\r\nimport React from 'react';\r\nimport { useQuery } from 'react-query';\r\nimport axios from 'axios';\r\n\r\n//context\r\nimport { AuthContext } from '../../context/AuthContext'\r\n\r\nexport default function useStatisticsExpenses() {\r\n    const { token, logout } = React.useContext(AuthContext);\r\n\r\n    return useQuery('expenses', () =>\r\n\r\n        axios.get('/api/transaction/expenses', { headers: { Authorization: `Bearer ${token}` } })\r\n            .then((res) => res.data)\r\n\r\n            .catch(e => {\r\n\r\n                if (e.response.status === 401) logout();\r\n\r\n                throw new Error(e)\r\n            })\r\n    )\r\n}\r\n","//core\r\nimport React from 'react';\r\nimport { useQuery } from 'react-query';\r\nimport axios from 'axios';\r\n\r\n//context\r\nimport { AuthContext } from '../../context/AuthContext'\r\n\r\nexport default function useStatisticsRevenue() {\r\n    const { token, logout } = React.useContext(AuthContext);\r\n\r\n    return useQuery('revenue', () =>\r\n\r\n        axios.get('/api/transaction/revenue', { headers: { Authorization: `Bearer ${token}` } })\r\n            .then((res) => res.data)\r\n\r\n            .catch(e => {\r\n\r\n                if (e.response.status === 401) logout();\r\n\r\n                throw new Error(e)\r\n            })\r\n    )\r\n}\r\n","//core\r\nimport React, { useState } from 'react';\r\n\r\n//hooks\r\nimport useCategories from '../Categories/useCategories';\r\nimport useSources from './../SourcesList/useSources';\r\n\r\n//images\r\nimport chevronDownSvg from '../../images/chevron-down.svg';\r\nimport penSvg from '../../images/pen.svg';\r\n\r\n\r\nexport const Filter = ({ setIsOpenFilterList, fetchLinks, setIsNotFound }) => {\r\n    const [popupType, setPopupType] = useState(false);\r\n    const [popupSources, setPopupSources] = useState(false);\r\n    const [popupCategory, setPopupCategory] = useState(false);\r\n    const [editDateModal, setEditDateModal] = useState(false);\r\n\r\n    const [operation, setOperation] = useState('');\r\n    const [source, setSource] = useState('');\r\n    const [category, setCategory] = useState('');\r\n    const [date, setDate] = useState('');\r\n\r\n    const query = {\r\n        operation,\r\n        source,\r\n        category,\r\n    }\r\n\r\n    const reset = {}\r\n\r\n    const { data: categories, isLoading, error: errorCategories } = useCategories()\r\n    const { data: sources, isLoading: sourcesLoading, error: errorSources } = useSources()\r\n\r\n    const fetchFilterListHandler = () => {\r\n        setIsOpenFilterList(true)\r\n        fetchLinks(query)\r\n    }\r\n\r\n    const resetFilterListHandler = () => {\r\n        setIsOpenFilterList(true)\r\n        fetchLinks(reset)\r\n        setOperation('')\r\n        setSource('')\r\n        setCategory('')\r\n        setDate('')\r\n        setIsNotFound(false)\r\n    }\r\n\r\n    const tooglePopupType = () => {\r\n        setPopupType(!popupType)\r\n    }\r\n\r\n    const tooglePopupSources = () => {\r\n        setPopupSources(!popupSources)\r\n    }\r\n\r\n    const tooglePopupCategory = () => {\r\n        setPopupCategory(!popupCategory)\r\n    }\r\n\r\n    const operations = ['расходы', 'доходы', 'перевод между счетами'];\r\n    const selectPperations = (name) => {\r\n        setOperation(name)\r\n        setPopupType(!popupType)\r\n    }\r\n\r\n    const selectSources = (name) => {\r\n        setSource(name)\r\n        setPopupSources(!popupSources)\r\n    }\r\n\r\n    const selectCategory = (title) => {\r\n        setCategory(title)\r\n        setPopupCategory(!popupCategory)\r\n    }\r\n\r\n    const toogleEditDateModal = () => {\r\n        setEditDateModal(!editDateModal)\r\n    }\r\n\r\n    const changeDateHandler = event => {\r\n        setDate(event.target.value);\r\n    }\r\n\r\n    if (isLoading) return 'Loading...'\r\n    if (sourcesLoading) return 'Loading...'\r\n\r\n    if (errorCategories) return 'Ошибка при получении счетов: ' + errorCategories.message\r\n    if (errorSources) return 'Ошибка при получении счетов: ' + errorSources.message\r\n\r\n\r\n    return (\r\n        <div className='new-transaction'>\r\n            <div className='new-transaction__row'>\r\n                <h4 className='new-transaction__title'>Тип операции:</h4>\r\n\r\n                <div className='new-transaction__col'>\r\n                    <span className='new-transaction__value'>{operation}</span>\r\n\r\n                    <button onClick={tooglePopupType} className='new-transaction__btn'>\r\n                        <img className='new-transaction__icon' src={chevronDownSvg} alt='' />\r\n                    </button>\r\n                </div>\r\n\r\n                {popupType && <ul className='new-transaction__popup-list'>\r\n\r\n                    {operations.map((name, index) => (\r\n                        <li key={`${name}_${index}`} className='new-transaction__popup-item'>\r\n                            <button onClick={() => { selectPperations(name) }} className='new-transaction__popup-btn'>{name}</button>\r\n                        </li>\r\n                    ))}\r\n\r\n                </ul>}\r\n            </div>\r\n\r\n            <div className='new-transaction__row'>\r\n                <h4 className='new-transaction__title'>Счёт:</h4>\r\n\r\n                <div className='new-transaction__col'>\r\n                    <span className='new-transaction__value'>{source}</span>\r\n\r\n                    <button onClick={tooglePopupSources} className='new-transaction__btn'>\r\n                        <img className='new-transaction__icon' src={chevronDownSvg} alt='' />\r\n                    </button>\r\n                </div>\r\n\r\n                {popupSources && <ul className='new-transaction__popup-list'>\r\n\r\n                    {sources.map(({ title }, index) => (\r\n                        <li key={`${title}_${index}`} className='new-transaction__popup-item'>\r\n                            <button onClick={() => { selectSources(title) }} className='new-transaction__popup-btn'>{title}</button>\r\n                        </li>\r\n                    ))}\r\n\r\n                </ul>}\r\n            </div>\r\n\r\n            <div className='new-transaction__row'>\r\n                <h4 className='new-transaction__title'>Категория:</h4>\r\n\r\n                <div className='new-transaction__col'>\r\n                    <span className='new-transaction__value'>{category}</span>\r\n                    <button onClick={tooglePopupCategory} className='new-transaction__btn'>\r\n                        <img className='new-transaction__icon' src={chevronDownSvg} alt='' />\r\n                    </button>\r\n                </div>\r\n\r\n                {popupCategory && <ul className='new-transaction__popup-list'>\r\n\r\n                    {categories.map((item, index) => (\r\n                        <li key={`${item.title}_${index}`} className='new-transaction__popup-item'>\r\n                            <button onClick={() => { selectCategory(item.title) }} className='new-transaction__popup-btn'>{item.title}</button>\r\n                        </li>\r\n                    ))}\r\n                </ul>}\r\n            </div>\r\n\r\n\r\n            {/* <div className='new-transaction__row'>\r\n                <h4 className='new-transaction__title'>Дата:</h4>\r\n                <div className='new-transaction__col'>\r\n\r\n                    {!editDateModal\r\n                        ? <span className='new-transaction__value'>{date} </span>\r\n                        : <input type='text' placeholder='11.11.2020' value={date} onChange={changeDateHandler} />\r\n                    }\r\n\r\n                    {!editDateModal\r\n                        ?\r\n                        <button onClick={toogleEditDateModal} className='new-transaction__btn'>\r\n                            <img className='new-transaction__icon' src={penSvg} alt='' />\r\n                        </button>\r\n                        :\r\n                        <button onClick={toogleEditDateModal} className='new-transaction__btn'>\r\n                            ok\r\n                        </button>\r\n                    }\r\n                </div>\r\n            </div> */}\r\n\r\n\r\n            <div className='new-transaction__row  filter-btns'>\r\n                <button onClick={resetFilterListHandler} className='new-transaction__submit' type='button'>Очистить</button>\r\n                <button onClick={fetchFilterListHandler} className='new-transaction__submit' type='button'>Показать</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","//core\r\nimport React from 'react';\r\nimport axios from 'axios';\r\nimport classnames from 'classnames';\r\n\r\n//components\r\nimport Transaction from '../../components/TransactionsList/Transaction';\r\nimport { Filter } from '../../components/Flter/Flter';\r\n\r\n//hooks\r\nimport useAllTransactions from './useAllTransactions'\r\n\r\n//context\r\nimport { AuthContext } from '../../context/AuthContext'\r\n\r\n// styles\r\nimport './AllTransactionsPage.scss'\r\n\r\n\r\nconst AllTransactionsPage = () => {\r\n    const [isOpenFilterList, setIsOpenFilterList] = React.useState(false)\r\n    const [isNotFound, setIsNotFound] = React.useState(false)\r\n    const [filtres, setFiltres] = React.useState([])\r\n    const { data, isLoading, error } = useAllTransactions()\r\n    const { token } = React.useContext(AuthContext);\r\n    const [isLoadingFiltres, setIsLoadingFiltres] = React.useState(false)\r\n\r\n    const fetchLinks = async (params) => {\r\n        try {\r\n            // setIsLoadingFiltres(true)\r\n\r\n            const entries = Object.entries(params).filter(([key, value]) => value !== '')\r\n            const newParams = Object.fromEntries(entries)\r\n\r\n            const paramsUrl = Object.keys(newParams).map((key) => `${encodeURIComponent(key)}=${encodeURIComponent(newParams[key])}`).join('&')\r\n\r\n            const response = await axios.get('/api/transaction/category/?' + paramsUrl, { headers: { Authorization: `Bearer ${token}` } })\r\n\r\n            const data = await response.data\r\n\r\n            // setIsLoadingFiltres(false)\r\n\r\n            if (data.length === 0) {\r\n                setIsNotFound(true)\r\n            } else {\r\n                setFiltres(data)\r\n            }\r\n\r\n        } catch (e) {\r\n            // setIsLoadingFiltres(false)\r\n            throw new Error(e)\r\n        }\r\n    }\r\n\r\n    if (isLoading) return <p className='load-statistics'>Загрузка...</p>\r\n    // if (isLoadingFiltres) return <p className='load-statistics'>Загрузка фильтра...</p>\r\n    if (error) return 'Ошибка при получении всех транзакций'\r\n\r\n    return (\r\n        <div className='page  allTransactionsPage'>\r\n            <div className='container'>\r\n                <div className='page__inner'>\r\n                    <div className='all-transactions'>\r\n\r\n                        {!isOpenFilterList\r\n                            ?\r\n                            <ul className={classnames({ ['transactions__list']: true, ['scroll']: data.length > 5 })}>\r\n                                <Transaction transactions={data} />\r\n                            </ul>\r\n                            :\r\n                            <>\r\n                                {!isNotFound\r\n                                    ?\r\n                                    <div>\r\n                                        <ul className={classnames({ ['transactions__list']: true, ['scroll']: filtres.length > 5 })}>\r\n                                            <Transaction transactions={filtres} />\r\n                                        </ul>\r\n                                    </div>\r\n                                    :\r\n                                    <p>Ничего не найдено</p>\r\n                                }\r\n                            </>\r\n                        }\r\n                    </div>\r\n\r\n\r\n                    <div className='allTransactionsPage__filter-wrap'>\r\n                        <div className=\"title-wrap\">\r\n                            <h2>Фильтр</h2>\r\n                        </div>\r\n\r\n                        <Filter setIsOpenFilterList={setIsOpenFilterList} fetchLinks={fetchLinks} setIsNotFound={setIsNotFound} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AllTransactionsPage;","//core\r\nimport React from 'react';\r\nimport { useQuery } from 'react-query';\r\nimport axios from 'axios';\r\n\r\n//context\r\nimport { AuthContext } from '../../context/AuthContext'\r\n\r\n\r\nexport default function useTransactionsCategory() {\r\n    const { token, logout } = React.useContext(AuthContext);\r\n\r\n    return useQuery('transactions-all', () =>\r\n\r\n        axios.get('/api/transaction/all', { headers: { Authorization: `Bearer ${token}` } })\r\n            .then((res) => res.data)\r\n\r\n            .catch(e => {\r\n\r\n                if (e.response.status === 401) logout();\r\n\r\n                throw new Error(e)\r\n            })\r\n    )\r\n}\r\n","// core\r\nimport React from 'react';\r\nimport { useParams, useHistory } from 'react-router-dom';\r\n\r\n// images\r\nimport sourcesSvg from '../../images/money2.svg';\r\nimport ellipsisHorizontalSvg from '../../images/ellipsis-horizontal.svg'\r\n\r\n// context\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\n// hooks\r\nimport useSource from './useSource';\r\nimport useDeleteSource from '../../components/SourcesList/useDeleteSource';\r\nimport { useHttp } from '../../hooks/http.hook';\r\n\r\n\r\nconst DetailSourcePage = () => {\r\n    const auth = React.useContext(AuthContext)\r\n    const { request, } = useHttp();\r\n    const history = useHistory()\r\n    const sourceId = useParams().id\r\n\r\n    const { data, isLoading, error } = useSource(sourceId)\r\n    const [isPopup, seTisPopup] = React.useState(false)\r\n    const [editMode, setEditMode] = React.useState(false)\r\n    const [newTitleSource, setNewTitleSource] = React.useState('')\r\n\r\n    const [deleteSource, { status: deleteSourceStatus }] = useDeleteSource();\r\n\r\n    const deleteSourceHandler = async (sourceId) => {\r\n        deleteSource(sourceId)\r\n        history.push(`/home/`)\r\n    }\r\n\r\n    const tooglePopup = () => {\r\n        seTisPopup(!isPopup)\r\n    };\r\n\r\n    const toogleEditMode = () => {\r\n        setEditMode(!editMode)\r\n        seTisPopup(!isPopup)\r\n    }\r\n\r\n    const changeNewTitleSource = (e) => {\r\n        setNewTitleSource(e.target.value)\r\n    }\r\n\r\n    const saveSource = async (e) => {\r\n        e.preventDefault();\r\n\r\n        const data = await request('/api/sources/edit', 'POST', { newTitleSource, sourceId }, {\r\n            Authorization: `Bearer ${auth.token}`\r\n        })\r\n        history.push(`/home/`)\r\n    }\r\n\r\n    if (isLoading) return <p className='load-statistics'>Загрузка...</p>\r\n    if (error) return 'Ошибка при получении счетов: ' + error.message\r\n\r\n    return (\r\n        <div className='page  detailSourcePage'>\r\n            <div className='container'>\r\n                <div className='page__inner'>\r\n                    <form className='sources-item' onSubmit={saveSource}>\r\n                        <img className='sources-item__icon' src={sourcesSvg} alt=\"\" />\r\n\r\n                        {!editMode\r\n                            ? <h4 className='sources-item__title'>{data.title}</h4>\r\n                            : <input onChange={(e) => { changeNewTitleSource(e) }}\r\n                                className='sources-item__input'\r\n                                type='text' placeholder={data.title}\r\n                                value={newTitleSource}\r\n                                required\r\n                            />\r\n                        }\r\n\r\n                        <div className='sources-item__total'>{data.total} руб</div>\r\n\r\n                        {!editMode\r\n                            ?\r\n                            <button onClick={tooglePopup} className='new-transaction__btn' type='button'>\r\n                                <img className='new-transaction__icon' src={ellipsisHorizontalSvg} alt='' />\r\n                            </button>\r\n                            :\r\n                            <button className='new-transaction__btn' type='submit'>\r\n                                ок\r\n                            </button>\r\n                        }\r\n\r\n                        {isPopup &&\r\n                            <ul className='new-transaction__popup-list'>\r\n                                <li className='new-transaction__popup-item'>\r\n                                    <button onClick={() => { deleteSourceHandler(sourceId) }} className='new-transaction__popup-btn'>Удалить</button>\r\n                                </li>\r\n\r\n                                <li className='new-transaction__popup-item'>\r\n                                    <button onClick={toogleEditMode} className='new-transaction__popup-btn'>Редактировать</button>\r\n                                </li>\r\n                            </ul>\r\n                        }\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DetailSourcePage;","// core\r\nimport React from 'react'\r\nimport { useQuery } from 'react-query';\r\nimport axios from 'axios'\r\n\r\n// context\r\nimport { AuthContext } from '../../context/AuthContext'\r\n\r\nexport default function useSource(sourceId) {\r\n    const { token } = React.useContext(AuthContext)\r\n\r\n    return useQuery('source', () =>\r\n        axios.get(`/api/sources/${sourceId}`, { headers: { Authorization: `Bearer ${token}` } })\r\n            .then((res) => res.data)\r\n\r\n            .catch(e => {\r\n                throw new Error(e)\r\n            })\r\n    )\r\n}","// core\r\nimport React from 'react'\r\nimport axios from 'axios'\r\nimport { useMutation, queryCache } from 'react-query'\r\n\r\n// context\r\nimport { AuthContext } from '../../context/AuthContext'\r\n\r\nexport default function useDeleteSource() {\r\n    const { token } = React.useContext(AuthContext)\r\n\r\n    return useMutation(\r\n        (sourceId) => axios.delete(`/api/sources/delete/${sourceId}`, { headers: { Authorization: `Bearer ${token}` } }).then((res) => res.data),\r\n\r\n    )\r\n}","// core\r\nimport React from 'react';\r\nimport { useParams, useHistory } from 'react-router-dom';\r\n\r\n// images\r\nimport ellipsisHorizontalSvg from '../../images/ellipsis-horizontal.svg'\r\nimport tagSvg from '../../images/tag.svg';\r\n\r\n// context\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\n// hooks\r\nimport useDeleteCategory from '../../components/Categories/useDeleteCategory';\r\nimport useCategory from '../CategoriesPage/useCategory';\r\nimport { useHttp } from '../../hooks/http.hook';\r\n\r\n\r\nconst DetailCategoriesPage = () => {\r\n    const auth = React.useContext(AuthContext)\r\n    const { request } = useHttp();\r\n    const history = useHistory()\r\n    const categoryId = useParams().id\r\n\r\n    const [isPopup, seTisPopup] = React.useState(false)\r\n    const { data, isLoading, error } = useCategory(categoryId)\r\n    const [editMode, setEditMode] = React.useState(false)\r\n    const [newTitleCategory, setNewTitleCategory] = React.useState('')\r\n\r\n    const [deleteCategory, { status: deleteCategoryStatus }] = useDeleteCategory();\r\n\r\n    const deleteCategoryHandler = async (categoryId) => {\r\n        deleteCategory(categoryId)\r\n        history.push(`/categories/`)\r\n    }\r\n\r\n    const tooglePopup = () => {\r\n        seTisPopup(!isPopup)\r\n    };\r\n\r\n    const toogleEditMode = () => {\r\n        setEditMode(!editMode)\r\n        seTisPopup(!isPopup)\r\n    }\r\n\r\n    const changeNewTitleCategory = (e) => {\r\n        setNewTitleCategory(e.target.value)\r\n    }\r\n\r\n    const saveCategory = async (e) => {\r\n        e.preventDefault();\r\n\r\n        const data = await request('/api/categories/edit', 'POST', { newTitleCategory, categoryId }, {\r\n            Authorization: `Bearer ${auth.token}`\r\n        })\r\n        history.push(`/categories/`)\r\n    }\r\n\r\n\r\n\r\n    if (isLoading) return <p className='load-statistics'>Загрузка...</p>\r\n    if (error) return 'Ошибка при получении счетов: ' + error.message\r\n\r\n\r\n    return (\r\n        <div className='page  detailCategoryPage'>\r\n            <div className='container'>\r\n                <div className='page__inner'>\r\n                    <form className='sources-item' onSubmit={saveCategory}>\r\n                        <img className='sources-item__icon' src={tagSvg} alt=\"\" />\r\n\r\n                        {!editMode\r\n                            ? <h4 className='sources-item__title'>{data.title}</h4>\r\n                            : <input onChange={(e) => { changeNewTitleCategory(e) }}\r\n                                className='sources-item__input'\r\n                                type='text'\r\n                                placeholder={data.title}\r\n                                value={newTitleCategory}\r\n                                required\r\n                            />\r\n                        }\r\n\r\n                        {!editMode\r\n                            ?\r\n                            <button onClick={tooglePopup} className='new-transaction__btn' type='button'>\r\n                                <img className='new-transaction__icon' src={ellipsisHorizontalSvg} alt='' />\r\n                            </button>\r\n                            :\r\n                            <button className='new-transaction__btn' type='submit'>\r\n                                ок\r\n                            </button>\r\n                        }\r\n\r\n                        {isPopup &&\r\n                            <ul className='new-transaction__popup-list'>\r\n                                <li className='new-transaction__popup-item'>\r\n                                    <button onClick={() => { deleteCategoryHandler(categoryId) }} className='new-transaction__popup-btn'>Удалить</button>\r\n                                </li>\r\n\r\n                                <li className='new-transaction__popup-item'>\r\n                                    <button onClick={toogleEditMode} className='new-transaction__popup-btn'>Редактировать</button>\r\n                                </li>\r\n                            </ul>\r\n                        }\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DetailCategoriesPage;","// core\r\nimport React from 'react'\r\nimport { useQuery } from 'react-query';\r\nimport axios from 'axios'\r\n\r\n// context\r\nimport { AuthContext } from '../../context/AuthContext'\r\n\r\nexport default function useCategory(categoryId) {\r\n    const { token } = React.useContext(AuthContext)\r\n\r\n    return useQuery('category', () =>\r\n        axios.get(`/api/categories/${categoryId}`, { headers: { Authorization: `Bearer ${token}` } })\r\n            .then((res) => res.data)\r\n\r\n            .catch(e => {\r\n                throw new Error(e)\r\n            })\r\n    )\r\n}","// core\r\nimport React from 'react'\r\nimport axios from 'axios'\r\nimport { useMutation, queryCache } from 'react-query'\r\n\r\n// context\r\nimport { AuthContext } from '../../context/AuthContext'\r\n\r\nexport default function useDeleteCategory() {\r\n    const { token } = React.useContext(AuthContext)\r\n\r\n    return useMutation(\r\n        (categoryId) => axios.delete(`/api/categories/delete/${categoryId}`, { headers: { Authorization: `Bearer ${token}` } }).then((res) => res.data),\r\n\r\n    )\r\n}","//core\r\nimport React, { useContext } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\n//context\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\n//image\r\nimport logoSvg from '../../images/logo.svg';\r\n\r\n// styles\r\nimport './Header.scss'\r\n\r\n\r\nexport const Header = () => {\r\n    const history = useHistory()\r\n    const auth = useContext(AuthContext)\r\n\r\n    const logoutHandler = event => {\r\n        event.preventDefault()\r\n        auth.logout()\r\n        history.push('/')\r\n    }\r\n\r\n    return (\r\n        <header className=\"header\">\r\n            <div className='container'>\r\n                <div className='header__inner'>\r\n\r\n                    <div className=\"logo  header__logo\">\r\n                        <img className='logo__img' src={logoSvg} alt=\"logo\" />\r\n                        <h1 className=\"logo__text\">Finance</h1>\r\n                    </div>\r\n\r\n                    <div className='header__email'>{auth.email}</div>\r\n\r\n                    <div className=\"header__actions\">\r\n                        <div className=\"header__actions-item\">\r\n                            <a className='header__logout' href=\"/\" onClick={logoutHandler}>Выйти</a>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </header>\r\n    )\r\n}\r\n","// core\r\nimport React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\n// styles\r\nimport './Footer.scss'\r\n\r\n// images\r\nimport homeSvg from '../../images/home.svg'\r\nimport chartSvg from '../../images/chart.svg'\r\nimport categorySvg from '../../images/category.svg'\r\n\r\nconst Footer = () => {\r\n    return (\r\n        <div className='footer'>\r\n            <div className='container'>\r\n                <div className='footer__inner'>\r\n                    <div className='footer__btns'>\r\n                        <NavLink className='footer__btn' to=\"/home\">\r\n                            <img className='footer__btn-icon' src={homeSvg} alt=\"\" />\r\n                            <span className='footer__btn-title'>Главная</span>\r\n                        </NavLink>\r\n\r\n                        <NavLink className='footer__btn' to=\"/categories\">\r\n                            <img className='footer__btn-icon' src={categorySvg} alt=\"\" />\r\n                            <span className='footer__btn-title'>Категории</span>\r\n                        </NavLink>\r\n\r\n                        <NavLink className='footer__btn' to=\"/statistics\">\r\n                            <img className='footer__btn-icon' src={chartSvg} alt=\"\" />\r\n                            <span className='footer__btn-title'>Статистика</span>\r\n                        </NavLink>\r\n                    </div>\r\n\r\n                    {/* <NavLink className='footer__create-btn' to=\"/create\">+</NavLink> */}\r\n                    <NavLink className='footer__btn  footer__create-btn' to=\"/create\">+</NavLink>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Footer;","//core\r\nimport React from 'react';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\nimport { useRoutes } from './routes';\r\n\r\n//hooks\r\nimport { useAuth } from './hooks/auth.hook';\r\n\r\n//context\r\nimport { AuthContext } from './context/AuthContext';\r\n\r\n//components\r\nimport { Header } from './components/Header/Header';\r\nimport Footer from './components/Footer/Footer';\r\n\r\n//ReactQueryDevtools\r\n// import { ReactQueryDevtools } from 'react-query-devtools'\r\nimport { ReactQueryConfigProvider } from 'react-query';\r\nconst queryConfig = { queries: { refetchOnWindowFocus: false } };\r\n\r\n\r\nfunction App() {\r\n    const { token, login, logout, userId, email } = useAuth();\r\n    const isAuthenticated = !!token;\r\n    const routes = useRoutes(isAuthenticated);\r\n\r\n    return (\r\n        <ReactQueryConfigProvider config={queryConfig}>\r\n            <AuthContext.Provider value={{\r\n                token, login, logout, userId, isAuthenticated, email\r\n            }}>\r\n\r\n                <Router>\r\n                    {isAuthenticated && <Header />}\r\n\r\n                    <div className='app'>\r\n                        {/* <div className=\"container\">\r\n                            \r\n                        </div> */}\r\n                        {routes}\r\n                    </div>\r\n\r\n                    {isAuthenticated && <Footer />}\r\n                </Router>\r\n\r\n                {/* <ReactQueryDevtools initialIsOpen={false} /> */}\r\n            </AuthContext.Provider>\r\n        </ReactQueryConfigProvider>\r\n    )\r\n}\r\n\r\nexport default App;\r\n","import { useState, useCallback, useEffect } from 'react'\r\n\r\nconst storageName = 'userData'\r\n\r\nexport const useAuth = () => {\r\n  const [token, setToken] = useState(null)\r\n  const [ready, setReady] = useState(false)\r\n  const [userId, setUserId] = useState(null)\r\n\r\n  const [email, setEmail] = useState(null)\r\n\r\n\r\n  const login = useCallback((jwtToken, id, email) => {\r\n    setToken(jwtToken)\r\n    setUserId(id)\r\n    setEmail(email)\r\n\r\n    localStorage.setItem(storageName, JSON.stringify({\r\n      userId: id, token: jwtToken, email: email\r\n    }))\r\n  }, [])\r\n\r\n\r\n  const logout = useCallback(() => {\r\n    setToken(null)\r\n    setUserId(null)\r\n    localStorage.removeItem(storageName)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const data = JSON.parse(localStorage.getItem(storageName))\r\n\r\n    if (data && data.token) {\r\n      login(data.token, data.userId, data.email)\r\n    }\r\n\r\n    setReady(true)\r\n  }, [login])\r\n\r\n\r\n  return { login, logout, token, userId, ready, email }\r\n}\r\n","// core\r\nimport React from 'react'\r\nimport { Switch, Route, Redirect } from 'react-router-dom'\r\n\r\n// pages\r\nimport { HomePage } from './pages/HomePage/HomePage'\r\nimport { CreateTransactionPage } from './pages/CreateTransactionPage/CreateTransactionPage'\r\nimport AuthPage from './pages/AuthPage/AuthPage'\r\nimport CreateSource from './pages/CreateSource/CreateSource';\r\nimport CategoriesPage from './pages/CategoriesPage/CategoriesPage';\r\nimport CreateCategories from './pages/CreateCategories/CreateCategories';\r\nimport StatisticsPage from './pages/StatisticsPage/StatisticsPage';\r\nimport AllTransactionsPage from './pages/AllTransactionsPage/AllTransactionsPage';\r\nimport DetailSourcePage from './pages/DetailSourcePage/DetailSourcePage';\r\nimport DetailCategoriesPage from './pages/DetailCategoriesPage/DetailCategoriesPage';\r\n\r\n\r\nexport const useRoutes = isAuthenticated => {\r\n    if (isAuthenticated) {\r\n        return (\r\n            <Switch>\r\n                <Route path=\"/home\" exact>\r\n                    <HomePage />\r\n                </Route>\r\n\r\n                <Route path=\"/create\">\r\n                    <CreateTransactionPage />\r\n                </Route>\r\n\r\n                <Route path=\"/create-source\">\r\n                    <CreateSource />\r\n                </Route>\r\n\r\n                <Route path=\"/create-category\">\r\n                    <CreateCategories />\r\n                </Route>\r\n\r\n                <Route path=\"/statistics\">\r\n                    <StatisticsPage />\r\n                </Route>\r\n\r\n                <Route path=\"/transactions\">\r\n                    <AllTransactionsPage />\r\n                </Route>\r\n\r\n                <Route path=\"/categories\" exact>\r\n                    <CategoriesPage />\r\n                </Route>\r\n\r\n                <Route path=\"/sources/:id\">\r\n                    <DetailSourcePage />\r\n                </Route>\r\n\r\n                <Route path=\"/categories/:id\" exact>\r\n                    <DetailCategoriesPage />\r\n                </Route>\r\n\r\n                <Redirect to=\"/home\" />\r\n            </Switch>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Switch>\r\n            <Route path=\"/\" exact>\r\n                <AuthPage />\r\n            </Route>\r\n\r\n            <Redirect to=\"/\" />\r\n        </Switch>\r\n    )\r\n}\r\n","// core\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\n// styles\r\nimport '../src/styles/index.scss';\r\n\r\n// components\r\nimport App from './App';\r\n\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n"],"sourceRoot":""}