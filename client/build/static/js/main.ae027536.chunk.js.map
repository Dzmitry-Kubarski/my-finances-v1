{"version":3,"sources":["images/chevron-down.svg","images/money2.svg","images/arrow-left.svg","images/tag.svg","images/arrow-big-right.svg","images/logo.svg","images/ellipsis-horizontal.svg","images/arrow-down.png","images/arrow-up.png","images/no-transactions.png","images/credit-card.png","images/pen.svg","images/home.svg","images/chart.svg","images/category.svg","components/TransactionsList/Transaction.jsx","components/TransactionsList/TransactionsList.jsx","components/SourcesList/SourceItem.jsx","components/SourcesList/SourcesList.jsx","context/AuthContext.js","components/SourcesList/useSources.js","pages/HomePage/HomePage.js","components/TransactionsList/useTransactions.js","hooks/http.hook.js","components/Categories/useCategories.js","pages/CreateTransactionPage/CreateTransactionPage.js","components/Login/Login.jsx","components/Register/Register.jsx","pages/AuthPage/AuthPage.js","pages/CreateSource/CreateSource.js","components/Categories/CategoriesItem.jsx","components/Categories/CategoriesList.jsx","pages/CategoriesPage/CategoriesPage.js","pages/CreateCategories/CreateCategories.js","charts/StatisticsExpenses.js","charts/StatisticsRevenue.js","pages/StatisticsPage/StatisticsPage.js","pages/StatisticsPage/useStatisticsExpenses.js","pages/StatisticsPage/useStatisticsRevenue.js","components/Flter/Flter.jsx","pages/AllTransactionsPage/AllTransactionsPage.js","pages/AllTransactionsPage/useAllTransactions.js","pages/DetailSourcePage/DetailSourcePage.js","pages/DetailSourcePage/useSource.js","components/SourcesList/useDeleteSource.js","pages/DetailCategoriesPage/DetailCategoriesPage.js","pages/CategoriesPage/useCategory.js","components/Categories/useDeleteCategory.js","components/Header/Header.jsx","components/Footer/Footer.jsx","App.js","hooks/auth.hook.js","routes.js","index.js"],"names":["module","exports","Transaction","transactions","transactionsJsx","map","sum","comment","operation","category","source","date","_id","key","className","src","arrowDownSvg","alt","arrowUpSvg","TransactionsList","data","isEmpty","length","to","noListGPG","SourceItem","sources","sourcesJsx","title","total","sourcesSvg","arrowBigRightSvg","SourcesList","isScroll","noListJPG","classnames","noop","AuthContext","createContext","token","userId","login","logout","isAuthenticated","email","useSources","React","useContext","useQuery","a","fetch","headers","Authorization","then","res","ok","json","catch","e","Error","HomePage","isLoading","error","useTransactions","isLoadingTransactions","errorTransactions","useHttp","useState","loading","setLoading","setError","request","useCallback","url","method","body","JSON","stringify","response","message","clearError","useCategories","CreateTransactionPage","auth","history","useHistory","popupType","setPopupType","popupSources","setPopupSources","popupCategory","setPopupCategory","editDateModal","setEditDateModal","setOperation","setSource","setSum","setCategory","Date","toLocaleDateString","setDate","setComment","categories","errorCategories","sourcesLoading","errorSources","newTransaction","isEmptyFields","Object","entries","filter","createTransactionHandler","cogoToast","push","toogleEditDateModal","arrowLeftSvg","onClick","chevronDownSvg","name","index","selectPperations","exact","item","type","placeholder","value","onChange","event","target","penSvg","Login","username","password","form","setForm","changeHandler","loginHandler","id","disabled","Register","useForm","handleSubmit","register","errors","onSubmit","values","success","ref","required","pattern","minLength","AuthPage","activeForm","setActiveForm","activeTab","setActiveTab","logoSvg","tab","selectForm","CreateSource","newSource","setNewSource","addSourceHandler","preventDefault","CategoriesItem","categoriesJsx","tagSvg","CategoriesList","CategoriesPage","CreateCategories","setTitle","newCategory","addOperationHandler","selectOperations","ReactFC","fcRoot","FusionCharts","Column2D","FusionTheme","ChartComponent","chartConfigs","width","height","dataFormat","dataSource","chart","caption","xAxisName","yAxisName","theme","useplotgradientcolor","i","label","palettecolors","StatisticsPage","useStatisticsExpenses","useStatisticsRevenue","revenue","revenueIsLoading","errorrEvenue","isEmptyExpenses","isEmptyRevenue","StatisticsExpenses","StatisticsRevenue","Filter","setIsOpenFilterList","fetchLinks","setIsNotFound","query","reset","AllTransactionsPage","isOpenFilterList","isNotFound","filtres","setFiltres","useAllTransactions","params","newParams","fromEntries","paramsUrl","keys","encodeURIComponent","join","DetailSourcePage","sourceId","useParams","useSource","isPopup","seTisPopup","editMode","setEditMode","newTitleSource","setNewTitleSource","useMutation","useDeleteSource","deleteSource","deleteSourceHandler","saveSource","changeNewTitleSource","ellipsisHorizontalSvg","DetailCategoriesPage","categoryId","useCategory","newTitleCategory","setNewTitleCategory","useDeleteCategory","deleteCategory","deleteCategoryHandler","saveCategory","changeNewTitleCategory","Header","href","Footer","homeSvg","categorySvg","chartSvg","queryConfig","queries","refetchOnWindowFocus","App","setToken","ready","setReady","setUserId","setEmail","jwtToken","localStorage","setItem","removeItem","useEffect","parse","getItem","useAuth","routes","path","useRoutes","config","Provider","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ae027536.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/chevron-down.8ebe8b51.svg\";","module.exports = __webpack_public_path__ + \"static/media/money2.3879cb4e.svg\";","module.exports = __webpack_public_path__ + \"static/media/arrow-left.cc7b2b17.svg\";","module.exports = __webpack_public_path__ + \"static/media/tag.2b9ed8da.svg\";","module.exports = __webpack_public_path__ + \"static/media/arrow-big-right.bc174e30.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo.64af5a29.svg\";","module.exports = __webpack_public_path__ + \"static/media/ellipsis-horizontal.59c12fbf.svg\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAA80lEQVRIie2PMVKDUBRFz2Ns4gbEddjpZwXAOtQixGQfiWDjuA5lBZKtEPr0XotM1Ml85DNjYcHtYO47536Y8pdpM7fdZe59zM3ZmLLB9bhJEI09mAST4B8J2vzqPBTyW9craDO3Ms32XZrMh+BdmsxNs32bJ8tggZkiIJKp6nJX9MJzV8hUAZF9yMvy/oxft2tBBZhE2WVucdpp85tbifKwh5e4bjbesX3rBLbL3KPBApDBUlACyHRnsucj/KJu7g00SvBDUhoUh8+vvgATPF2+NQ998EGB5yXfhwPLgwU+SSg8WHCUdKlbAcR1swmBTwnKJ5DyXi9v2yReAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAA+UlEQVRIie2VMW7CQBBF36A0HAEnJaegBJ8hFyDIojEROQcSokFINgfIGdhUUU4S2UegMpMCHAys1xuR0q8cj/+b1Y5saGlAvDtVJfhI3wCy4XiBiPq89uAdbrZLIAbombSfq059JM0n+A3X+KIMm3w0bpR0/hBeDVKBKDDbJarOIesFN+H6Wpl+eqrFPZOuXRK7wBKehZNV+TgPXzalRCBySayC47bYw6uS06lUIHo0ydxbIAcKoEBlZgsvycLJCpUZUBykU9T1WXn6eu9e14JdosEuudkaW29J7SV/D573vsO4et1r+g+0glZwP37/gzOfXH5VW+7nB9VcdJV0C2p0AAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/no-transactions.34ffe3db.png\";","module.exports = __webpack_public_path__ + \"static/media/credit-card.d9618088.png\";","module.exports = __webpack_public_path__ + \"static/media/pen.104bf02c.svg\";","module.exports = __webpack_public_path__ + \"static/media/home.8f23844b.svg\";","module.exports = __webpack_public_path__ + \"static/media/chart.7539fa18.svg\";","module.exports = __webpack_public_path__ + \"static/media/category.57663764.svg\";","//core\r\nimport React from 'react';\r\n\r\n//images\r\nimport arrowDownSvg from '../../images/arrow-down.png';\r\nimport arrowUpSvg from '../../images/arrow-up.png';\r\n\r\n// styles\r\nimport './Transaction.scss'\r\n\r\n\r\nconst Transaction = ({ transactions = [] }) => {\r\n    const transactionsJsx = transactions.map(({ sum, comment, operation, category, source, date, _id }) => (\r\n        <li key={_id} className='transaction-item'>\r\n            <div className='transaction-item__arrow-wrap'>\r\n                {operation === 'расходы' ?\r\n                    <img className='transaction-item__arrow' src={arrowDownSvg} alt=\"\" />\r\n                    :\r\n                    <img className='transaction-item__arrow' src={arrowUpSvg} alt=\"\" />\r\n                }\r\n            </div>\r\n\r\n            <div className='transaction-item__col'>\r\n                <p className='transaction-item__date'>{date}</p>\r\n                <p className='transaction-item__title'>{comment}</p>\r\n            </div>\r\n            <div className='transaction-item__col'>\r\n                {operation === 'расходы' ?\r\n                    <p className='transaction-item__price'>-{sum}</p>\r\n                    :\r\n                    <p className='transaction-item__price  green'>+{sum}</p>\r\n                }\r\n\r\n                <p className='transaction-item__category'>#{category}</p>\r\n                <p className='transaction-item__sources'>{source}</p>\r\n            </div>\r\n        </li>\r\n    ))\r\n\r\n    return (\r\n        <>\r\n            {transactionsJsx}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Transaction;","// core\r\nimport React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\n// components\r\nimport Transaction from './Transaction';\r\n\r\n\r\n\r\n// images\r\nimport noListGPG from '../../images/no-transactions.png';\r\n\r\n// styles\r\nimport './TransactionsList.scss'\r\n\r\nconst TransactionsList = ({ data = [] }) => {\r\n\r\n    const isEmpty = data.length === 0\r\n\r\n    return (\r\n        <div className='transactions'>\r\n            <div className='title-wrap'>\r\n                <h2>Последние транзакции</h2>\r\n                <NavLink className='btn-add' to=\"/create\">+</NavLink>\r\n            </div>\r\n\r\n            {!isEmpty ?\r\n                <>\r\n                    <ul className='transactions__list'>\r\n                        <Transaction transactions={data} />\r\n                    </ul>\r\n\r\n                    <div className=\"form__row\">\r\n                        <div className=\"form__item\">\r\n                            <NavLink className='button medium secondary' to=\"/transactions\">Все транзакци</NavLink>\r\n                        </div>\r\n                    </div>\r\n                </>\r\n                :\r\n                <>\r\n                    <p>Вы не провели ещё ни одной транзакции</p>\r\n                    <img className='no-list' src={noListGPG} alt=\"\" />\r\n                </>\r\n            }\r\n\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default TransactionsList;\r\n\r\n\r\n","// core\r\nimport React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\n// images\r\nimport sourcesSvg from '../../images/money2.svg';\r\nimport arrowBigRightSvg from '../../images/arrow-big-right.svg'\r\n\r\n\r\nconst SourceItem = ({ sources = [] }) => {\r\n\r\n    const sourcesJsx = sources && sources.map(({ title, total, _id }) => (\r\n        <li key={_id} className='sources-item'>\r\n            <img className='sources-item__icon' src={sourcesSvg} alt=\"\" />\r\n\r\n            <p className='sources-item__title'>{title}</p>\r\n\r\n            <div className='sources-item__total'>{total} руб</div>\r\n\r\n            <NavLink to={`/sources/${_id}`} className='new-transaction__btn'>\r\n                <img className='new-transaction__icon' src={arrowBigRightSvg} alt='' />\r\n            </NavLink>\r\n        </li>\r\n    ))\r\n\r\n\r\n    if (!sources) {\r\n        return (\r\n            <p>ничего нет</p>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {sourcesJsx}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default SourceItem;","// core\r\nimport React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport classnames from 'classnames';\r\n\r\n// components\r\nimport SourceItem from './SourceItem';\r\n\r\n// images\r\nimport noListJPG from '../../images/credit-card.png'\r\n\r\n// styles\r\nimport './SourcesList.scss'\r\n\r\nconst SourcesList = ({ data = [] }) => {\r\n\r\n    const isScroll = data.length > 5\r\n    const isEmpty = data.length === 0\r\n\r\n    return (\r\n        <div className='sources'>\r\n            <div className='title-wrap'>\r\n                <h2>Ваши счета</h2>\r\n                <NavLink className='btn-add' to=\"/create-source\">+</NavLink>\r\n            </div>\r\n\r\n            {!isEmpty ?\r\n                <ul className={classnames({ 'sources__list': true, 'scroll': isScroll })}>\r\n                    <SourceItem sources={data} />\r\n                </ul>\r\n                :\r\n                <>\r\n                    <p>Вы не создали ещё ни одного счёта</p>\r\n                    <img className='no-list' src={noListJPG} alt=\"\" />\r\n                </>\r\n            }\r\n        </div >\r\n    );\r\n};\r\n\r\nexport default SourcesList;\r\n","import { createContext } from 'react'\r\n\r\nfunction noop() { }\r\n\r\nexport const AuthContext = createContext({\r\n  token: null,\r\n  userId: null,\r\n  login: noop,\r\n  logout: noop,\r\n  isAuthenticated: false,\r\n  email: null,\r\n})\r\n","//core\r\nimport React from 'react';\r\nimport { useQuery } from 'react-query';\r\n\r\n//context\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\n\r\nexport default function useSources() {\r\n    const { token, logout } = React.useContext(AuthContext);\r\n\r\n    return useQuery('sources', async () =>\r\n        await fetch('/api/sources', { headers: { Authorization: `Bearer ${token}` } })\r\n            .then((res) => {\r\n                if (res.ok) {\r\n                    return res.json()\r\n                }\r\n                return logout()\r\n            })\r\n\r\n            .catch(e => {\r\n                throw new Error(e)\r\n            })\r\n    )\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","//core\r\nimport React from 'react';\r\n\r\n//components\r\nimport TransactionsList from '../../components/TransactionsList/TransactionsList';\r\nimport SourcesList from '../../components/SourcesList/SourcesList';\r\n\r\n// hooks\r\nimport useSources from '../../components/SourcesList/useSources';\r\nimport useTransactions from '../../components/TransactionsList/useTransactions';\r\n\r\n\r\nexport const HomePage = () => {\r\n    const { data: sources, isLoading, error } = useSources();\r\n    const { data: transactions, isLoading: isLoadingTransactions, error: errorTransactions } = useTransactions();\r\n\r\n    if (isLoadingTransactions || isLoading) return <p className='loading'>Загрузка данных...</p>\r\n\r\n    if (errorTransactions) return <p>Ошибка при получении транзакций</p>\r\n    if (error) return <p>Ошибка при получении счетов</p>\r\n\r\n    return (\r\n        <div className='page  home-page'>\r\n            <div className='container'>\r\n                <div className='page__inner'>\r\n                    <TransactionsList data={transactions} />\r\n                    <SourcesList data={sources} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","//core\r\nimport React from 'react';\r\nimport { useQuery } from 'react-query';\r\n\r\n//context\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\n\r\nexport default function useTransactions() {\r\n    const { token, logout } = React.useContext(AuthContext)\r\n\r\n    return useQuery('transactions', async () =>\r\n        await fetch('/api/transaction', { headers: { Authorization: `Bearer ${token}` } })\r\n            .then((res) => {\r\n                if (res.ok) {\r\n                    return res.json()\r\n                }\r\n                return logout()\r\n            })\r\n\r\n            .catch(e => {\r\n                throw new Error(e)\r\n            })\r\n    )\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import { useState, useCallback } from 'react'\r\n\r\nexport const useHttp = () => {\r\n  const [loading, setLoading] = useState(false)\r\n  const [error, setError] = useState(null)\r\n\r\n  const request = useCallback(async (url, method = 'GET', body = null, headers = {}) => {\r\n    setLoading(true)\r\n    try {\r\n      if (body) {\r\n        body = JSON.stringify(body)\r\n        headers['Content-Type'] = 'application/json'\r\n      }\r\n\r\n      const response = await fetch(url, { method, body, headers })\r\n      const data = await response.json()\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.message || 'Что-то пошло не так')\r\n      }\r\n\r\n      setLoading(false)\r\n      return data\r\n\r\n    } catch (e) {\r\n      setLoading(false)\r\n      setError(e.message)\r\n      throw e\r\n    }\r\n  }, [])\r\n\r\n  const clearError = useCallback(() => setError(null), [])\r\n\r\n  return { loading, request, error, clearError }\r\n}\r\n","//core\r\nimport React from 'react';\r\nimport { useQuery } from 'react-query';\r\n\r\n//context\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\n\r\nexport default function useCategories() {\r\n    const { token, logout } = React.useContext(AuthContext);\r\n\r\n    return useQuery('categories', () =>\r\n        fetch('/api/categories', { headers: { Authorization: `Bearer ${token}` } })\r\n            .then((res) => {\r\n                if (res.ok) {\r\n                    return res.json()\r\n                }\r\n                return logout()\r\n            })\r\n\r\n            .catch(e => {\r\n                throw new Error(e)\r\n            })\r\n    )\r\n}\r\n\r\n","//core\r\nimport React, { useContext, useState } from 'react';\r\nimport { NavLink, useHistory } from 'react-router-dom';\r\n\r\n// libs\r\nimport cogoToast from 'cogo-toast';\r\n\r\n//hooks\r\nimport { useHttp } from '../../hooks/http.hook';\r\nimport useSources from '../../components/SourcesList/useSources';\r\n\r\n//context\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\n//components\r\nimport useCategories from '../../components/Categories/useCategories';\r\n\r\n//images\r\nimport chevronDownSvg from '../../images/chevron-down.svg';\r\nimport penSvg from '../../images/pen.svg';\r\nimport arrowLeftSvg from '../../images/arrow-left.svg';\r\n\r\n// styles \r\nimport './CreateTransactionPage.scss'\r\n\r\n\r\nexport const CreateTransactionPage = () => {\r\n    const auth = useContext(AuthContext)\r\n    const { request } = useHttp()\r\n    const history = useHistory()\r\n\r\n    const [popupType, setPopupType] = useState(false);\r\n    const [popupSources, setPopupSources] = useState(false);\r\n    const [popupCategory, setPopupCategory] = useState(false);\r\n    const [editDateModal, setEditDateModal] = useState(false);\r\n\r\n    const [operation, setOperation] = useState('');\r\n    const [source, setSource] = useState('');\r\n    const [sum, setSum] = useState('');\r\n    const [category, setCategory] = useState('');\r\n    const [date, setDate] = useState(new Date().toLocaleDateString());\r\n    const [comment, setComment] = useState('');\r\n\r\n    const { data: categories, isLoading, error: errorCategories } = useCategories();\r\n    const { data: sources, isLoading: sourcesLoading, error: errorSources } = useSources();\r\n\r\n    const operations = ['расходы', 'доходы'];\r\n\r\n    const newTransaction = {\r\n        operation,\r\n        source,\r\n        sum,\r\n        category,\r\n        date,\r\n        comment,\r\n    }\r\n\r\n    const isEmptyFields = Object.entries(newTransaction).filter(([key, value]) => value === '')\r\n\r\n    const createTransactionHandler = async () => {\r\n        if (isEmptyFields.length > 0) {\r\n            return cogoToast.error('Заполните все поля');\r\n        }\r\n\r\n        await request('/api/transaction/add', 'POST', { ...newTransaction }, {\r\n            Authorization: `Bearer ${auth.token}`\r\n        })\r\n\r\n\r\n        await request('/api/sources/edit-total', 'POST', { ...newTransaction }, {\r\n            Authorization: `Bearer ${auth.token}`\r\n        })\r\n\r\n        history.push(`/home/`)\r\n    }\r\n\r\n    const tooglePopupType = () => {\r\n        setPopupType(!popupType)\r\n    }\r\n\r\n    const tooglePopupSources = () => {\r\n        setPopupSources(!popupSources)\r\n    }\r\n\r\n    const tooglePopupCategory = () => {\r\n        setPopupCategory(!popupCategory)\r\n    }\r\n\r\n    const selectPperations = (name) => {\r\n        setOperation(name)\r\n        setPopupType(!popupType)\r\n    }\r\n\r\n    const selectSources = (name) => {\r\n        setSource(name)\r\n        setPopupSources(!popupSources)\r\n    }\r\n\r\n    const selectCategory = (title) => {\r\n        setCategory(title)\r\n        setPopupCategory(!popupCategory)\r\n    }\r\n\r\n    const sumChangeHadler = (event) => {\r\n        setSum(event.target.value)\r\n    }\r\n\r\n    const commentChangeHadler = (event) => {\r\n        setComment(event.target.value)\r\n    }\r\n\r\n    const toogleEditDateModal = () => {\r\n        setEditDateModal(!editDateModal)\r\n    }\r\n\r\n    const changeDateHandler = event => {\r\n        setDate(event.target.value);\r\n    }\r\n\r\n    if (isLoading) return 'Loading...'\r\n    if (sourcesLoading) return 'Loading...'\r\n\r\n    if (errorCategories) return 'Ошибка при получении счетов'\r\n    if (errorSources) return 'Ошибка при получении счетов'\r\n\r\n\r\n    return (\r\n        <div className='page  createPage'>\r\n\r\n            <div className='container'>\r\n                <div className='title-wrap'>\r\n                    <h2>Новая транзакция</h2>\r\n                    <NavLink className='btn-add' to=\"/home\">\r\n                        <img className='btn-add__icon' src={arrowLeftSvg} alt=\"\" />\r\n                    </NavLink>\r\n                </div>\r\n\r\n                <div className='new-transaction'>\r\n                    <div className='new-transaction__row'>\r\n                        <h4 className='new-transaction__title'>Тип операции:</h4>\r\n\r\n                        <div className='new-transaction__col'>\r\n                            <span className='new-transaction__value'>{operation}</span>\r\n\r\n                            <button onClick={tooglePopupType} className='new-transaction__btn'>\r\n                                <img className='new-transaction__icon' src={chevronDownSvg} alt='' />\r\n                            </button>\r\n                        </div>\r\n\r\n                        {popupType && <ul className='new-transaction__popup-list'>\r\n\r\n                            {operations.map((name, index) => (\r\n                                <li key={`${name}_${index}`} className='new-transaction__popup-item'>\r\n                                    <button onClick={() => { selectPperations(name) }} className='new-transaction__popup-btn'>{name}</button>\r\n                                </li>\r\n                            ))}\r\n\r\n                        </ul>}\r\n                    </div>\r\n\r\n                    <div className='new-transaction__row'>\r\n                        <h4 className='new-transaction__title'>Счёт:</h4>\r\n\r\n                        <div className='new-transaction__col'>\r\n                            <span className='new-transaction__value'>{source}</span>\r\n\r\n                            <button onClick={tooglePopupSources} className='new-transaction__btn'>\r\n                                <img className='new-transaction__icon' src={chevronDownSvg} alt='' />\r\n                            </button>\r\n                        </div>\r\n\r\n                        {popupSources &&\r\n                            <ul className='new-transaction__popup-list'>\r\n                                {sources.length === 0\r\n                                    ? <li className='new-transaction__popup-item'>\r\n                                        <NavLink to='create-source' exact className='new-transaction__popup-btn'>Создать</NavLink>\r\n                                    </li>\r\n\r\n                                    : sources.map(({ title }, index) => (\r\n                                        <li key={`${title}_${index}`} className='new-transaction__popup-item'>\r\n                                            <button onClick={() => { selectSources(title) }} className='new-transaction__popup-btn'>{title}</button>\r\n                                        </li>\r\n                                    ))}\r\n                            </ul>\r\n                        }\r\n                    </div>\r\n\r\n                    <div className='new-transaction__row'>\r\n                        <h4 className='new-transaction__title'>Категория:</h4>\r\n\r\n                        <div className='new-transaction__col'>\r\n                            <span className='new-transaction__value'>{category}</span>\r\n                            <button onClick={tooglePopupCategory} className='new-transaction__btn'>\r\n                                <img className='new-transaction__icon' src={chevronDownSvg} alt='' />\r\n                            </button>\r\n                        </div>\r\n\r\n                        {popupCategory &&\r\n                            <ul className='new-transaction__popup-list'>\r\n                                {categories.length === 0\r\n                                    ? <li className='new-transaction__popup-item'>\r\n                                        <NavLink to='create-category' exact className='new-transaction__popup-btn'>Создать</NavLink>\r\n                                    </li>\r\n\r\n                                    : categories.map((item, index) => (\r\n                                        <li key={`${item.title}_${index}`} className='new-transaction__popup-item'>\r\n                                            <button onClick={() => { selectCategory(item.title) }} className='new-transaction__popup-btn'>{item.title}</button>\r\n                                        </li>\r\n                                    ))}\r\n                            </ul>\r\n                        }\r\n                    </div>\r\n\r\n\r\n                    <div className='new-transaction__row'>\r\n                        <h4 className='new-transaction__title'>Дата:</h4>\r\n                        <div className='new-transaction__col'>\r\n\r\n                            {!editDateModal\r\n                                ? <span className='new-transaction__value'>{date} </span>\r\n                                : <input type='text' placeholder={date} value={date} onChange={changeDateHandler} />\r\n                            }\r\n\r\n                            {!editDateModal\r\n                                ?\r\n                                <button onClick={toogleEditDateModal} className='new-transaction__btn'>\r\n                                    <img className='new-transaction__icon' src={penSvg} alt='' />\r\n                                </button>\r\n                                :\r\n                                <button onClick={toogleEditDateModal} className='new-transaction__btn'>\r\n                                    ok\r\n                            </button>\r\n                            }\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    <div className='new-transaction__row'>\r\n                        <h4 className='new-transaction__title'>Комментарий</h4>\r\n                        <textarea onChange={commentChangeHadler} placeholder='Описание' value={comment} />\r\n                    </div>\r\n\r\n\r\n                    <div className='new-transaction__row'>\r\n                        <h4 className='new-transaction__title'>Сумма:</h4>\r\n                        <div className='new-transaction__col'>\r\n                            <input onChange={sumChangeHadler} type='number' placeholder='сумма' value={sum} />\r\n                            <button onClick={createTransactionHandler} className='new-transaction__submit' type='button'>Подтвердить</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}\r\n","// core\r\nimport React, { useContext, useState } from 'react';\r\n\r\n// libs\r\nimport cogoToast from 'cogo-toast';\r\n\r\n//hooks\r\nimport { useHttp } from '../../hooks/http.hook';\r\n\r\n//context\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\n// styles\r\nimport './Form.scss';\r\n\r\n\r\nconst Login = () => {\r\n    const auth = useContext(AuthContext);\r\n    const { loading, request } = useHttp();\r\n\r\n    const [form, setForm] = useState({\r\n        email: '', username: '', password: ''\r\n    })\r\n\r\n    const changeHandler = event => {\r\n        setForm({ ...form, [event.target.name]: event.target.value });\r\n    }\r\n\r\n    const loginHandler = async () => {\r\n        try {\r\n            const data = await request('/api/auth/login', 'POST', { ...form });\r\n            auth.login(data.token, data.userId, data.email);\r\n\r\n        } catch (e) {\r\n            cogoToast.error(e.message);\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"form-box\">\r\n            <h2 className=\"form-box__title\">Вход в аккаунт</h2>\r\n\r\n            <div className=\"form\">\r\n                <div className=\"form__row\">\r\n                    <div className=\"form__item\">\r\n                        <div className=\"form__input\">\r\n                            <input type=\"text\" id=\"login-username\" name=\"email\" placeholder='Email' onChange={changeHandler} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"form__row\">\r\n                    <div className=\"form__item\">\r\n                        <div className=\"form__input\">\r\n                            <input type=\"password\" id=\"login-password\" name=\"password\" placeholder='Password' onChange={changeHandler} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"form__row\">\r\n                    <div className=\"form__item\">\r\n                        <button onClick={loginHandler}\r\n                            disabled={loading}\r\n                            className={!loading ? 'button medium secondary' : 'button medium color-loader-bar-8'}>\r\n                            {!loading ? 'Войти в аккаунт' : 'Обработка данных'}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Login;","// core\r\nimport React from 'react';\r\n\r\n// libs\r\nimport cogoToast from 'cogo-toast';\r\nimport { useForm } from \"react-hook-form\";\r\n\r\n//hooks\r\nimport { useHttp } from '../../hooks/http.hook';\r\n\r\n// styles\r\nimport './Form.scss';\r\n\r\n\r\nconst Register = () => {\r\n    const { loading, request } = useHttp();\r\n\r\n    const { handleSubmit, register, errors } = useForm();\r\n    const onSubmit = async (values) => {\r\n        try {\r\n            await request('/api/auth/register', 'POST', { ...values });\r\n            cogoToast.success(\"Регистрация прошла успешно\");\r\n\r\n        } catch (e) {\r\n            cogoToast.error(e.message);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"form-box\">\r\n            <h2 className=\"form-box__title\">Регистрация</h2>\r\n\r\n            <form onSubmit={handleSubmit(onSubmit)} className='form'>\r\n                <div className='form__row'>\r\n                    <div className='form__input'>\r\n                        <input\r\n                            name=\"email\"\r\n                            placeholder='Email'\r\n                            type='text'\r\n                            ref={register({\r\n                                required: \"Обязательное поле\",\r\n                                pattern: {\r\n                                    value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,\r\n                                    message: \"Некорректный email\"\r\n                                }\r\n                            })}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className='errors'>\r\n                    {errors.email && errors.email.message}\r\n                </div>\r\n\r\n\r\n                <div className='form__row'>\r\n                    <div className='form__input'>\r\n                        <input\r\n                            name=\"username\"\r\n                            placeholder='Ваше имя'\r\n                            type='text'\r\n                            ref={register({\r\n                                required: \"Обязательное поле\",\r\n                                minLength: 4,\r\n                            })}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className='errors'>\r\n                    {errors.username && errors.username.message}\r\n                    {errors.username?.type === \"minLength\" && \"Минимальное кол-во символов = 4\"}\r\n                </div>\r\n\r\n\r\n                <div className='form__row'>\r\n                    <div className='form__input'>\r\n                        <input\r\n                            name=\"password\"\r\n                            placeholder='Password'\r\n                            type='password'\r\n                            ref={register({\r\n                                required: \"Обязательное поле\",\r\n                                minLength: 6,\r\n                            })}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className='errors'>\r\n                    {errors.username && errors.username.message}\r\n                    {errors.password?.type === \"minLength\" && \"Минимальное кол-во символов = 6\"}\r\n                </div>\r\n\r\n\r\n                <div className='form__row'>\r\n                    <button\r\n                        type=\"submit\"\r\n                        disabled={loading}\r\n                        className={!loading ? 'button medium secondary' : 'button medium color-loader-bar-8'}>\r\n                        {!loading ? 'Зарегестрироваться' : 'Обработка данных'}\r\n                    </button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Register;","//core\r\nimport React, { useState } from 'react';\r\n\r\n// components\r\nimport Login from '../../components/Login/Login';\r\nimport Register from '../../components/Register/Register';\r\n\r\n//images\r\nimport logoSvg from '../../images/logo.svg';\r\n\r\n// styles\r\nimport './AuthPage.scss'\r\n\r\n\r\nconst AuthPage = () => {\r\n    const [activeForm, setActiveForm] = useState('loginForm');\r\n    const [activeTab, setActiveTab] = useState(0);\r\n\r\n    const tabs = [\r\n        { name: 'Login' },\r\n        { name: 'Register' }\r\n    ]\r\n\r\n    const selectForm = (name, index) => {\r\n        if (name === 'Login') {\r\n            setActiveForm('loginForm')\r\n            setActiveTab(index)\r\n        }\r\n\r\n        else if (name === 'Register') {\r\n            setActiveForm('registerForm');\r\n            setActiveTab(index)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"auth\">\r\n            <div className='container'>\r\n                <div className='auth__inner'>\r\n                    <div className='auth__decoration'></div>\r\n\r\n                    <div className=\"auth__content\">\r\n                        <div className=\"logo  auth__logo\">\r\n                            <img className='logo__img' src={logoSvg} alt=\"logo\" />\r\n                        </div>\r\n\r\n                        <h2 className=\"auth__subtitle\">Welcome to</h2>\r\n                        <h1 className=\"auth__title\">Finance</h1>\r\n\r\n                        <p className=\"auth__text\">\r\n                            Данное приложение поможет вам вести учёт расходов и доходов\r\n                        </p>\r\n\r\n                        <div className=\"auth__tabs\">\r\n                            {\r\n                                tabs.map((tab, index) => (\r\n                                    <p key={tab.name}\r\n                                        className={activeTab === index ? 'auth__tab active' : 'auth__tab'}\r\n                                        onClick={() => { selectForm(tab.name, index) }}\r\n                                    >\r\n                                        {tab.name}\r\n                                    </p>\r\n                                ))\r\n                            }\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    {activeForm === 'loginForm' && (\r\n                        <Login />\r\n                    )}\r\n\r\n                    {activeForm === 'registerForm' && (\r\n                        <Register />\r\n                    )}\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AuthPage\r\n","//core\r\nimport React from 'react';\r\nimport { NavLink, useHistory } from 'react-router-dom';\r\n\r\n//hooks\r\nimport { useHttp } from '../../hooks/http.hook';\r\n\r\n//context\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\n//images\r\nimport sourcesSvg from '../../images/money2.svg';\r\nimport arrowLeftSvg from '../../images/arrow-left.svg';\r\n\r\n// styles\r\nimport './CreateSource.scss'\r\n\r\n\r\nconst CreateSource = () => {\r\n    const history = useHistory()\r\n\r\n    const auth = React.useContext(AuthContext);\r\n    const { request, } = useHttp();\r\n\r\n    const [newSource, setNewSource] = React.useState({\r\n        title: '', total: 0\r\n    })\r\n\r\n    const changeHandler = event => {\r\n        setNewSource({ ...newSource, [event.target.name]: event.target.value });\r\n    }\r\n\r\n    const addSourceHandler = async (e) => {\r\n        e.preventDefault();\r\n\r\n        await request('/api/sources/add', 'POST', { ...newSource }, {\r\n            Authorization: `Bearer ${auth.token}`\r\n        })\r\n        history.push(`/home/`)\r\n    }\r\n\r\n    return (\r\n        <div className='page  create-sources'>\r\n            <div className='container'>\r\n                <div className='title-wrap'>\r\n                    <h2>Новый счет</h2>\r\n                    <NavLink className='btn-add' to=\"/home\">\r\n                        <img className='btn-add__icon' src={arrowLeftSvg} alt=\"\" />\r\n                    </NavLink>\r\n                </div>\r\n\r\n                <img className='page__icon' src={sourcesSvg} alt=\"\" />\r\n\r\n                <div className='new-transaction'>\r\n                    <div className='new-transaction__row'>\r\n                        <form onSubmit={addSourceHandler} className='new-transaction__col'>\r\n                            <input onChange={changeHandler} type='text' placeholder='Название счёта' name='title' required />\r\n                            <input onChange={changeHandler} type='number' placeholder='Стартовая сумма на счету' name='total' required />\r\n                            <button type='submit' className='new-transaction__submit'>Подтвердить</button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CreateSource;","//core\r\nimport React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\n//images\r\nimport tagSvg from '../../images/tag.svg';\r\nimport arrowBigRightSvg from '../../images/arrow-big-right.svg'\r\n\r\n\r\nconst CategoriesItem = ({ categories = [] }) => {\r\n    const categoriesJsx = categories.map(({ title, _id }) => (\r\n        <li key={_id} className='sources-item'>\r\n            <img className='sources-item__icon' src={tagSvg} alt=\"\" />\r\n\r\n            <h4 className='sources-item__title'>{title}</h4>\r\n\r\n            <NavLink to={`/categories/${_id}`} className='new-transaction__btn'>\r\n                <img className='new-transaction__icon' src={arrowBigRightSvg} alt='' />\r\n            </NavLink>\r\n        </li>\r\n    ))\r\n\r\n    return (\r\n        <>\r\n            {categoriesJsx}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default CategoriesItem;","//core\r\nimport React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport classnames from 'classnames';\r\n\r\n//hooks\r\nimport useCategories from './useCategories';\r\n\r\n//components\r\nimport CategoriesItem from './CategoriesItem';\r\n\r\n\r\nconst CategoriesList = () => {\r\n    const { data, isLoading, error } = useCategories()\r\n\r\n    if (isLoading) return <p className='loading'>Загрузка...</p>\r\n    if (error) return 'Ошибка при получении счетов: ' + error.message\r\n\r\n    const isScroll = data.length > 5\r\n    const isEmpty = data.length === 0\r\n\r\n    return (\r\n        <div className='sources'>\r\n            <div className='title-wrap'>\r\n                <h2 className='transaction__title'>Ваши категории</h2>\r\n                <NavLink className='btn-add' to=\"/create-category\">+</NavLink>\r\n            </div>\r\n\r\n            {!isEmpty ?\r\n                <ul className={classnames({ 'scroll': isScroll, 'sources__list': true, })}>\r\n                    <CategoriesItem categories={data} />\r\n                </ul>\r\n                :\r\n                <p>Вы ещё не создали ни одной категории</p>\r\n            }\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CategoriesList;","//core\r\nimport React from 'react';\r\n\r\n//components\r\nimport CategoriesList from '../../components/Categories/CategoriesList';\r\n\r\nconst CategoriesPage = () => {\r\n    return (\r\n        <div className='page  categoriesPage'>\r\n            <div className='container'>\r\n                <div className='page__inner'>\r\n                    <CategoriesList />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CategoriesPage;","// core\r\nimport React, { useState } from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { useHistory } from 'react-router-dom'\r\n\r\n// hooks\r\nimport { useHttp } from '../../hooks/http.hook';\r\n\r\n// context\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\n// images\r\nimport tagSvg from '../../images/tag.svg';\r\nimport chevronDownSvg from '../../images/chevron-down.svg';\r\nimport arrowLeftSvg from '../../images/arrow-left.svg';\r\n\r\n\r\nconst CreateCategories = () => {\r\n    const history = useHistory()\r\n    const auth = React.useContext(AuthContext);\r\n    const { request } = useHttp();\r\n\r\n    const [popupType, setPopupType] = useState(false);\r\n    const [operation, setOperation] = useState('');\r\n    const [title, setTitle] = useState('');\r\n    const [error, setError] = useState(false);\r\n\r\n    const newCategory = {\r\n        title,\r\n        operation\r\n    }\r\n\r\n    const changeHandler = event => {\r\n        setTitle(event.target.value);\r\n    }\r\n\r\n    const addOperationHandler = async (e) => {\r\n        e.preventDefault();\r\n\r\n        if (operation === '') {\r\n            return setError(true)\r\n        }\r\n\r\n        await request('/api/categories/add', 'POST', { ...newCategory }, {\r\n            Authorization: `Bearer ${auth.token}`\r\n        })\r\n        history.push(`/categories/`)\r\n    }\r\n\r\n    const operations = ['расходы', 'доходы'];\r\n\r\n    const tooglePopupType = () => {\r\n        setPopupType(!popupType)\r\n    }\r\n\r\n    const selectOperations = (name) => {\r\n        setOperation(name)\r\n        setPopupType(!popupType)\r\n    }\r\n\r\n    return (\r\n        <div className='page  create-sources'>\r\n\r\n            <div className='container'>\r\n                <div className='title-wrap'>\r\n                    <h2>Новая категория</h2>\r\n                    <NavLink className='btn-add' to=\"/categories\">\r\n                        <img className='btn-add__icon' src={arrowLeftSvg} alt=\"\" />\r\n                    </NavLink>\r\n                </div>\r\n\r\n                <img className='page__icon' src={tagSvg} alt=\"\" />\r\n\r\n                <div className='new-transaction'>\r\n                    <div className='new-transaction__row'>\r\n                        <form onSubmit={addOperationHandler} className='new-transaction__col'>\r\n                            <input onChange={changeHandler} type='text' placeholder='Название категории' name='title' required />\r\n\r\n                            <div className='create-sources__row'>\r\n                                <h4 className='new-transaction__title'>Тип операции:</h4>\r\n\r\n                                <div className='create-sources__col'>\r\n                                    <span className='new-transaction__value'>{operation}</span>\r\n\r\n                                    <button type='button' onClick={tooglePopupType} className='new-transaction__btn' >\r\n                                        <img className='new-transaction__icon' src={chevronDownSvg} alt='' />\r\n                                    </button>\r\n                                </div>\r\n\r\n                                {popupType && <ul className='new-transaction__popup-list'>\r\n\r\n                                    {operations.map((name, index) => (\r\n                                        <li key={`${name}_${index}`} className='new-transaction__popup-item'>\r\n                                            <button onClick={() => { selectOperations(name) }} className='new-transaction__popup-btn'>{name}</button>\r\n                                        </li>\r\n                                    ))}\r\n\r\n                                </ul>}\r\n                            </div>\r\n\r\n                            <button className='new-transaction__submit' type='submit'>Добавить категорию</button>\r\n                        </form>\r\n\r\n                        {error && <p className='error'>Заполните все поля</p>}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CreateCategories;","\r\nimport React from \"react\";\r\n\r\n// Include the react-fusioncharts component\r\nimport ReactFC from \"react-fusioncharts\";\r\n\r\n// Include the fusioncharts library\r\nimport FusionCharts from \"fusioncharts\";\r\n\r\n// Include the chart type\r\nimport Column2D from \"fusioncharts/fusioncharts.charts\";\r\n\r\n// Include the theme as fusion\r\nimport FusionTheme from \"fusioncharts/themes/fusioncharts.theme.fusion\";\r\n\r\n// Adding the chart and theme as dependency to the core fusioncharts\r\nReactFC.fcRoot(FusionCharts, Column2D, FusionTheme);\r\n\r\nconst ChartComponent = ({ data = [] }) => {\r\n  const newArr = data.map(i => ({ label: i._id, value: i.sum }));\r\n\r\n  const chartConfigs = {\r\n    type: \"bar3d\",\r\n    width: \"100%\",\r\n    height: \"400\",\r\n    dataFormat: \"json\",\r\n    dataSource: {\r\n      // Chart Configuration\r\n      chart: {\r\n        caption: \"Расходы по категориям\",\r\n        // subCaption: \"In MMbbl = One Million barrels\",        \r\n        xAxisName: \"Категории\",\r\n        yAxisName: \"Сумма в бел.руб\",\r\n        // numberSuffix: \"руб\",\r\n        theme: \"fusion\",\r\n        // palettecolors: \"#23d2e2\",\r\n        useplotgradientcolor: \"0\",\r\n        // \"showBorder\": \"1\",\r\n        // \"borderColor\": \"#666666\",\r\n        // \"borderThickness\": \"4\",\r\n        // \"borderAlpha\": \"80\",\r\n        // \"bgImage\": \"http://upload.wikimedia.org/wikipedia/commons/7/79/Misc_fruit.jpg\",\r\n      },\r\n      // Chart Data\r\n      data: newArr\r\n    }\r\n  };\r\n\r\n  return <ReactFC {...chartConfigs} />\r\n};\r\n\r\nexport default ChartComponent;","\r\nimport React from \"react\";\r\n\r\n// Include the react-fusioncharts component\r\nimport ReactFC from \"react-fusioncharts\";\r\n\r\n// Include the fusioncharts library\r\nimport FusionCharts from \"fusioncharts\";\r\n\r\n// Include the chart type\r\nimport Column2D from \"fusioncharts/fusioncharts.charts\";\r\n\r\n// Include the theme as fusion\r\nimport FusionTheme from \"fusioncharts/themes/fusioncharts.theme.fusion\";\r\n\r\n// Adding the chart and theme as dependency to the core fusioncharts\r\nReactFC.fcRoot(FusionCharts, Column2D, FusionTheme);\r\n\r\nconst ChartComponent = ({ data = [] }) => {\r\n  const newArr = data.map(i => ({ label: i._id, value: i.sum }));\r\n\r\n  const chartConfigs = {\r\n    type: \"bar3d\",\r\n    width: \"100%\",\r\n    height: \"400\",\r\n    dataFormat: \"json\",\r\n    dataSource: {\r\n      // Chart Configuration\r\n      chart: {\r\n        caption: \"Доходы по категориям\",\r\n        // subCaption: \"In MMbbl = One Million barrels\",        \r\n        xAxisName: \"Категории\",\r\n        yAxisName: \"Сумма в бел.руб\",\r\n        // numberSuffix: \"руб\",\r\n        theme: \"fusion\",\r\n        palettecolors: \"#23d2e2\",\r\n        useplotgradientcolor: \"0\",\r\n        // \"showBorder\": \"1\",\r\n        // \"borderColor\": \"#666666\",\r\n        // \"borderThickness\": \"4\",\r\n        // \"borderAlpha\": \"80\",\r\n        // \"bgImage\": \"http://upload.wikimedia.org/wikipedia/commons/7/79/Misc_fruit.jpg\",\r\n      },\r\n      // Chart Data\r\n      data: newArr\r\n    }\r\n  };\r\n\r\n  return <ReactFC {...chartConfigs} />;\r\n};\r\n\r\nexport default ChartComponent;","//core\r\nimport React from 'react';\r\n\r\n//charts\r\nimport StatisticsExpenses from '../../charts/StatisticsExpenses';\r\nimport StatisticsRevenue from '../../charts/StatisticsRevenue';\r\n\r\n//hooks\r\nimport useStatisticsExpenses from './useStatisticsExpenses';\r\nimport useStatisticsRevenue from './useStatisticsRevenue';\r\n\r\n// styles\r\nimport './StatisticsPage.scss'\r\n\r\n\r\nconst StatisticsPage = () => {\r\n    const { data, isLoading, error } = useStatisticsExpenses()\r\n    const { data: revenue, isLoading: revenueIsLoading, error: errorrEvenue } = useStatisticsRevenue()\r\n\r\n    if (isLoading) return <p className='load-statistics'>Загрузка...</p>\r\n    if (error) return 'Ошибка при получении данных'\r\n\r\n    if (revenueIsLoading) return <p className='load-statistics'>Загрузка...</p>\r\n    if (errorrEvenue) return 'Ошибка при получении данных'\r\n\r\n    const isEmptyExpenses = data.length === 0\r\n    const isEmptyRevenue = revenue.length === 0\r\n\r\n    return (\r\n        <div className='page  statisticsPage'>\r\n            <div className='container'>\r\n                <h1 className='page__title'>Статистика</h1>\r\n\r\n                <div className='page__inner'>\r\n                    {!isEmptyExpenses ? <StatisticsExpenses data={data} /> : <p>Ещё нет данных о расходах</p>}\r\n                    {!isEmptyRevenue ? <StatisticsRevenue data={revenue} /> : <p>Ещё нет данных о доходах</p>}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default StatisticsPage;","//core\r\nimport React from 'react';\r\nimport { useQuery } from 'react-query';\r\n\r\n//context\r\nimport { AuthContext } from '../../context/AuthContext'\r\n\r\nexport default function useStatisticsExpenses() {\r\n    const { token, logout } = React.useContext(AuthContext);\r\n\r\n    return useQuery('expenses', () =>\r\n\r\n        fetch('/api/transaction/expenses', { headers: { Authorization: `Bearer ${token}` } })\r\n            .then((res) => {\r\n                if (res.ok) {\r\n                    return res.json()\r\n                }\r\n                return logout()\r\n            })\r\n\r\n            .catch(e => {\r\n                throw new Error(e)\r\n            })\r\n    )\r\n}\r\n","//core\r\nimport React from 'react';\r\nimport { useQuery } from 'react-query';\r\n\r\n//context\r\nimport { AuthContext } from '../../context/AuthContext'\r\n\r\nexport default function useStatisticsRevenue() {\r\n    const { token, logout } = React.useContext(AuthContext);\r\n\r\n    return useQuery('revenue', () =>\r\n\r\n        fetch('/api/transaction/revenue', { headers: { Authorization: `Bearer ${token}` } })\r\n            .then((res) => {\r\n                if (res.ok) {\r\n                    return res.json()\r\n                }\r\n                return logout()\r\n            })\r\n\r\n            .catch(e => {\r\n                throw new Error(e)\r\n            })\r\n    )\r\n}\r\n","//core\r\nimport React, { useState } from 'react';\r\n\r\n//hooks\r\nimport useCategories from '../Categories/useCategories';\r\nimport useSources from '../SourcesList/useSources';\r\n\r\n//images\r\nimport chevronDownSvg from '../../images/chevron-down.svg';\r\n\r\n\r\nexport const Filter = ({ setIsOpenFilterList, fetchLinks, setIsNotFound }) => {\r\n    const [popupType, setPopupType] = useState(false);\r\n    const [popupSources, setPopupSources] = useState(false);\r\n    const [popupCategory, setPopupCategory] = useState(false);\r\n\r\n    const [operation, setOperation] = useState('');\r\n    const [source, setSource] = useState('');\r\n    const [category, setCategory] = useState('');\r\n\r\n    const query = {\r\n        operation,\r\n        source,\r\n        category,\r\n    }\r\n\r\n    const reset = {}\r\n\r\n    const { data: categories, isLoading, error: errorCategories } = useCategories()\r\n    const { data: sources, isLoading: sourcesLoading, error: errorSources } = useSources()\r\n\r\n    const fetchFilterListHandler = () => {\r\n        setIsOpenFilterList(true)\r\n        fetchLinks(query)\r\n    }\r\n\r\n    const resetFilterListHandler = () => {\r\n        setIsOpenFilterList(true)\r\n        fetchLinks(reset)\r\n        setOperation('')\r\n        setSource('')\r\n        setCategory('')\r\n        setIsNotFound(false)\r\n    }\r\n\r\n    const tooglePopupType = () => {\r\n        setPopupType(!popupType)\r\n    }\r\n\r\n    const tooglePopupSources = () => {\r\n        setPopupSources(!popupSources)\r\n    }\r\n\r\n    const tooglePopupCategory = () => {\r\n        setPopupCategory(!popupCategory)\r\n    }\r\n\r\n    const operations = ['расходы', 'доходы'];\r\n    const selectPperations = (name) => {\r\n        setOperation(name)\r\n        setPopupType(!popupType)\r\n    }\r\n\r\n    const selectSources = (name) => {\r\n        setSource(name)\r\n        setPopupSources(!popupSources)\r\n    }\r\n\r\n    const selectCategory = (title) => {\r\n        setCategory(title)\r\n        setPopupCategory(!popupCategory)\r\n    }\r\n\r\n    if (isLoading) return 'Loading...'\r\n    if (sourcesLoading) return 'Loading...'\r\n\r\n    if (errorCategories) return 'Ошибка при получении счетов: ' + errorCategories.message\r\n    if (errorSources) return 'Ошибка при получении счетов: ' + errorSources.message\r\n\r\n\r\n    return (\r\n        <div className='new-transaction'>\r\n            <div className='new-transaction__row'>\r\n                <h4 className='new-transaction__title'>Тип операции:</h4>\r\n\r\n                <div className='new-transaction__col'>\r\n                    <span className='new-transaction__value'>{operation}</span>\r\n\r\n                    <button onClick={tooglePopupType} className='new-transaction__btn'>\r\n                        <img className='new-transaction__icon' src={chevronDownSvg} alt='' />\r\n                    </button>\r\n                </div>\r\n\r\n                {popupType && <ul className='new-transaction__popup-list'>\r\n\r\n                    {operations.map((name, index) => (\r\n                        <li key={`${name}_${index}`} className='new-transaction__popup-item'>\r\n                            <button onClick={() => { selectPperations(name) }} className='new-transaction__popup-btn'>{name}</button>\r\n                        </li>\r\n                    ))}\r\n\r\n                </ul>}\r\n            </div>\r\n\r\n            <div className='new-transaction__row'>\r\n                <h4 className='new-transaction__title'>Счёт:</h4>\r\n\r\n                <div className='new-transaction__col'>\r\n                    <span className='new-transaction__value'>{source}</span>\r\n\r\n                    <button onClick={tooglePopupSources} className='new-transaction__btn'>\r\n                        <img className='new-transaction__icon' src={chevronDownSvg} alt='' />\r\n                    </button>\r\n                </div>\r\n\r\n                {popupSources && <ul className='new-transaction__popup-list'>\r\n\r\n                    {sources.map(({ title }, index) => (\r\n                        <li key={`${title}_${index}`} className='new-transaction__popup-item'>\r\n                            <button onClick={() => { selectSources(title) }} className='new-transaction__popup-btn'>{title}</button>\r\n                        </li>\r\n                    ))}\r\n\r\n                </ul>}\r\n            </div>\r\n\r\n            <div className='new-transaction__row'>\r\n                <h4 className='new-transaction__title'>Категория:</h4>\r\n\r\n                <div className='new-transaction__col'>\r\n                    <span className='new-transaction__value'>{category}</span>\r\n                    <button onClick={tooglePopupCategory} className='new-transaction__btn'>\r\n                        <img className='new-transaction__icon' src={chevronDownSvg} alt='' />\r\n                    </button>\r\n                </div>\r\n\r\n                {popupCategory && <ul className='new-transaction__popup-list'>\r\n\r\n                    {categories.map((item, index) => (\r\n                        <li key={`${item.title}_${index}`} className='new-transaction__popup-item'>\r\n                            <button onClick={() => { selectCategory(item.title) }} className='new-transaction__popup-btn'>{item.title}</button>\r\n                        </li>\r\n                    ))}\r\n                </ul>}\r\n            </div>\r\n\r\n\r\n            <div className='new-transaction__row  filter-btns'>\r\n                <button onClick={resetFilterListHandler} className='new-transaction__submit' type='button'>Очистить</button>\r\n                <button onClick={fetchFilterListHandler} className='new-transaction__submit' type='button'>Показать</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","//core\r\nimport React from 'react';\r\nimport classnames from 'classnames';\r\n\r\n//components\r\nimport Transaction from '../../components/TransactionsList/Transaction';\r\nimport { Filter } from '../../components/Flter/Flter';\r\n\r\n//hooks\r\nimport useAllTransactions from './useAllTransactions'\r\n\r\n//context\r\nimport { AuthContext } from '../../context/AuthContext'\r\n\r\n// styles\r\nimport './AllTransactionsPage.scss'\r\n\r\n\r\nconst AllTransactionsPage = () => {\r\n    const [isOpenFilterList, setIsOpenFilterList] = React.useState(false)\r\n    const [isNotFound, setIsNotFound] = React.useState(false)\r\n    const [filtres, setFiltres] = React.useState([])\r\n    const { data, isLoading, error } = useAllTransactions()\r\n    const { token } = React.useContext(AuthContext);\r\n\r\n    const fetchLinks = async (params) => {\r\n        try {\r\n\r\n            const entries = Object.entries(params).filter(([key, value]) => value !== '')\r\n            const newParams = Object.fromEntries(entries)\r\n\r\n            const paramsUrl = Object.keys(newParams).map((key) => `${encodeURIComponent(key)}=${encodeURIComponent(newParams[key])}`).join('&')\r\n\r\n            const response = await fetch('/api/transaction/category/?' + paramsUrl, { headers: { Authorization: `Bearer ${token}` } })\r\n\r\n            const data = await response.json()\r\n\r\n            if (data.length === 0) {\r\n                setIsNotFound(true)\r\n            } else {\r\n                setFiltres(data)\r\n            }\r\n\r\n        } catch (e) {\r\n            throw new Error(e)\r\n        }\r\n    }\r\n\r\n    if (isLoading) return <p className='load-statistics'>Загрузка...</p>\r\n    if (error) return 'Ошибка при получении всех транзакций'\r\n\r\n    return (\r\n        <div className='page  allTransactionsPage'>\r\n            <div className='container'>\r\n                <div className='page__inner'>\r\n                    <div className='all-transactions'>\r\n\r\n                        {!isOpenFilterList\r\n                            ?\r\n                            <ul className={classnames({ 'transactions__list': true, 'scroll': data.length > 5 })}>\r\n                                <Transaction transactions={data} />\r\n                            </ul>\r\n                            :\r\n                            <>\r\n                                {!isNotFound\r\n                                    ?\r\n                                    <div>\r\n                                        <ul className={classnames({ 'transactions__list': true, 'scroll': filtres.length > 5 })}>\r\n                                            <Transaction transactions={filtres} />\r\n                                        </ul>\r\n                                    </div>\r\n                                    :\r\n                                    <p>Ничего не найдено</p>\r\n                                }\r\n                            </>\r\n                        }\r\n                    </div>\r\n\r\n\r\n                    <div className='allTransactionsPage__filter-wrap'>\r\n                        <div className=\"title-wrap\">\r\n                            <h2>Фильтр</h2>\r\n                        </div>\r\n\r\n                        <Filter setIsOpenFilterList={setIsOpenFilterList} fetchLinks={fetchLinks} setIsNotFound={setIsNotFound} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AllTransactionsPage;","//core\r\nimport React from 'react';\r\nimport { useQuery } from 'react-query';\r\n\r\n//context\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\n\r\nexport default function useTransactionsCategory() {\r\n    const { token, logout } = React.useContext(AuthContext);\r\n\r\n    return useQuery('transactions-all', () =>\r\n\r\n        fetch('/api/transaction/all', { headers: { Authorization: `Bearer ${token}` } })\r\n            .then((res) => {\r\n                if (res.ok) {\r\n                    return res.json()\r\n                }\r\n                return logout()\r\n            })\r\n\r\n            .catch(e => {\r\n                throw new Error(e)\r\n            })\r\n    )\r\n}\r\n","// core\r\nimport React from 'react';\r\nimport { useParams, useHistory } from 'react-router-dom';\r\n\r\n// images\r\nimport sourcesSvg from '../../images/money2.svg';\r\nimport ellipsisHorizontalSvg from '../../images/ellipsis-horizontal.svg'\r\n\r\n// context\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\n// hooks\r\nimport useSource from './useSource';\r\nimport useDeleteSource from '../../components/SourcesList/useDeleteSource';\r\nimport { useHttp } from '../../hooks/http.hook';\r\n\r\n\r\nconst DetailSourcePage = () => {\r\n    const auth = React.useContext(AuthContext)\r\n    const { request, } = useHttp();\r\n    const history = useHistory()\r\n    const sourceId = useParams().id\r\n\r\n    const { data, isLoading, error } = useSource(sourceId)\r\n    const [isPopup, seTisPopup] = React.useState(false)\r\n    const [editMode, setEditMode] = React.useState(false)\r\n    const [newTitleSource, setNewTitleSource] = React.useState('')\r\n\r\n    const [deleteSource] = useDeleteSource();\r\n\r\n    const deleteSourceHandler = async (sourceId) => {\r\n        deleteSource(sourceId)\r\n        history.push(`/home/`)\r\n    }\r\n\r\n    const tooglePopup = () => {\r\n        seTisPopup(!isPopup)\r\n    };\r\n\r\n    const toogleEditMode = () => {\r\n        setEditMode(!editMode)\r\n        seTisPopup(!isPopup)\r\n    }\r\n\r\n    const changeNewTitleSource = (e) => {\r\n        setNewTitleSource(e.target.value)\r\n    }\r\n\r\n    const saveSource = async (e) => {\r\n        e.preventDefault();\r\n\r\n        await request('/api/sources/edit', 'POST', { newTitleSource, sourceId }, {\r\n            Authorization: `Bearer ${auth.token}`\r\n        })\r\n        history.push(`/home/`)\r\n    }\r\n\r\n    if (isLoading) return <p className='load-statistics'>Загрузка...</p>\r\n    if (error) return 'Ошибка при получении счетов: ' + error.message\r\n\r\n    return (\r\n        <div className='page  detailSourcePage'>\r\n            <div className='container'>\r\n                <div className='page__inner'>\r\n                    <form className='sources-item' onSubmit={saveSource}>\r\n                        <img className='sources-item__icon' src={sourcesSvg} alt=\"\" />\r\n\r\n                        {!editMode\r\n                            ? <h4 className='sources-item__title'>{data.title}</h4>\r\n                            : <input onChange={(e) => { changeNewTitleSource(e) }}\r\n                                className='sources-item__input'\r\n                                type='text' placeholder={data.title}\r\n                                value={newTitleSource}\r\n                                required\r\n                            />\r\n                        }\r\n\r\n                        <div className='sources-item__total'>{data.total} руб</div>\r\n\r\n                        {!editMode\r\n                            ?\r\n                            <button onClick={tooglePopup} className='new-transaction__btn' type='button'>\r\n                                <img className='new-transaction__icon' src={ellipsisHorizontalSvg} alt='' />\r\n                            </button>\r\n                            :\r\n                            <button className='new-transaction__btn' type='submit'>\r\n                                ок\r\n                            </button>\r\n                        }\r\n\r\n                        {isPopup &&\r\n                            <ul className='new-transaction__popup-list'>\r\n                                <li className='new-transaction__popup-item'>\r\n                                    <button onClick={() => { deleteSourceHandler(sourceId) }} className='new-transaction__popup-btn' type='button'>Удалить</button>\r\n                                </li>\r\n\r\n                                <li className='new-transaction__popup-item'>\r\n                                    <button onClick={toogleEditMode} className='new-transaction__popup-btn'>Редактировать</button>\r\n                                </li>\r\n                            </ul>\r\n                        }\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DetailSourcePage;","// core\r\nimport React from 'react';\r\nimport { useQuery } from 'react-query';\r\n\r\n// context\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\nexport default function useSource(sourceId) {\r\n    const { token, logout } = React.useContext(AuthContext);\r\n\r\n    return useQuery('source', () =>\r\n        fetch(`/api/sources/${sourceId}`, { headers: { Authorization: `Bearer ${token}` } })\r\n            .then((res) => {\r\n                if (res.ok) {\r\n                    return res.json()\r\n                }\r\n                return logout()\r\n            })\r\n\r\n            .catch(e => {\r\n                throw new Error(e)\r\n            })\r\n    )\r\n}","// core\r\nimport React from 'react';\r\nimport { useMutation } from 'react-query';\r\n\r\n// context\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\nexport default function useDeleteSource() {\r\n    const { token, logout } = React.useContext(AuthContext);\r\n\r\n    return useMutation(\r\n        (sourceId) => fetch(`/api/sources/delete/${sourceId}`, { method: \"DELETE\", headers: { Authorization: `Bearer ${token}` } })\r\n            .then((res) => {\r\n                if (res.ok) {\r\n                    return res.data\r\n                }\r\n                return logout()\r\n            })\r\n\r\n            .catch(e => {\r\n                throw new Error(e)\r\n            })\r\n    )\r\n}","// core\r\nimport React from 'react';\r\nimport { useParams, useHistory } from 'react-router-dom';\r\n\r\n// images\r\nimport ellipsisHorizontalSvg from '../../images/ellipsis-horizontal.svg'\r\nimport tagSvg from '../../images/tag.svg';\r\n\r\n// context\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\n// hooks\r\nimport useDeleteCategory from '../../components/Categories/useDeleteCategory';\r\nimport useCategory from '../CategoriesPage/useCategory';\r\nimport { useHttp } from '../../hooks/http.hook';\r\n\r\n\r\nconst DetailCategoriesPage = () => {\r\n    const auth = React.useContext(AuthContext)\r\n    const { request } = useHttp();\r\n    const history = useHistory()\r\n    const categoryId = useParams().id\r\n\r\n    const [isPopup, seTisPopup] = React.useState(false)\r\n    const { data, isLoading, error } = useCategory(categoryId)\r\n    const [editMode, setEditMode] = React.useState(false)\r\n    const [newTitleCategory, setNewTitleCategory] = React.useState('')\r\n\r\n    const [deleteCategory] = useDeleteCategory();\r\n\r\n    const deleteCategoryHandler = async (categoryId) => {\r\n        deleteCategory(categoryId)\r\n        history.push(`/categories/`)\r\n    }\r\n\r\n    const tooglePopup = () => {\r\n        seTisPopup(!isPopup)\r\n    };\r\n\r\n    const toogleEditMode = () => {\r\n        setEditMode(!editMode)\r\n        seTisPopup(!isPopup)\r\n    }\r\n\r\n    const changeNewTitleCategory = (e) => {\r\n        setNewTitleCategory(e.target.value)\r\n    }\r\n\r\n    const saveCategory = async (e) => {\r\n        e.preventDefault();\r\n\r\n        await request('/api/categories/edit', 'POST', { newTitleCategory, categoryId }, {\r\n            Authorization: `Bearer ${auth.token}`\r\n        })\r\n        history.push(`/categories/`)\r\n    }\r\n\r\n\r\n\r\n    if (isLoading) return <p className='load-statistics'>Загрузка...</p>\r\n    if (error) return 'Ошибка при получении счетов: ' + error.message\r\n\r\n\r\n    return (\r\n        <div className='page  detailCategoryPage'>\r\n            <div className='container'>\r\n                <div className='page__inner'>\r\n                    <form className='sources-item' onSubmit={saveCategory}>\r\n                        <img className='sources-item__icon' src={tagSvg} alt=\"\" />\r\n\r\n                        {!editMode\r\n                            ? <h4 className='sources-item__title'>{data.title}</h4>\r\n                            : <input onChange={(e) => { changeNewTitleCategory(e) }}\r\n                                className='sources-item__input'\r\n                                type='text'\r\n                                placeholder={data.title}\r\n                                value={newTitleCategory}\r\n                                required\r\n                            />\r\n                        }\r\n\r\n                        {!editMode\r\n                            ?\r\n                            <button onClick={tooglePopup} className='new-transaction__btn' type='button'>\r\n                                <img className='new-transaction__icon' src={ellipsisHorizontalSvg} alt='' />\r\n                            </button>\r\n                            :\r\n                            <button className='new-transaction__btn' type='submit'>\r\n                                ок\r\n                            </button>\r\n                        }\r\n\r\n                        {isPopup &&\r\n                            <ul className='new-transaction__popup-list'>\r\n                                <li className='new-transaction__popup-item'>\r\n                                    <button onClick={() => { deleteCategoryHandler(categoryId) }} className='new-transaction__popup-btn' type='button'>Удалить</button>\r\n                                </li>\r\n\r\n                                <li className='new-transaction__popup-item'>\r\n                                    <button onClick={toogleEditMode} className='new-transaction__popup-btn'>Редактировать</button>\r\n                                </li>\r\n                            </ul>\r\n                        }\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DetailCategoriesPage;","// core\r\nimport React from 'react'\r\nimport { useQuery } from 'react-query';\r\n\r\n// context\r\nimport { AuthContext } from '../../context/AuthContext'\r\n\r\nexport default function useCategory(categoryId) {\r\n    const { token, logout } = React.useContext(AuthContext)\r\n\r\n    return useQuery('category', () =>\r\n        fetch(`/api/categories/${categoryId}`, { headers: { Authorization: `Bearer ${token}` } })\r\n            .then((res) => {\r\n                if (res.ok) {\r\n                    return res.json()\r\n                }\r\n                return logout()\r\n            })\r\n\r\n            .catch(e => {\r\n                throw new Error(e)\r\n            })\r\n    )\r\n}","// core\r\nimport React from 'react';\r\nimport { useMutation } from 'react-query';\r\n\r\n// context\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\nexport default function useDeleteCategory() {\r\n    const { token, logout } = React.useContext(AuthContext);\r\n\r\n    return useMutation(\r\n        (categoryId) => fetch(`/api/categories/delete/${categoryId}`, { method: \"DELETE\", headers: { Authorization: `Bearer ${token}` } })\r\n            .then((res) => {\r\n                if (res.ok) {\r\n                    return res.data\r\n                }\r\n                return logout()\r\n            })\r\n\r\n            .catch(e => {\r\n                throw new Error(e)\r\n            })\r\n\r\n    )\r\n}","//core\r\nimport React, { useContext } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\n//context\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\n//image\r\nimport logoSvg from '../../images/logo.svg';\r\n\r\n// styles\r\nimport './Header.scss'\r\n\r\n\r\nexport const Header = () => {\r\n    const history = useHistory()\r\n    const auth = useContext(AuthContext)\r\n\r\n    const logoutHandler = event => {\r\n        event.preventDefault()\r\n        auth.logout()\r\n        history.push('/')\r\n    }\r\n\r\n    return (\r\n        <header className=\"header\">\r\n            <div className='container'>\r\n                <div className='header__inner'>\r\n\r\n                    <div className=\"logo  header__logo\">\r\n                        <img className='logo__img' src={logoSvg} alt=\"logo\" />\r\n                        <h1 className=\"logo__text\">Finance</h1>\r\n                    </div>\r\n\r\n                    <div className='header__email'>{auth.email}</div>\r\n\r\n                    <div className=\"header__actions\">\r\n                        <div className=\"header__actions-item\">\r\n                            <a className='header__logout' href=\"/\" onClick={logoutHandler}>Выйти</a>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </header>\r\n    )\r\n}\r\n","// core\r\nimport React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\n// styles\r\nimport './Footer.scss'\r\n\r\n// images\r\nimport homeSvg from '../../images/home.svg'\r\nimport chartSvg from '../../images/chart.svg'\r\nimport categorySvg from '../../images/category.svg'\r\n\r\nconst Footer = () => {\r\n    return (\r\n        <div className='footer'>\r\n            <div className='container'>\r\n                <div className='footer__inner'>\r\n                    <div className='footer__btns'>\r\n                        <NavLink className='footer__btn' to=\"/home\">\r\n                            <img className='footer__btn-icon' src={homeSvg} alt=\"\" />\r\n                            <span className='footer__btn-title'>Главная</span>\r\n                        </NavLink>\r\n\r\n                        <NavLink className='footer__btn' to=\"/categories\">\r\n                            <img className='footer__btn-icon' src={categorySvg} alt=\"\" />\r\n                            <span className='footer__btn-title'>Категории</span>\r\n                        </NavLink>\r\n\r\n                        <NavLink className='footer__btn' to=\"/statistics\">\r\n                            <img className='footer__btn-icon' src={chartSvg} alt=\"\" />\r\n                            <span className='footer__btn-title'>Статистика</span>\r\n                        </NavLink>\r\n                    </div>\r\n\r\n                    {/* <NavLink className='footer__create-btn' to=\"/create\">+</NavLink> */}\r\n                    <NavLink className='footer__btn  footer__create-btn' to=\"/create\">+</NavLink>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Footer;","//core\r\nimport React from 'react';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\nimport { useRoutes } from './routes';\r\n\r\n//hooks\r\nimport { useAuth } from './hooks/auth.hook';\r\n\r\n//context\r\nimport { AuthContext } from './context/AuthContext';\r\n\r\n//components\r\nimport { Header } from './components/Header/Header';\r\nimport Footer from './components/Footer/Footer';\r\n\r\n//ReactQueryDevtools\r\n// import { ReactQueryDevtools } from 'react-query-devtools'\r\nimport { ReactQueryConfigProvider } from 'react-query';\r\nconst queryConfig = { queries: { refetchOnWindowFocus: false } };\r\n\r\n\r\nfunction App() {\r\n    const { token, login, logout, userId, email } = useAuth();\r\n    const isAuthenticated = !!token;\r\n    const routes = useRoutes(isAuthenticated);\r\n\r\n    return (\r\n        <ReactQueryConfigProvider config={queryConfig}>\r\n            <AuthContext.Provider value={{\r\n                token, login, logout, userId, isAuthenticated, email\r\n            }}>\r\n\r\n                <Router>\r\n                    {isAuthenticated && <Header />}\r\n\r\n                    <div className='app'>\r\n                        {/* <div className=\"container\">\r\n                            \r\n                        </div> */}\r\n                        {routes}\r\n                    </div>\r\n\r\n                    {isAuthenticated && <Footer />}\r\n                </Router>\r\n\r\n                {/* <ReactQueryDevtools initialIsOpen={false} /> */}\r\n            </AuthContext.Provider>\r\n        </ReactQueryConfigProvider>\r\n    )\r\n}\r\n\r\nexport default App;\r\n","import { useState, useCallback, useEffect } from 'react'\r\n\r\nconst storageName = 'userData'\r\n\r\nexport const useAuth = () => {\r\n  const [token, setToken] = useState(null)\r\n  const [ready, setReady] = useState(false)\r\n  const [userId, setUserId] = useState(null)\r\n\r\n  const [email, setEmail] = useState(null)\r\n\r\n\r\n  const login = useCallback((jwtToken, id, email) => {\r\n    setToken(jwtToken)\r\n    setUserId(id)\r\n    setEmail(email)\r\n\r\n    localStorage.setItem(storageName, JSON.stringify({\r\n      userId: id, token: jwtToken, email: email\r\n    }))\r\n  }, [])\r\n\r\n\r\n  const logout = useCallback(() => {\r\n    setToken(null)\r\n    setUserId(null)\r\n    localStorage.removeItem(storageName)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const data = JSON.parse(localStorage.getItem(storageName))\r\n\r\n    if (data && data.token) {\r\n      login(data.token, data.userId, data.email)\r\n    }\r\n\r\n    setReady(true)\r\n  }, [login])\r\n\r\n\r\n  return { login, logout, token, userId, ready, email }\r\n}\r\n","// core\r\nimport React from 'react'\r\nimport { Switch, Route, Redirect } from 'react-router-dom'\r\n\r\n// pages\r\nimport { HomePage } from './pages/HomePage/HomePage'\r\nimport { CreateTransactionPage } from './pages/CreateTransactionPage/CreateTransactionPage'\r\nimport AuthPage from './pages/AuthPage/AuthPage'\r\nimport CreateSource from './pages/CreateSource/CreateSource';\r\nimport CategoriesPage from './pages/CategoriesPage/CategoriesPage';\r\nimport CreateCategories from './pages/CreateCategories/CreateCategories';\r\nimport StatisticsPage from './pages/StatisticsPage/StatisticsPage';\r\nimport AllTransactionsPage from './pages/AllTransactionsPage/AllTransactionsPage';\r\nimport DetailSourcePage from './pages/DetailSourcePage/DetailSourcePage';\r\nimport DetailCategoriesPage from './pages/DetailCategoriesPage/DetailCategoriesPage';\r\n\r\n\r\nexport const useRoutes = isAuthenticated => {\r\n    if (isAuthenticated) {\r\n        return (\r\n            <Switch>\r\n                <Route path=\"/home\" exact>\r\n                    <HomePage />\r\n                </Route>\r\n\r\n                <Route path=\"/create\">\r\n                    <CreateTransactionPage />\r\n                </Route>\r\n\r\n                <Route path=\"/create-source\">\r\n                    <CreateSource />\r\n                </Route>\r\n\r\n                <Route path=\"/create-category\">\r\n                    <CreateCategories />\r\n                </Route>\r\n\r\n                <Route path=\"/statistics\">\r\n                    <StatisticsPage />\r\n                </Route>\r\n\r\n                <Route path=\"/transactions\">\r\n                    <AllTransactionsPage />\r\n                </Route>\r\n\r\n                <Route path=\"/categories\" exact>\r\n                    <CategoriesPage />\r\n                </Route>\r\n\r\n                <Route path=\"/sources/:id\">\r\n                    <DetailSourcePage />\r\n                </Route>\r\n\r\n                <Route path=\"/categories/:id\" exact>\r\n                    <DetailCategoriesPage />\r\n                </Route>\r\n\r\n                <Redirect to=\"/home\" />\r\n            </Switch>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Switch>\r\n            <Route path=\"/\" exact>\r\n                <AuthPage />\r\n            </Route>\r\n\r\n            <Redirect to=\"/\" />\r\n        </Switch>\r\n    )\r\n}\r\n","// core\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\n// styles\r\nimport '../src/styles/index.scss';\r\n\r\n// components\r\nimport App from './App';\r\n\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n"],"sourceRoot":""}